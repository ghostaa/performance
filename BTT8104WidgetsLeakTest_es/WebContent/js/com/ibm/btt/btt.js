/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.dijit.CellWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.CellWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.CellWidgetMixin");dojo.declare("com.ibm.btt.dijit.CellWidgetMixin",null,{cellWidgetId:"",cellWidgetDataName:""});}if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";var _f="?";_b=_b.toString();var _10=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _11=_b.replace(_d,"");var _12=_11.indexOf(_f);if(_12>0){var _13=_11.substring(_12+1);_11=_11.substring(0,_12);_c=this._parseI18nParamsValues(_13);}var tmp=_11.split(_e);var _14=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _15=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _16=tmp[1];if(typeof (_14)=="undefined"||typeof (_15)=="undefined"||_14==""||_15==""){return _b;}var _17=new com.ibm.btt.util.I18nBundle(_14,_15);var _18=_17.getMessage(_16,_c);if(_18==undefined||_18==null){return _b;}else{return _18;}}},_parseI18nParamsValues:function(_19){var _1a=null;var _1b=null;try{_19=_19.replace(/&quot;/g,"\"");_19=_19.replace(/&lt;/g,"<");_19=_19.replace(/&gt;/g,">");_19=_19.replace(/&amp;/g,"&");_19=_19.replace(/&#039;/g,"'");_19=_19.replace(/&#092;/g,"\\");_1a=dojo.fromJson(_19);_1b={};for(var i=0;i<_1a.length;i++){var _1c=_1a[i].t;if(_1c=="c"){_1b[_1a[i].n]=_1a[i].v;}else{if(_1c=="w"){var _1d=dijit.byId(_1a[i].id);var p=_1d?_1d.get(_1a[i].p):undefined;if(p){_1b[_1a[i].n]=p;}else{_1b[_1a[i].n]="";console.error("Can not get value of property \""+_1a[i].p+"\" from widget \""+_1a[i].id+"\"");}}}}}catch(e){console.error("Exception caught during parsing NLS parameter values.");return undefined;}if(_1b){return _1b;}else{return undefined;}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_1e){if(_1e){var _1f=_1e.replace(new RegExp("\r\n","g"),"\n");_1f=_1f.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_1f," ","&nbsp;");}else{return _1e;}},escapeEnterWrap:function(str){if(str){var _20=str.replace(new RegExp("\r\n","g"),"\n");_20=_20.replace(new RegExp("\n","g"),"<br/>");return _20;}else{return str;}},replaceAll:function(str,_21,_22){if(str&&_21&&_22){return str.replace(new RegExp(_21,"gm"),_22);}else{return str;}},removeWarp:function(str){if(str){var _23=str.replace(new RegExp("\r","g"),"");_23=_23.replace(new RegExp("\n","g"),"");return _23;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_24){return I18nUtil.getI18nString(key,_24);},replaceWrap:function(){},_setHintAttr:function(_25){this.hint=_25;var _26=this.textbox||this.focusNode||this.domNode;_26.title=StringUtil.removeWarp(this.getI18NString(_25));},_setVisibilityAttr:function(_27){var d="";var v="inherit";switch(_27){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_27;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);},_getVisibilityAttr:function(){var v=this.visibility;if(v!="gone"){if(this.domNode.offsetWidth<1||this.domNode.offsetHeight<1){v="gone";}else{v=dojo.style(this.domNode,"visibility")=="hidden"?"hidden":"visible";}}return v;},isVisible:function(){var isV=false;switch(this.visibility){case "gone":case "hidden":isV=false;break;default:isV=this.domNode.offsetWidth>0&&this.domNode.offsetHeight>0&&dojo.style(this.domNode,"visibility")!="hidden";}return isV;},isFocusable:function(){if(this.isVisible()==false){return false;}else{if(this.disabled||this.readOnly){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_28){var _29=function(src,_2a){var reg=new RegExp(_2a+"$");return reg.test(src);};if(_29(_28,"px")||_29(_28,"%")||_29(_28,"em")){return _28;}else{return _28+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:0,disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);var ti=parseInt(this.tabIndex);if(isNaN(ti)){this.tabIndex=0;}else{this.tabIndex=ti;}this.disabled=(this.disabled===true||this.disabled==="true");this.domNode.disabled=this.disabled;if(this.disabled){this.domNode.tabIndex=-1;dojo.addClass(this.domNode,"bttDisabledLink");}else{this.domNode.tabIndex=this.tabIndex;dojo.removeClass(this.domNode,"bttDisabledLink");}},_parameterHandler:function(e){var _2b="";var _2c=dojo.fromJson(e);_2c[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();for(var _2d in _2c){if(typeof (_2d)!="undefined"){var _2e=_2c[_2d];if(_2b==""){_2b+=_2d+"="+_2e;}else{_2b+="&"+_2d+"="+_2e;}}}return _2b;},_setActionAttr:function(_2f){this.action=_2f;var _30="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_30=this.action;if(this.bttParams!=""){if(_30.indexOf("?")==-1){_30+="?";}if(this.bttParams!=""){var _31=this._parameterHandler(this.bttParams);if(_30.substring(_30.length-1)=="?"){_30+=_31;}else{_30+="&"+_31;}}}}else{if(this.action!=""&&this.action!=="#"){_30=this.action;}else{_30="javascript:void(0)";}}this.domNode.href=_30;},_setTextAttr:function(_32){this.text=_32;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_32));},_setDisabledAttr:function(_33){this.disabled=(_33===true||_33==="true");this.domNode.disabled=this.disabled;if(this.disabled){this.domNode.tabIndex=-1;dojo.addClass(this.domNode,"bttDisabledLink");}else{this.domNode.tabIndex=this.tabIndex;dojo.removeClass(this.domNode,"bttDisabledLink");}},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_34){this.textWrap=_34;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_35){if(this.width!=""){this.width=_35;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_36){if(this.height!=""){this.height=_36;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");if(dojo.isIE&&dojo.isIE>8){dojo.style(this.focusNode.parentNode,"overflow","visible");}},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_37){this.text=_37;this.textNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_37));},_setTextWrapAttr:function(_38){this.textWrap=_38;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_39){this.icon=_39;if(_39){this.iconImageNode.src=_39;dojo.style(this.iconImageNode,"display","");}else{dojo.style(this.iconImageNode,"display","none");}},_setWidthAttr:function(_3a){if(_3a!=""){this.width=_3a;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_3b){if(_3b!=""){this.height=_3b;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_3c){this.inValid=_3c;if(this.type=="submit"){var _3d=this._getParentForm();if(_3d&&_3d.setSubmitButtonState){_3d.setSubmitButtonState();}else{this.set("disabled",_3c);}}else{this.set("disabled",_3c);}},_onButtonClick:function(e){var _3e=this._getParentForm();if(_3e){if(this.get("disabled")==false&&(this.type=="submit"||this.type=="cancel"||this.type=="save")){_3e._clickedButton=this;}else{_3e._clickedButton=null;}}if(_3e&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_3e);e.preventDefault();}else{if(_3e&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_3e);e.preventDefault();}else{if(_3e){_3e._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _3f=this.domNode;_3f.parentNode;_3f=_3f.parentNode){var _40=dijit.byNode(_3f);if(_40&&typeof _40._onSubmit=="function"){return _40;}}},_doCancelAction:function(_41){var _41=this._createHiddenForm(_41,typeof this.bttParams=="string"?dojo.fromJson(this.bttParams):this.bttParams);_41.submit();},_doSaveAction:function(_42){var _42=this._getParentForm();if(_42.onFormSubmit){_42.onFormSubmit();}var _43=_42.get("validValue");var _42=this._createHiddenForm(_42,dojo.mixin(_43,typeof this.bttParams=="string"?dojo.fromJson(this.bttParams):this.bttParams));_42.submit();},_createHiddenForm:function(_44,_45){var _44=dojo.create("form",{"style":"display:none;","action":_44.get("action"),"method":_44.get("method")},dojo.body(),"last");var _46=[];for(var _47 in _45){if(_47!=undefined&&_47!=null&&_47!=""){_46=_46.concat(this._convertToKeyValuePair(_47,_45[_47]));}}for(var i=0;i<_46.length;i++){dojo.create("input",{"type":"hidden","name":_46[i].key,"value":_46[i].value},_44,"last");}return _44;},_convertToKeyValuePair:function(_48,_49){var res=[];if(dojo.isObject(_49)){for(var key in _49){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_48+"."+key,_49[key]));}}}else{if(dojo.isArray(_49)){for(var i=0;i<_49.length;i++){res=res.concat(this._convertToKeyValuePair(_48+"."+i,_49[i]));}}else{res.push({"key":_48,"value":_49});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_4a){this.set("checked",_4a);},_setCheckedAttr:function(_4b){if(_4b==false||_4b=="false"||_4b==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_4c){this.text=_4c;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_4c));},_setStyleAttr:function(_4d){dojo.attr(this.labelNode,"style",_4d);},_setClassAttr:function(_4e){dojo.attr(this.labelNode,"class",_4e);},_setHintAttr:function(_4f){this.hint=_4f;var _50=StringUtil.removeWarp(this.getI18NString(_4f));var _51=this.textbox||this.focusNode||this.domNode;_51.title=_50;this.labelNode.title=_50;},_setVisibilityAttr:function(_52){var d="";var v="inherit";switch(_52){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_52;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);dojo.style(this.labelNode,"display",d);dojo.style(this.labelNode,"visibility",v);},_setReadOnlyAttr:function(_53){this.inherited(arguments);if(_53==="true"||_53===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_54){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_54);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_55){this.textWrap=_55;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_56){if(this.width!=""){this.width=_56;var _57=_56.replace(new RegExp("px","gm"),"");try{_57=Number(_57);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_56+" to number.");return;}var box=dojo.marginBox(this.domNode);var _58=_57-box.w;if(_58<0){_58=0;}dojo.style(this.labelNode,"width",_58+"px");}},_setHeightAttr:function(_59){if(this.height!=""){this.height=_59;var _5a=_59.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_5a+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",isMandatory:false,attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.placeHolder){this.placeHolder=this.getI18NString(this.placeHolder);this.watch("readOnly",this._updatePlaceHolder);this.watch("disabled",this._updatePlaceHolder);}},_updatePlaceHolder:function(){if(this._phspan&&(this.disabled||this.readOnly)){this._phspan.style.display="none";}else{this.inherited(arguments);}},acceptedCharReg:"",postCreate:function(){this.inherited(arguments);if(this.acceptedCharReg){this.acceptedCharReg=new RegExp(this.acceptedCharReg);if(!this.acceptedCharReg){return;}this.connect(this.textbox,"onkeypress",function(evt){if(evt.keyChar&&!this.acceptedCharReg.test(evt.keyChar)){return dojo.stopEvent(evt);}});}},validator:function(_5b,_5c){var _5d=typeof (this.regExpGen(_5c))!="undefined"&&this.testRegularExpression(this.regExpGen(_5c),_5b);if(!_5d){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_5b))&&(this._isEmpty(_5b)||this.parse(_5b,_5c)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_5e){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_5e);},_setWidthAttr:function(_5f){if(_5f!=""){this.width=_5f;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setIsMandatoryAttr:function(_60){this.isMandatory=_60;},isErasable:function(){if(this.isMandatory||this.textbox.value!=""){return false;}var _61=this.required;this.required=false;var isE=this.validator("",this.constraints);this.required=_61;return isE;},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_62){if(dojo.isArray(_62)){var _63=[];for(var i=0;i<_62.length;i++){var _64=this.getI18NString(_62[i]);if(_64==null){_64=_62[i];}_63.push(_64);}if(_63.length!=0){var _65=_63.join(" ");}else{var _65="";}}else{var _66=[];var _67=[];if(arguments.length==0){arguments[0]="";_62="";}for(var i=1;i<arguments.length;i++){_67[i-1]=arguments[i];}_66[0]=arguments[0];_66[1]=_67;_66[2]=true;var _65=this.getI18NString.apply(this,_66);if(_65==null){_65=_62;}}if(_62!=""){this._message=_62;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_65,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_68){if(this.onShowErrorFlag){this._set("state","Error");this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_68){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_69,_6a){if("min" in _6a&&this.compare(_69,_6a.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_6a.min});return false;}if("max" in _6a&&this.compare(_69,_6a.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_6a.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",typeAhead:true,inputFlag:0,comboValue:"",_eventsHandler:[],constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;this._eventsHandler=[];},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField?this.labelField:"label";this.storeDataFormat.itemValue=this.valueField?this.valueField:"value";this.searchAttr=this.storeDataFormat.itemLabel;var _6b=this.srcNodeRef;var _6c={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _6d=this.storeDataFormat.itemLabel;var _6e=this;dojo.query("> option",_6b).forEach(dojo.hitch(this,function(_6f,i){var _70={};_70[_6d]=_6e.getI18NString(dojo.trim(_6f.innerHTML));var _71=dojo.attr(_6f,"value");if(_71==""){}_70[this.storeDataFormat.itemValue]=_71;_6c.items.push(_70);}));if(_6c.items.length==0){if(this.storeData){var _72=dojo.fromJson(this.storeData);_6c=this._formatStoreData(_72);}}this.store=new dojo.data.ItemFileReadStore({data:_6c});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}if(this.typeAhead!=undefined&&this.typeAhead==false){this.textbox.readOnly=true;}else{if(this.readOnly!=undefined&&this.readOnly==true){this.textbox.readOnly=true;}else{this.textbox.readOnly=false;}}dojo.connect(this.focusNode,"onclick",dojo.hitch(this,function(){if(!this.typeAhead){if(this._opened){this.closeDropDown();}else{this.loadDropDown();}}}));if(this.typeAhead==false){if(this.comboValue!=null&&this.comboValue!=""){var _73=this.store.data;if(_73==null){_73=this.store._jsonData;}var _74=_73.items;for(var i=0;_74!=null&&i<_74.length;i++){if(_74[i][this.storeDataFormat.itemValue]==this.comboValue){this.textbox.value=_74[i][this.storeDataFormat.itemLabel];break;}}}}},setStoreData:function(_75){var _75=this._formatStoreData(_75);this.store.clearOnClose=true;this.store.data=_75;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_76){var _77={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(_76 instanceof Array){for(var i=0;i<_76.length;i++){if(_76[i]!=null){var _78={};if(dojo.isObject(_76[i])){if(_76[i][_77.label]!=null){_78[_77.label]=this.getI18NString(_76[i][_77.label]);if(_76[i][this.valueField]){_78[_77.identifier]=_76[i][this.valueField];}else{_78[_77.identifier]=this.getI18NString(_76[i][_77.label]);}}}else{if(dojo.isString(_76[i])){_78[_77.label]=this.getI18NString(_76[i]);_78[_77.identifier]=this.getI18NString(_76[i]);}else{_78[_77.label]=_76[i].toString();_78[_77.identifier]=_76[i].toString();}}if(_78[_77.label]){_77.items.push(_78);}}}}else{if(_76 instanceof Object){for(var p in _76){var _78={};_78[_77.label]=this.getI18NString(p);_78[_77.identifier]=_76[p];_77.items.push(_78);}}}return _77;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _79={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_79);},_handleStoreLoadingResponse:function(_7a){this.setStoreData(_7a);this.onAsyncOK();},_setItemAttr:function(_7b,_7c,_7d){if(!_7d){_7d=this.store.getValue(_7b,this.searchAttr);}this.inputFlag=1;if(this.valueField!=null&&this.valueField!=""){this.comboValue=this.store.getValue(_7b,this.valueField);}else{this.comboValue=this.store.getValue(_7b,this.storeDataFormat.itemValue);}this._set("item",_7b);dijit.form.ComboBox.superclass._setValueAttr.call(this,this.comboValue,_7c,_7d);},_getValueAttr:function(){var _7e=this.inherited(arguments);if(this.inputFlag==0){return _7e;}else{return this.comboValue;}},_setDisplayedValueAttr:function(_7f){if(this.typeAhead==true){this.textbox.value=_7f;this.comboValue=_7f;this.inputFlag=0;}else{this.comboValue=_7f;this.inputFlag=1;}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventsHandler&&this._eventsHandler.length>0){try{dojo.disconnect(this._eventsHandler.pop());}catch(e){}}this._eventsHandler=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_80){return /^-?\d+(\.\d+)?$/.test(_80);},validator:function(_81,_82){var _83;if(this.isNumber(_81)){_83=_81;}else{_83=this.parse(_81,this.constraints);if(!this.isNumber(_83)&&_81!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_83)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_83+=".";for(var i=0;i<this.decimalPlaces;i++){_83+="0";}}}}if(this.isNumber(_83)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_81))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_83)&&this.numberType=="byte"&&(_83>127||_83<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_83)&&this.numberType=="short"&&(_83>32767||_83<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_83)&&this.numberType=="int"&&(_83>2147483647||_83<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_83)&&this.numberType=="integer"&&(_83>2147483647||_83<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_83)&&this.numberType=="long"&&(_83>9223372036854776000||_83<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_83.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_84,_85,_86){if(typeof _84==="string"&&_84!==""){var _87=Number(_84);if(isNaN(_87)&&_84&&_84!=""){var _88={};if(this.constraints["pattern"]){_88["pattern"]=this.constraints["pattern"];}_84=this.parse(_84,_88);}else{_84=_87;}}this.inherited(arguments);},create:function(_89,_8a){this.inherited(arguments);var _8b=dojo.attr(_8a,"value");if(_8b&&_8b!=""){var _8c={};if(this.constraints["pattern"]){_8c["pattern"]=this.constraints["pattern"];}_89.value=this.parse(_8b,_8c);if(isNaN(_89.value)){_89.value=Number(_8b);}this.set("value",_89.value);}},serialize:function(val,_8d){return this.format(val,_8d);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_8e){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_8f,_90){if(_8f.value==null){var dv=dojo.attr(_90,"value")||_90.value;if(dv!=null&&dv!=""&&_8f.pattern!=null&&_8f.pattern!=""){try{var _91={selector:"date",datePattern:_8f.pattern,fullYear:true};var val=dojo.date.locale.parse(dv,_91);_8f.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_92){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_92);}else{return dojo.date.stamp.toISOString(val,_92);}},isToday:function(_93){if(_93.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_94){var _95=_94.replace("today","");var _96="";var _97=0;var _98=0;var day=0;var _99=new Date();_99.setHours(0);_99.setMinutes(0);_99.setSeconds(0);_99.setMilliseconds(0);if(_95.indexOf("+")>-1){_96="plus";_95=_95.replace("+","#");}if(_95.indexOf("-")>-1){_96="sub";_95=_95.replace("-","#");}if(_95.indexOf("y")>-1){_97=_95.substring(_95.lastIndexOf("#")+1,_95.indexOf("y"));_95=_95.replace("y","#");}if(_95.indexOf("m")>-1){_98=_95.substring(_95.lastIndexOf("#")+1,_95.indexOf("m"));_95=_95.replace("m","#");}if(_95.indexOf("d")>-1){day=_95.substring(_95.lastIndexOf("#")+1,_95.indexOf("d"));}if("plus"==_96){_99=dojo.date.add(_99,"year",+_97);_99=dojo.date.add(_99,"month",+_98);_99=dojo.date.add(_99,"day",+day);}else{_99=dojo.date.add(_99,"year",-_97);_99=dojo.date.add(_99,"month",-_98);_99=dojo.date.add(_99,"day",-day);}return _99;},_setValueAttr:function(_9a,_9b,_9c){if(typeof (_9a)=="string"||_9a instanceof String){var val=null;if(this.pattern==""){_9a=dojo.date.stamp.fromISOString(_9a);}else{var _9d={selector:"date",datePattern:this.pattern,fullYear:true};_9a=dojo.date.locale.parse(_9a,_9d);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}},_handleOnChange:function(_9e,_9f){if(this._lastValueReported==undefined&&(_9f===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_9e;}this._pendingOnChange=this._pendingOnChange||(typeof _9e!=typeof this._lastValueReported)||(this._lastValueReported!=null&&_9e==null)||(this._lastValueReported==null&&_9e!=null);var _a0=this.compare(_9e,this._lastValueReported)!=0;if(_9e==null&&null==this._lastValueReported){_a0=false;}this._pendingOnChange=this._pendingOnChange||_a0;if((this.intermediateChanges||_9f||_9f===undefined)&&this._pendingOnChange){this._lastValueReported=_9e;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_9e);}),0);}}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId","BTT_TIMEZONE":"dse_timezone","BTT_AJAXINPUTMAP":"dse_ajaxInputMapping","BTT_AJAXOUTPUTMAP":"dse_ajaxOutputMapping","BTT_SUBMITFORMID":"dse_submitFormId"},xhrPost:function(_a1,_a2){_a1.postData=dojo.toJson(_a2);if(typeof _a1.url=="undefined"){_a1.url=this.ajaxOperationUrl;}if(typeof _a1.handleAs=="undefined"){_a1.handleAs="text";}if(typeof _a1.success=="undefined"){_a1.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_a1.load=_a1.success;delete _a1.success;}if(typeof _a1.error=="undefined"){_a1.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_a1);},getTimzone:function(){var d=new Date();return (-d.getTimezoneOffset()/60).toString();},prepareBTTParams:function(_a3){var obj={};if(_a3!=undefined){if(_a3[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_a3[this.constants.BTT_ERRORPAGE];}if(_a3[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_a3[this.constants.BTT_OPERATIONNAME];}if(_a3[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_a3[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_a3[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_a3[this.constants.BTT_PROCESSORID];}if(_a3[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_a3[this.constants.BTT_SESSIONID];}if(_a3[this.constants.BTT_TIMEZONE]){obj[this.constants.BTT_TIMEZONE]=_a3[this.constants.BTT_TIMEZONE];}else{obj[this.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}if(_a3[this.constants.BTT_AJAXINPUTMAP]){obj[this.constants.BTT_AJAXINPUTMAP]=_a3[this.constants.BTT_AJAXINPUTMAP];}if(_a3[this.constants.BTT_AJAXOUTPUTMAP]){obj[this.constants.BTT_AJAXOUTPUTMAP]=_a3[this.constants.BTT_AJAXOUTPUTMAP];}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_a4,_a5,_a6,_a7,_a8){var _a9=this.get("value");var _aa={};if(this.bttParams){_aa=dojo.fromJson(this.bttParams);}_aa[AjaxUtil.constants.BTT_OPERATIONNAME]=_a4;_aa=AjaxUtil.prepareBTTParams(_aa);if(_a7===true||_a7==="true"){ScreenCover.getInstance().show();}AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_a5,_a8),error:dojo.hitch(this,"_handleOperationError",_a5),"timeout":_a6},dojo.mixin(_a9,_aa));},callAsyncOpWithMapping:function(_ab,_ac,_ad,_ae,_af,_b0,_b1){var _b2=this.get("value");var _b3={};if(this.bttParams){_b3=dojo.fromJson(this.bttParams);}_b3[AjaxUtil.constants.BTT_OPERATIONNAME]=_ab;_b3[AjaxUtil.constants.BTT_AJAXINPUTMAP]=_ae;_b3[AjaxUtil.constants.BTT_AJAXOUTPUTMAP]=_af;_b3=AjaxUtil.prepareBTTParams(_b3);if(_b0===true||_b0==="true"){ScreenCover.getInstance().show();}AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_ac,_b1),error:dojo.hitch(this,"_handleOperationError",_ac),"timeout":_ad},dojo.mixin(_b2,_b3));},_handleOperationResponse:function(_b4,_b5,_b6){try{var _b7=dojo.fromJson(_b6||null);_b6=_b7;}catch(e){this._handleHTMLResponse(_b6);return;}this.asyncCode=_b4;var _b8=null;var _b9=null;var _ba=null;if(dojo.isArray(_b6)){_b8=_b6[0].data;if(_b6[0].validationError){_b9=_b6[0].singleFieldErrors;_ba=_b6[0].crossFieldErrors;}}else{_b8=_b6;}if(_b8){if(_b5&&dijit.byId(_b5)){dijit.byId(_b5).set("value",_b8);}else{this.set("value",_b8);}}if((_b9&&_b9.length!=0)||(_ba&&_ba.length!=0)){var _bb=this._getWidgetMap();this._handleSingleFieldErrors(_b9,_bb);this._handleCrossFieldErrors(_ba,_bb);}ScreenCover.getInstance().hide();this.onAsyncOK();},_handleHTMLResponse:function(_bc){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_bc})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_bd){if(!_bd.name){return;}var _be=map[_bd.name]||(map[_bd.name]=[]);_be.push(_bd);});return map;},_handleSingleFieldErrors:function(_bf,_c0){if(_bf!=null){for(var i=0;i<_bf.length;i++){if(_c0[_bf[i].id]){var _c1=_c0[_bf[i].id];if(_c1){for(var j=0;j<_c1.length;j++){if(_c1[j].showErrorMessage){_c1[j].showErrorMessage(_bf[i].msg);}}}}}}},_handleCrossFieldErrors:function(_c2,_c3){if(_c2!=null){var _c4=_c3["dse_errorMessages"];if(_c4){for(var j=0;j<_c4.length;j++){_c4[j].displayMessageArray(_c2);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_c5){if(!_c5.name){return;}var _c6=map[_c5.name]||(map[_c5.name]=[]);_c6.push(_c5);});for(var _c7 in map){if(!map.hasOwnProperty(_c7)){continue;}var _c8=map[_c7],_c9=dojo.getObject(_c7,false,obj);if(_c9===undefined){continue;}if(!dojo.isArray(_c9)){_c9=[_c9];}dojo.forEach(_c8,function(w,i){if(w.setStoreData){w.setStoreData(_c9[i]);}});}},_handleOperationError:function(_ca,_cb){if(_cb.dojoType==="timeout"){this.asyncCode=_ca;this.asyncStatus=0;this.asyncErrorMessage=_cb.message;this.onAsyncTimeOut();}else{if(_cb.status!==undefined){this.asyncCode=_ca;this.asyncStatus=_cb.status;this.asyncErrorMessage=_cb.message;this.onAsyncError();}}ScreenCover.getInstance().hide();},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _cc=this;dojo.forEach(this.getDescendants(),function(_cd){var _ce=_cd.name;if((!_ce||(_cd.disabled&&!(_cd instanceof com.ibm.btt.dijit.RichTextEditor))||_cd.isNotSubmitted)&&(!_cd.storeDataName||!_cd.getEditableStroeData||((_cd instanceof com.ibm.btt.dijit.Grid)&&_cd.readOnly))){return;}if(typeof (_cd.ajaxSubmit)!="undefined"&&_cd.ajaxSubmit==false){return;}if(_cd.storeDataName&&_cd.getEditableStroeData&&((_cd instanceof com.ibm.btt.dijit.Grid)&&_cd.editable&&!_cd.readOnly)&&_cd.getEditableStroeData()){dojo.setObject(_cd.storeDataName,_cc._convertValueToString(_cd.getEditableStroeData()),obj);}var _cf=_cd.get("value");if(_cf===undefined){return;}if((_cd instanceof com.ibm.btt.dijit.Grid)&&(_cf==null||_cf==undefined)){return;}if((_cd instanceof com.ibm.btt.dijit.Grid)&&_cf!=null&&_cf!=undefined){if(!_cd.launchNew){_ce="dse_tableSelectedRows";}_cd.launchNew=false;}if(_cf==null){_cf="";}if(typeof _cd.checked!=="undefined"){if(/Radio/.test(_cd.declaredClass)){if(_cf!==false){dojo.setObject(_ce,_cc._convertValueToString(_cf),obj);}else{_cf=dojo.getObject(_ce,false,obj);if(_cf===undefined){dojo.setObject(_ce,null,obj);}}}else{if(_cf!==false){dojo.setObject(_ce,_cc._convertValueToString(_cf),obj);}}}else{if(typeof _cf=="number"&&_cd.serialize){_cf=_cd.serialize(_cf,_cd.constraints);}else{if(_cf!=null&&_cf instanceof Date){if(_cd.serialize){_cf=_cd.serialize(_cf,_cd.constraints);}else{_cf=_cf.getFullYear()+"-"+(_cf.getMonth()+1)+"-"+_cf.getDate();}}}_cf=_cc._convertValueToString(_cf);var _d0=dojo.getObject(_ce,false,obj);if(typeof _d0!="undefined"){if(dojo.isArray(_d0)){_d0.push(_cf);}else{dojo.setObject(_ce,[_d0,_cf],obj);}}else{dojo.setObject(_ce,_cf,obj);}}});for(var p in obj){if(obj.hasOwnProperty(p)){if(p.indexOf("REMOVEBEFORESUBMIT_")>=0){delete obj[p];}}}return obj;},_convertValueToString:function(_d1){if(_d1===null){return null;}if(typeof _d1==="string"){return _d1;}else{if(typeof _d1==="number"||typeof _d1==="boolean"){return String(_d1);}else{if(typeof _d1==="object"){if(dojo.isArray(_d1)){for(var i=0;i<_d1.length;i++){_d1[i]=arguments.callee(_d1[i]);}}else{for(var p in _d1){if(p.indexOf("_")!=0){_d1[p]=arguments.callee(_d1[p]);}}}return _d1;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _d2={};dojo.forEach(this.getDescendants(),function(_d3){if(_d3.storeDataName){var _d4=_d2[_d3.storeDataName]||(_d2[_d3.storeDataName]=[]);_d4.push(_d3);}if(!_d3.name){return;}var _d5=map[_d3.name]||(map[_d3.name]=[]);_d5.push(_d3);});for(var _d6 in _d2){var _d7=_d2[_d6];var _d8=dojo.getObject(_d6,false,obj);if(_d8!==undefined){dojo.forEach(_d7,function(w,i){w.setStoreData(i==0?_d8:dojo.clone(_d8));});}}for(var _d6 in map){if(!map.hasOwnProperty(_d6)){continue;}var _d7=map[_d6],_d9=dojo.getObject(_d6,false,obj);if(_d9===undefined){continue;}if(!dojo.isArray(_d9)){_d9=[_d9];}if(typeof _d7[0].checked!=="undefined"){dojo.forEach(_d7,function(w,i){w.set("value",dojo.indexOf(_d9,w.value)!=-1);});}else{if(_d7[0].multiple){_d7[0].set("value",_d9);}else{dojo.forEach(_d7,function(w,i){w.set("value",_d9[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _da=this;dojo.forEach(this.getDescendants(),function(_db){var _dc=_db.name;if((!_dc||_db.disabled||_db.isNotSubmitted)&&(!_db.storeDataName||!_db.getEditableStroeData||((_db instanceof com.ibm.btt.dijit.Grid)&&_db.readOnly&&!_db.disabled))){return;}if(!_db.isErasable||!_db.isErasable()){if(_db.state&&!(_db.get("state")==""||_db.get("state")=="Normal")){return;}}if(typeof (_db.ajaxSubmit)!="undefined"&&_db.ajaxSubmit==false){return;}if(_db.storeDataName&&_db.getEditableStroeData&&((_db instanceof com.ibm.btt.dijit.Grid)&&!_db.readOnly)){var _dd=_db.getEditableStroeData();if(_dd){dojo.setObject(_db.storeDataName,_da._convertValueToString(_dd),obj);}}var _de=_db.get("value");if(_de===undefined){return;}if((_db instanceof com.ibm.btt.dijit.Grid)&&_de!=null&&_de!=undefined){if(!_db.launchNew){_dc="dse_tableSelectedRows";}_db.launchNew=false;}if(_de==null){_de="";}if(typeof _db.checked!=="undefined"){if(/Radio/.test(_db.declaredClass)){if(_de!==false){dojo.setObject(_dc,_da._convertValueToString(_de),obj);}else{_de=dojo.getObject(_dc,false,obj);if(_de===undefined){dojo.setObject(_dc,null,obj);}}}else{if(_de!==false){dojo.setObject(_dc,_da._convertValueToString(_de),obj);}}}else{if(typeof _de=="number"&&_db.serialize){_de=_db.serialize(_de,_db.constraints);}else{if(_de!=null&&_de instanceof Date){if(_db.serialize){_de=_db.serialize(_de,_db.constraints);}else{_de=_de.getFullYear()+"-"+(_de.getMonth()+1)+"-"+_de.getDate();}}}_de=_da._convertValueToString(_de);if(_db.type!=="hidden"&&((_db.params.value&&_db.params.value==_de)||(!_db.params.value&&""==_de))){return;}var _df=dojo.getObject(_dc,false,obj);if(typeof _df!="undefined"){if(dojo.isArray(_df)){_df.push(_de);}else{dojo.setObject(_dc,[_df,_de],obj);}}else{dojo.setObject(_dc,_de,obj);}}});for(var p in obj){if(obj.hasOwnProperty(p)){if(p.indexOf("REMOVEBEFORESUBMIT_")>=0){delete obj[p];}}}return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,idxPostfix:null,getPW:function(id,_e0){var obj=dijit.byId(id);if(!obj){console.error("xValitate: Failed to get property["+_e0+"] because cannot find the widget[id="+id+"]");return undefined;}return obj.get(_e0);},getW:function(id){return dijit.byId(id);},runWF:function(id,_e1,_e2){var _e3=dijit.byId(id);if(!_e3){console.error("xValitate: Failed to run function["+_e1+"] because cannot find the widget[id="+id+"]");return undefined;}var _e4=[];for(var i=2;i<arguments.length;i++){_e4[i-2]=arguments[i];}var _e5=undefined;try{_e5=_e3[_e1].apply(_e3,_e4);}catch(e){console.error("xValitate: An error occured while running function["+_e1+"]. "+e.toString());}return _e5;},xValidate:function(_e6){if(!_e6||_e6.length==0){return "";}var _e7=null;for(var i=0;i<_e6.length;i++){if(!_e6[i].cond.call(this)){_e7=_e6[i];break;}}return _e7;},_getActiveXValidationsForWidget:function(_e8){return this._getActiveXValidations(this._getXValidationRuleByWidget(_e8),_e8);},_getActiveXValidations:function(_e9,_ea){return dojo.filter(_e9,function(_eb){return dojo.every(_eb.widgets,function(id){return ((id==_ea)||(id!=_ea&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_ec){var _ed=dojo.filter(this.xValidations,function(_ee){return dojo.indexOf(_ee.widgets,_ec)>=0;});return _ed;},showXValidationMsg:function(_ef,_f0){if(_f0){this._hideXHint();this._xHintWidget=_f0;dijit.showTooltip(this.getI18NString(_ef),_f0.domNode);}},_hideXHint:function(){if(this._xHintWidget){dijit.hideTooltip(this._xHintWidget.domNode);this._xHintWidget=null;}},destroy:function(){this._hideXHint();this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,bttAction:"",_events:[],_clickedButton:null,attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events=[];this._events.push(dojo.connect(this.domNode,"onkeydown",this,"_onKey"));if(this._fastTab){this._events.push(dojo.connect(this.domNode,"onkeyup",this,"_focusNext"));}},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_f1){this.xValidations=_f1;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_f2){var _f3=this.xValidate(this._getActiveXValidationsForWidget(_f2.get("id")));var _f4=_f2;if(!_f3){_f3=this.xValidate(this._getActiveXValidations(this.xValidations));_f4=_f3?dijit.byId(_f3.widgets[0]):_f2;}if(_f3){this.showXValidationMsg(_f3.hint,_f4);}var _f5;if(_f5=this.xValidate(this.xValidations)){if(!_f3){this.showXValidationMsg(_f5.hint,dijit.byId(_f5.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_f6){this._xValidateByWidget(_f6);},fireWidgetChangeEvent:function(_f7){this._xValidateByWidget(_f7);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_f8){this.inherited(arguments);var _f9=this._childConnections;var _fa=this;var _fb=this.getDescendants();dojo.forEach(dojo.filter(_fb,function(_fc){return _fc.onChange;}),function(_fd){_f9.push(_fa.connect(_fd,"onChange",dojo.hitch(_fa,"fireWidgetChangeEvent",_fd)));_f9.push(_fa.connect(_fd,"onBlur",dojo.hitch(_fa,"fireWidgetBlurEvent",_fd)));});},_onWidgetValidateStatesChange:function(_fe){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _ff=this._querySubmitButton(e);if(_ff&&_ff.bttParams){this.handleButtonSubmit(_ff);}else{this.parameterHandler(this.bttParams);}if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_100){if(_100.onFormSubmit){_100.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_101){if(_101&&_101.bttParams&&_101.bttParams!=""){this.parameterHandler(_101.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _102=this;var _103=this._childWatches;var _104=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(item){return item.get("type")&&item.get("type").toLowerCase()=="submit";}),function(_105){_102.submitButton.push(_105);_102.submitButtonOS.push(_105.get("disabled"));_103.push(_105.watch("isValid",function(_106,_107,_108){_102.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _109=typeof e=="string"?dojo.fromJson(e):e;_109[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();if(_109["dse_nextEventName"]){var temp={};temp[AjaxUtil.constants.BTT_SUBMITFORMID]=this.get("id");_109=dojo.mixin(temp,_109);}this.destroyHiddenParams();for(var _10a in _109){if(typeof (_10a)!="undefined"){var _10b=_109[_10a];this.hiddenParamHandle[_10a]=dojo.create("input",{type:"hidden",name:_10a,value:_10b});dojo.place(this.hiddenParamHandle[_10a],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _10c in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_10c]);}this.hiddenParamHandle={};},errorPageHandler:function(){var node=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(node,this.containerNode,"last");},_findWidgetByNode:function(_10d){var _10e;for(var node=_10d;node&&node!=this.domNode;node=node.parentNode){var id=node.getAttribute("widgetId");if(id){_10e=dijit.byId(id);break;}}return _10e;},_onKey:function(evt){this._clickedButton=null;if(evt.keyCode!=dojo.keys.ENTER){return evt.keyCode;}var _10f=this._findWidgetByNode(evt.target);if(_10f&&!_10f.isInstanceOf(com.ibm.btt.dijit.Button)&&!_10f.isInstanceOf(com.ibm.btt.dijit.Anchor)&&!_10f.isInstanceOf(com.ibm.btt.dijit.TextArea)){if((evt.ctrlKey||evt.metaKey)&&this.bttAction!="NoAction"){dojo.stopEvent(evt);this.submit();}else{evt.preventDefault();}return false;}return evt.keyCode;},_computeFocusOrder:function(){var WS=[];function _110(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType!=1){continue;}var wid=node.getAttribute("widgetId");if(!wid){_110(node);continue;}var wgt=dijit.byId(wid);if(!wgt){continue;}if(wgt.isInstanceOf(com.ibm.btt.dijit.Group)){_110(wgt.containerNode);continue;}WS.push(wgt);}};_110(this.containerNode);WS=dojo.filter(WS,function(w){return (parseInt(w.tabIndex)>-1||w.tabIndex==""||w.tabIndex==undefined);});WS=WS.sort(function(wa,wb){var ta=parseInt(wa.tabIndex);var tb=parseInt(wb.tabIndex);ta=isNaN(ta)?0:ta;tb=isNaN(tb)?0:tb;return ta-tb;});return dojo.map(WS,function(w){return w.id;});},_fastTab:true,_focusNext:function(evt){if(!this._fastTab||evt.keyCode!=dojo.keys.ENTER){return evt.keyCode;}if(!this._focusWidgets){this._focusWidgets=this._computeFocusOrder();}var cw=this._findWidgetByNode(evt.target);if(cw&&cw.get("state")==""&&cw.grid==undefined&&cw.isInstanceOf(com.ibm.btt.dijit.ValidationTextBox)&&!cw.isInstanceOf(com.ibm.btt.dijit.TextArea)){var p=-1;for(var i=0;i<this._focusWidgets.length;i++){if(p<0){if(this._focusWidgets[i]==cw.id){p=i;continue;}}else{var w=dijit.byId(this._focusWidgets[i]);if(w&&w.isFocusable()){w.focus();break;}}}}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}this.destroyHiddenParams();while(this._events&&this._events.length>0){try{dojo.disconnect(this._events.pop());}catch(e){}}this._events=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<img />",location:"/",alt:"",action:"#",target:"_parent",bttParams:"",tabIndex:0,disabled:false,width:"",height:"",url:"#",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},alt:{node:"domNode",type:"attribute"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);var ti=parseInt(this.tabIndex);if(isNaN(ti)){this.tabIndex=0;}else{this.tabIndex=ti;}this.disabled=(this.disabled===true||this.disabled==="true");if(this.disabled){this.domNode.tabIndex=-1;}else{this.domNode.tabIndex=this.tabIndex;}},_parameterHandler:function(e){var _111="";var _112=dojo.fromJson(e);for(var _113 in _112){if(typeof (_113)!="undefined"){var _114=_112[_113];if(_111==""){_111+=_113+"="+_114;}else{_111+="&"+_113+"="+_114;}}}return _111;},_setActionAttr:function(_115){this.action=_115;var _116="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_116=this.action;if(this.bttParams!=""){if(_116.indexOf("?")==-1){_116+="?";}if(this.bttParams!=""){var _117=this._parameterHandler(this.bttParams);if(_116.substring(_116.length-1)=="?"){_116+=_117;}else{_116+="&"+_117;}}}}else{_116="javascript:void(0)";}this.connect(this.domNode,"ondijitclick",this._onClick);this.url=_116;},_setDisabledAttr:function(_118){this.disabled=(_118===true||_118==="true");if(this.disabled){this.domNode.tabIndex=-1;}else{this.domNode.tabIndex=this.tabIndex;}},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_setLocationAttr:function(_119){this.location=_119;if(typeof (_119)=="string"&&_119!=""){this.domNode.src=_119;}},_setAltAttr:function(_11a){this.alt=_11a;this.domNode.alt=StringUtil.removeWarp(this.getI18NString(_11a));},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}else{if(this.url!=="#"){window.open(this.url,this.target);}}},onClick:function(e){},_setWidthAttr:function(_11b){if(_11b!=""){this.width=_11b;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_11c){if(_11c!=""){this.height=_11c;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},"for":{node:"domNode"}}),_setTextAttr:function(_11d){this.text=_11d;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_11d));},_setTextWrapAttr:function(_11e){this.textWrap=_11e;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_11f){this.set("text",_11f);},_getValueArrt:function(name){return this.get("text");},_setForAttr:function(_120){this.domNode.htmlFor=_120;},_setWidthAttr:function(_121){if(this.width!=""){this.width=_121;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_122){if(this.height!=""){this.height=_122;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}if(this.visibility&&this.visibility!=""){this.set("visibility",this.visibility);}},_setIsCheckedAttr:function(_123){this.set("checked",_123);},_setCheckedAttr:function(_124){if(_124==false||_124=="false"||_124==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_125){this.text=_125;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_125));},_setStyleAttr:function(_126){dojo.attr(this.labelNode,"style",_126);},_setClassAttr:function(_127){dojo.attr(this.labelNode,"class",_127);},_setHintAttr:function(_128){this.hint=_128;var _129=StringUtil.removeWarp(this.getI18NString(_128));var node=this.textbox||this.focusNode||this.domNode;node.title=_129;this.labelNode.title=_129;},_setVisibilityAttr:function(_12a){var d="";var v="inherit";switch(_12a){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_12a;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);dojo.style(this.labelNode,"display",d);dojo.style(this.labelNode,"visibility",v);},_setReadOnlyAttr:function(_12b){this.inherited(arguments);if(_12b==="true"||_12b===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_12c){if(_12c.name==this.name&&_12c.form==this.focusNode.form){var _12d=dijit.getEnclosingWidget(_12c);if(_12d&&"checked" in _12d){_12d.set("checked",_12d.checked);}}}));}},_setTextWrapAttr:function(_12e){this.textWrap=_12e;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_12f){if(this.width!=""){this.width=_12f;var _130=_12f.replace(new RegExp("px","gm"),"");try{_130=Number(_130);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_12f+" to number.");return;}var box=dojo.marginBox(this.domNode);var _131=_130-box.w;if(_131<0){_131=0;}dojo.style(this.labelNode,"width",_131+"px");}},_setHeightAttr:function(_132){if(this.height!=""){this.height=_132;var _133=_132.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_133+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_134){this.set("disabled",_134);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _135=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_135==""||_135==null||_135==undefined){this.name=null;}var _136=this.value;var _137=this;setTimeout(function(){_137._setValueAttr(_136);},0);},_setWidthAttr:function(_138){if(_138!=""){this.width=_138;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_139){this.hint=_139;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_139));}},_getValueAttr:function(){var _13a=this.inherited(arguments);if(dojo.isFF&&(_13a=="<br _moz_editor_bogus_node=\"TRUE\" />"||_13a=="<br />")){return "";}else{return _13a;}},reset:function(e){this.set("value",this.resetContent);},onFormSubmit:function(){if(this.name){var _13b=this.get("value");this._tmpInput=dojo.create("input",{"type":"hidden","name":this.name,"value":_13b},this.domNode,"after");}},destroy:function(){if(this.resetContent){delete this.resetContent;}if(this._tmpInput){dojo.destroy(this._tmpInput);delete this._tmpInput;}this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",_handlers:[],typeAhead:false,constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;this._handlers=[];},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);if(com.ibm.btt.util.GlobalConfigurationUtil&&com.ibm.btt.util.GlobalConfigurationUtil.getValue("selectList.clickModeForDropDown")=="OnWholeWidget"){this.typeAhead=false;}if(this.typeAhead){}else{this._handlers.push(dojo.connect(this.focusNode,"onclick",dojo.hitch(this,function(){if(this._opened){this.closeDropDown();}else{this.loadDropDown();}})));}if((this.typeAhead!=undefined&&this.typeAhead==false)||(this.readOnly!=undefined&&this.readOnly==true)){this.textbox.readOnly=true;}},postMixInProperties:function(){var root=this.srcNodeRef;var _13c={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _13d=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_13d.getI18NString(dojo.trim(node.innerHTML));var _13e=dojo.attr(node,"value");if(_13e==""){_13e="#";}item[this.storeDataFormat.itemValue]=_13e;_13c.items.push(item);}));if(_13c.items.length==0&&this.storeData){if(typeof this.storeData=="string"){this.storeData=dojo.fromJson(this.storeData);}_13c=this._formatStoreData(this.storeData);}_13c=this.prepareStoreData(_13c);this.item=null;if(this.params.value){for(var i=0;i<_13c.items.length;i++){if(this.params.value==_13c.items[i].value){this.item=_13c.items[i];}}}if(_13c.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_13c.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_13c.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_13c});this.inherited(arguments);},_setStoreDataAttr:function(_13f){if(typeof _13f=="string"){_13f=dojo.fromJson(_13f);}this.storeData=_13f;},setStoreData:function(data){this._onChangeActive=false;var _140=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_140;this.searchAttr=_140.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _141={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_141.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_141.items.push(item);}}}}return _141;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _142={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_142);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setWidthAttr:function(_143){if(_143!=""){this.width=_143;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_144){var _145=false;this.store.fetchItemByIdentity({identity:_144,onItem:function(item){}});var _146=this.store._getItemsArray();if(_146){dojo.some(_146,function(item){if(item.value&&item.value[0]!==undefined&&item.value[0]!==null&&item.value[0]!==""&&item.value[0]==_144){_145=true;return false;}});}if(!_145){var _146=this.store._getItemsArray();if(_146.length==0){_144="";}else{var id=this.store.getIdentity(_146[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_145=true;_144=item.value&&item.value[0]!==undefined&&item.value[0]!==null&&item.value[0]!==""?item.value[0]:null;this.set("item",item);}})});}this.value=_144;this._lastValueReported=_144;}this.inherited(arguments);},_getValueAttr:function(){var _147=this.inherited(arguments);if(_147==null||_147=="#"){return "";}else{return _147;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");},destroy:function(){while(this._handlers.length>0){try{dojo.disconnect(this._handlers.pop());}catch(e){}}this._handlers=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.set("value",this.get("value"));var gcu=com.ibm.btt.util.GlobalConfigurationUtil;var _148=gcu&&(gcu.getValue("com.ibm.btt.stringtextbox.maxlength")=="auto");var max=65535;var mlc=parseInt(this.maximumLength)||max;var mli=parseInt(this.maxLength)||max;var ml=mlc>mli?mli:mlc;if(ml>0&&ml<max){this.maximumLength=ml;if(_148){this.maxLength=ml;dojo.attr(this.focusNode,"maxLength",ml);}}},validator:function(_149,_14a){var _14b=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(!isNaN(this.minimumLength)&&this.attr("value").length<this.minimumLength){this.invalidMessage=_14b.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(!isNaN(this.maximumLength)&&this.attr("value").length>this.maximumLength){this.invalidMessage=_14b.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_14c){if(_14c!=null&&_14c!=undefined){_14c=this.getI18NString(_14c);_14c=_14c.replace(/&amp;/g,"&").replace(/&lt;/g,"<");}else{_14c="";}this.value=_14c;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.StringTextBox,dijit.form.SimpleTextarea],{width:"",height:"",regExp:"[\\s\\S]*",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{width:{node:"domNode"},height:{node:"domNode"}}),_isValidSubset:function(){return false;},_setWidthAttr:function(_14d){if(_14d!=""){this.width=_14d;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_14e){if(_14e!=""){this.height=_14e;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setIsMandatoryAttr:function(_14f){this.isMandatory=_14f;this.required=_14f;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _150=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_150.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _151=this.value.split(".");var _152=_151[0];for(var i=1;i<_151.length;i++){var n=this._itemNodesMap[_152];if(n){this._expandNode(n[0],false);}_152+="."+_151[i];}var _153=this._itemNodesMap[this.value];this._expandNode(_153[0],false);_153[0].setSelected(true);}},_parseStoreData:function(_154,data){this.firstSelectedItem=null;var _155=[];for(var name in data){var item={};if(_154!=null&&typeof (_154.id)!="undefined"){item.id=_154.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_155.push(item);}return _155;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _156=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_156};var _157=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_157});}else{var tree=this;var _157=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_158,_159){for(var i=_158.length-1;i>=0;i--){_157.deleteItem(_158[i]);}}});_157.save();(function(_15a,_15b){for(var i=0;i<_15a.length;i++){var _15c;if(_15a[i].children&&_15a[i].children.length){_15c=_15a[i].children;_15a[i].children=[];}else{_15c=null;}if(_15b){var _15d=_157.newItem(_15a[i],{parent:_15b,attribute:"children"});}else{var _15d=_157.newItem(_15a[i]);}if(_15c){arguments.callee(_15c,_15d);}}})(_156);_157.save();}},setStoreData:function(data){var _15e={};_15e[this.storeDataName]=data;this.storeData=_15e;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _15f={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_15f[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_15f);}this.set("paths",[]);},destroy:function(){while(this.treeEvents&&this.treeEvents.length>0){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=undefined;this.inherited(arguments);},_setValueAttr:function(_160){dojo.forEach(this.get("selectedNodes"),function(_161){_161.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _162=this._itemNodesMap[_160];this.value=_160;this.formNode.value=_160;if(_162){this.set("selectedNodes",_162);this._selectedItem=_162[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_163){this.hint=_163;var _164=StringUtil.removeWarp(this.getI18NString(_163));this.domNode.title=_164;if(this.rootNode){this._setHintForAllChild(this.rootNode,_164);}},_setHintForAllChild:function(root,hint){var _165=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_166,idx){_165._setHintForAllChild(_166,hint);});}},_setWidthAttr:function(_167){if(_167!=""){this.width=_167;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_168){if(_168!=""){this.height=_168;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_169){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{widgetClass:null,rowCSS:null,defaultValue:" ",constructor:function(c){if(!this.widget&&this.widgetClass){this.widget=this.createWidget(dojo.create("div"),"");}},createWidget:function(_16a,_16b,_16c){var _16d=this.inherited(arguments);if(!this.grid.cwsl){this.grid.cwsl=[];}this.grid.cwsl.push(_16d);var _16e=this;_16d.watch("state",function(attr,_16f,_170){_16e.grid._set("state",_16e.grid._getState());});return _16d;},formatter:function(_171,_172,cell){if(this.hidden){return "";}var ccss=cell.grid.computeCCSS(_172,cell,_172%2<1?"E":"O");for(var ci in ccss){this.customClasses.push(ccss[ci]);}try{return this.bttformatter(_171,_172,cell);}catch(e){console.error("failed to invoke bttformatter method to format cell content in grid.");return "";}},bttformatter:function(_173,_174,cell){return _173;},setValue:function(_175,_176){if(this.widget&&this.widget.set){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget._lastValueReported=_176;self.widget.set("value",_176===null?"":_176);});}else{this.widget._lastValueReported=_176;this.widget.set("value",_176,_176);}}else{this.inherited(arguments);}},getWidget:function(){return this.widget;},handleNewLine:function(data){if(typeof (data)=="string"){data=data.split("\\n").join("\n");data=data.split("\\r").join("\r");data=data.split("\n").join("<br/>");data=data.split("\r").join("<br/>");}return data;},sizeWidget:function(_177,_178,_179){var p=this.getNode(_179),box=dojo.contentBox(p);var w=this.width.replace(/px/g,"").replace(/\%/g,"");box.w=box.w>w?w:box.w;dojo.marginBox(this.widget.domNode,{w:box.w});}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{bttformatter:function(_17a){return this.handleNewLine(I18nUtil.getI18nString(_17a));}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,bttformatter:function(_17b){if(_17b==undefined||_17b==null||_17b==""||_17b=="null"){return "";}var date;if(typeof _17b=="string"){if(this.widget&&this.widget.pattern){date=this.widget.parse(_17b,this.widget.constraints);}else{var _17c=this.widget.constraints;_17c["datePattern"]="yyyy-MM-dd";date=this.widget.parse(_17b,_17c);}}else{date=_17b;}return this.widget.format(date,this.widget.constraints);},getWidgetProps:function(_17d){return dojo.mixin(this.inherited(arguments),{value:new Date(_17d)});},setValue:function(_17e,_17f){if(_17f==undefined||_17f==null||_17f==""||_17f=="null"){this.widget._lastValueReported=null;this.widget.set("value",null);return;}if(this.widget){if(typeof _17f=="string"){if(this.widget&&this.widget.pattern){var date=this.widget.parse(_17f,this.widget.constraints);this.widget._lastValueReported=date;this.widget.set("value",date);}else{this.widget._lastValueReported=new Date(_17f);this.widget.set("value",new Date(_17f));}}else{this.widget._lastValueReported=_17f;this.widget.set("value",_17f);}}else{this.inherited(arguments);}},getValue:function(_180){if(this.widget.isValid()){var _181=this.widget.get("value");if(_181){return _181;}else{return "";}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,bttformatter:function(_182){if(_182===null){return "";}if(typeof _182=="string"){_182=Number(_182);}this.widget._lastValueReported=_182;this.widget.set("value",_182);return dojo.number.format(_182,this.widget.constraints);},getWidgetProps:function(_183){return dojo.mixin(this.inherited(arguments),{value:new Number(_183)});},getValue:function(_184){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},setValue:function(_185,_186){if(_186&&typeof _186=="string"){inData=Number(_186);}this.inherited(arguments);}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,bttformatter:function(_187){if(_187===null||_187===""){return "";}this.widget.set("value",_187);if(typeof _187=="string"){var _188=this.widget.parse(_187,this.widget.constraints);if(isNaN(_188)){_188=Number(_187);}if(isNaN(_188)){return _187;}else{return this.widget.format(_188,this.widget.constraints);}}else{return this.widget.format(_187,this.widget.constraints);}},getWidgetProps:function(_189){return dojo.mixin(this.inherited(arguments),{value:new Number(_189)});},getValue:function(_18a){if(this.widget.isValid()){var _18b=this.widget.get("value");if(isNaN(_18b)){return "";}else{return _18b;}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.get("value");},setValue:function(_18c,_18d){if(this.widget){if((_18d+"")==(this.widget.checkedValue+"")){this.widget._lastValueReported=true;this.widget.set("isChecked",true);}else{this.widget._lastValueReported=false;this.widget.set("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_18e,_18f,_190){return;},formatEditing:function(_191,_192){if(!this.grid.colWidget){this.grid.colWidget=[];}var col=this.index;if(!this.grid.colWidget[col]){this.grid.colWidget[col]=this.widget;}if(this.alwaysEditing){return this._alwaysEditFormatNode(_191,_192);}else{return this.inherited(arguments);}},_alwaysEditFormat:function(_193,_194){this.whenIdle(this,"_alwaysEditFormatNode",_193,_194);return "<div></div>";},_alwaysEditFormatNode:function(_195,_196){if(!this.grid.aew){this.grid.aew=[];}var col=this.index;var row=_196;if(!this.grid.aew[col]){this.grid.aew[col]=[];}var w=null;if(!this.grid.aew[col][row]){w=this.createWidget(this.getEditNode(_196),_195,_196);this.grid.aew[col][row]=w;}else{w=this.grid.aew[col][row];}w.set("checked",_195);w["col"]=col;w["row"]=row;w["field"]=this.field;var html=w.domNode.outerHTML;this._updateHeaderCheckBox(col);if(w.isChecked){}else{var temp=html.split("dijitCheckBoxChecked").join("");html=temp.split("dijitChecked").join("");temp=undefined;}return html;},_updateHeaderCheckBox:function(col){if(this.grid.aew&&this.grid.aew[col]){var _197=dojo.filter(this.grid.aew[col],function(box){return box.isChecked==false||box.isChecked=="false";});if(this.grid.aewh&&this.grid.aewh[col]){var hw=this.grid.aewh[col];hw["preserve"]=true;hw.set("checked",_197.length==0);}}},doclick:function(e){if(e.target.tagName=="INPUT"){if(this.alwaysEditing){this.applyStaticValue(e.rowIndex);dojo.stopEvent(e);}}},applyStaticValue:function(_198){var e=this.grid.edit;var col=this.index;var row=_198;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;if(w.isChecked){w.set("checked",false);var _199=dojo.byId(w.id);_199.checked=false;var _19a=_199.parentNode;dojo.removeClass(_19a,"dijitCheckBoxChecked");dojo.removeClass(_19a,"dijitChecked");}else{w.set("checked",true);}this._updateHeaderCheckBox(col);var v=w.get("value");e.applyCellEdit(v,this,_198);}}});dojo.declare("com.ibm.btt.dijit.GridRadioButton",[com.ibm.btt.dijit.RadioButton],{_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}}});dojo.declare("dojox.btt.grid.cells.Radio",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.GridRadioButton,getValue:function(_19b){var col=this.index;var row=_19b;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;}var v=this.widget.isChecked?this.widget.checkedValue:this.widget.unCheckedValue;this._uncheckOthers(col,_19b);return v;},setValue:function(_19c,_19d){if(_19d&&this.widget){if(_19d.toString()==this.widget.checkedValue.toString()){this.widget._lastValueReported=true;this.widget.set("checked",true);this._uncheckOthers(rol,_19c);}else{this.widget._lastValueReported=false;this.widget.set("checked",false);}}else{this.inherited(arguments);}},_uncheckOthers:function(col,row){var _19e=this.field;var rows=this.grid.get("rowCount");for(var i=0;i<rows;i++){if(i!=row){var item=this.grid.getItem(i);if(item){this.grid.store.setValue(item,_19e,this.widget.unCheckedValue);if(this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][i]){var w=this.grid.aew[col][i];var _19f=dojo.byId(w.id);if(_19f){var _1a0=_19f.parentNode;if(_1a0){dojo.removeClass(_1a0,"dijitRadioChecked");dojo.removeClass(_1a0,"dijitChecked");}}}}}}},sizeWidget:function(_1a1,_1a2,_1a3){return;},bttformatter:function(_1a4){if(typeof _1a4=="string"){return _1a4;}else{if(typeof _1a4=="boolean"){return _1a4.toString();}else{this.inherited(arguments);}}},formatEditing:function(_1a5,_1a6){if(!this.grid.colWidget){this.grid.colWidget=[];}var col=this.index;if(!this.grid.colWidget[col]){this.grid.colWidget[col]=this.widget;}if(this.alwaysEditing){return this._alwaysEditFormatNode(_1a5,_1a6);}else{return this.inherited(arguments);}},_alwaysEditFormatNode:function(_1a7,_1a8){if(!this.grid.aew){this.grid.aew=[];}var col=this.index;var row=_1a8;if(!this.grid.aew[col]){this.grid.aew[col]=[];}var w=null;if(!this.grid.aew[col][row]){if(!this.widgetProps){this.widgetProps={};}this.widgetProps["name"]="REMOVEBEFORESUBMIT_"+this.grid.id+"_radio_"+col;w=this.createWidget(this.getEditNode(_1a8),_1a7,_1a8);this.grid.aew[col][row]=w;}else{w=this.grid.aew[col][row];}if(String(_1a7)==String(w.checkedValue)){if(!this.grid.currentCheckedRadio){this.grid.currentCheckedRadio=[];}if(this.grid.currentCheckedRadio[col]==undefined){this.grid.currentCheckedRadio[col]=w.id;w.set("checked",true);}else{w.set("checked",true);this.grid.currentCheckedRadio[col]==w.id;}this._uncheckOthers(col,row);}else{w.set("checked",false);}var html=w.domNode.outerHTML;if(w.isChecked){}else{var temp=html.split("dijitRadioChecked").join("");html=temp.split("dijitChecked").join("");temp=undefined;}return html;},doclick:function(e){if(e.target.tagName=="INPUT"){if(this.alwaysEditing){this.applyStaticValue(e.rowIndex);}}},applyStaticValue:function(_1a9){var e=this.grid.edit;var col=this.index;var row=_1a9;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;w.set("checked",true);var v=w.get("value");e.applyCellEdit(v,this,_1a9);this._uncheckOthers(col,row);if(!this.grid.currentCheckedRadio){this.grid.currentCheckedRadio=[];}if(this.grid.currentCheckedRadio[col]!=undefined){if(w.id!=this.grid.currentCheckedRadio[col]){var _1aa=dojo.byId(this.grid.currentCheckedRadio[col]);var _1ab=_1aa.parentNode;dojo.removeClass(_1ab,"dijitRadioChecked");dojo.removeClass(_1ab,"dijitChecked");}}var _1aa=dojo.byId(w.id);var _1ab=_1aa.parentNode;dojo.addClass(_1ab,"dijitRadioChecked");dojo.addClass(_1ab,"dijitChecked");this.grid.currentCheckedRadio[col]=w.id;}}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_1ac){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},bttformatter:function(_1ad){return this.handleNewLine(I18nUtil.getI18nString(_1ad));},formatEditing:function(_1ae,_1af){_1ae=_1ae.replace(/\r/g,"\\r");_1ae=_1ae.replace(/\n/g,"\\n");return this.inherited(arguments);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");},bttformatter:function(_1b0){return this.handleNewLine(_1b0);}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_1b1,_1b2){var _1b3=this.widget.store;var _1b4=_1b3._itemsByIdentity[_1b1];var v1=_1b4?_1b4.label[0]:_1b1;var _1b5=_1b3._itemsByIdentity[_1b2];var v2=_1b5?_1b5.label[0]:_1b2;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},bttformatter:function(_1b6){if((_1b6===null)||(_1b6==="")){return "";}var _1b7=this.widget.store;var item=_1b7._itemsByIdentity[_1b6];if(item){return this.handleNewLine(item.label[0]);}else{return this.handleNewLine(_1b6);}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,bttformatter:function(_1b8){if(_1b8){var html="<img src=\""+_1b8+"\"";}else{var html="<img ";}if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _1b9=this;if(prop.storeData){_1b9.storeData=prop.storeData;}else{var _1ba=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_1ba){var _1bb={url:_1ba,handleAs:"json",sync:true,load:function(arg){_1b9.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_1ba);}};dojo.xhrGet(_1bb);}else{_1b9.storeData={};}}if(_1b9.storeData){var _1bc={};for(var key in _1b9.storeData){if(_1b9.storeData[key]!=null&&typeof (_1b9.storeData[key])!="undefined"){_1bc[_1b9.storeData[key]]=key;}}_1b9.storeData=_1bc;}},bttformatter:function(_1bd){if(this.storeData&&this.storeData[_1bd]){return "<label>"+this.handleNewLine(I18nUtil.getI18nString(this.storeData[_1bd]))+"</label>";}else{if(_1bd&&_1bd===null&&_1bd==="null"){return "";}else{return "<label>"+this.handleNewLine(_1bd)+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{_onClick:function(e){if(!e.target.tagName||(!this._tagartTagName[e.target.tagName.toUpperCase()])){return;}e.defaultPrevented=true;dojo.stopEvent(e);var rowd=this.grid.getItem(e.rowIndex);var _1be=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1be=true;}}if(!_1be){return;}if(this.onClick(e)===false){return;}if(this.grid.selectionMode==="single"||this.grid.selectionMode==="extended"){if(!this.grid.selection.isSelected(e.rowIndex)){this.grid.selection.setSelected(e.rowIndex,true);}}var _1bf={};for(var key in rowd){if(key.charAt(0)!="_"&&rowd[key]){_1bf[key]=rowd[key][0];}}if(this.widgetProps&&this.widgetProps.dataNameForLink){var url=this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink);if(url&&url!=""){return this._openLink(url,_1bf);}}if(this.widgetProps&&this.widgetProps.href){var url=this.widgetProps.href;if(url&&url!=""){return this._openLink(url,_1bf);}}if(this.widgetProps&&this.widgetProps.flowEvent&&this.widgetProps.flowEvent!=""){var form=this.grid._getParentForm();if(!form){console.error("can't find form to submit");return;}var pd=dojo.fromJson(this.grid.bttParam4Link);pd["dse_nextEventName"]=this.widgetProps.flowEvent;if(this.widgetProps.dataNameForRow){pd[this.widgetProps.dataNameForRow]=e.rowIndex;}if(this.widgetProps.dataNameForColumn){pd[this.widgetProps.dataNameForColumn]=this.field;}form.bttParams=dojo.toJson(pd);form.submit();return;}console.error("find nothing, something is wrong!");},_openLink:function(url,_1c0){var _1c1=[];for(var key in _1c0){if(_1c0[key]!=null){_1c1.push(key);_1c1.push("=");_1c1.push(_1c0[key]);_1c1.push("&");}}if(this.widgetProps.dataNameForRow){_1c1.push(this.widgetProps.dataNameForRow+"="+this.index);_1c1.push("&");}if(this.widgetProps.dataNameForColumn){_1c1.push(this.widgetProps.dataNameForColumn+"="+this.field);_1c1.push("&");}_1c1.pop();if(url.toString().indexOf("?")>0){url+="&"+_1c1.join("");}else{url+="?"+_1c1.join("");}var _1c2;if(this.widgetProps&&this.widgetProps.target){_1c2=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){_1c2="_blank";}}}if(_1c2){window.open(url,_1c2);}else{window.open(url,"_self");}},onClick:function(e){return true;}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:{"A":true,"IMG":true},bttformatter:function(_1c3,_1c4){var rowd=this.grid.getItem(_1c4);if(rowd){}else{return "";}var atag={"tn":"a","attr":{},ih:""};atag.ih="";var text;if(this.field&&_1c3){text=_1c3;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}atag.ih=text?I18nUtil.getI18nString(text):atag.ih;if(this.widgetProps&&this.widgetProps.target){atag.attr.target=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){atag.attr.target="_blank";}}}if(this.widgetProps){var _1c5;if(this.widgetProps.dataNameForTooltip){_1c5=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_1c5){_1c5=this.widgetProps.tooltip;}if(_1c5){_1c5=I18nUtil.getI18nString(_1c5);atag.attr.title=_1c5;}}atag.attr.href="#";var _1c6=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1c6=true;}}if(this.widgetProps.renderMode=="image"){var _1c7=_1c5?"title=\""+_1c5+"\"":"";if(_1c3){var _1c8=_1c3?"src=\""+_1c3+"\"":"";var _1c9=this.id?" cellWidgetId"+"=\""+this.id+"\" ":"";return "<img "+_1c8+(_1c6?"":" style = \"filter:Alpha(opacity=10);-moz-opacity:.1;opacity:0.1;\" ")+_1c7+_1c9+" />";}else{return "";}}else{if(_1c6){atag.tn="a";}else{atag.tn="span";}var os="<"+atag.tn+" ";for(var key in atag.attr){os+=key+"=\""+atag.attr[key]+"\" ";}if(this.id){os+="cellWidgetId"+"=\""+this.id+"\"";}os+=">"+this.handleNewLine(atag.ih)+"</"+atag.tn+">";return os;}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",_tagartTagName:{"SPAN":true},bttformatter:function(_1ca,_1cb){var rowd=this.grid.getItem(_1cb);if(rowd){}else{return "";}var text;if(this.field&&_1ca){text=_1ca;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}text=text?I18nUtil.getI18nString(text):"";var _1cc;if(this.widgetProps){var _1cc;if(this.widgetProps.dataNameForTooltip){_1cc=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_1cc){_1cc=this.widgetProps.tooltip;}if(_1cc){_1cc=I18nUtil.getI18nString(_1cc);}}var _1cd=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1cd=true;}}var _1ce=_1cc?"title=\""+_1cc+"\"":"";var _1cf=_1cd?"":" dijitButtonDisabled dijitDisabled ";var _1d0=this.id?" cellWidgetId"+"=\""+this.id+"\" ":"";if(text){return "<span tabIndex=\"0\" class=\"dijit dijitReset dijitInline dijitButton"+_1cf+"\""+_1ce+_1d0+" ><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents focusNode\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+this.handleNewLine(text)+"</span></div></span></span>";}else{return "";}}});dojo.declare("dojox.btt.grid.cells.Content",[dojox.btt.grid.cells.BaseCellWidget],{bttformatter:function(_1d1,idx){if(this.widgetProps){if(this.widgetProps.formatterStr){if(this._getBTTParamsStrForFmt==null){this._getBTTParamsStrForFmt=dojo.hitch(this,this._getBTTParamsStr);}if(this._addEventForFmt==null){this._addEventForFmt=dojo.hitch(this,function(_1d2,wId,_1d3,func){var item=this.grid.getItem(_1d2);var _1d4=this.grid.store.getIdentity(item);var _1d5=_1d4!=null?_1d4:_1d2;this.grid.eventArray[_1d5]=this.grid.eventArray[_1d5]||{};this.grid.eventArray[_1d5][wId]=this.grid.eventArray[_1d5][wId]||{};this.grid.eventArray[_1d5][wId][_1d3]=func;});}if(this._setStateForFmt==null){this._setStateForFmt=dojo.hitch(this,function(_1d6,wId,key,_1d7){var item=this.grid.getItem(_1d6);var _1d8=this.grid.store.getIdentity(item);var _1d9=_1d8!=null?_1d8:_1d6;this.grid.stateArray[_1d9]=this.grid.stateArray[_1d9]||{};this.grid.stateArray[_1d9][wId]=this.grid.stateArray[_1d9][wId]||{};this.grid.stateArray[_1d9][wId]["state"]=this.grid.stateArray[_1d9][wId]["state"]||{};this.grid.stateArray[_1d9][wId]["state"][key]=_1d7;});}if(this._addStateInitForFmt==null){this._addStateInitForFmt=dojo.hitch(this,function(_1da,wId,func){var item=this.grid.getItem(_1da);var _1db=this.grid.store.getIdentity(item);var _1dc=_1db!=null?_1db:_1da;this.grid.stateArray[_1dc]=this.grid.stateArray[_1dc]||{};this.grid.stateArray[_1dc][wId]=this.grid.stateArray[_1dc][wId]||{};this.grid.stateArray[_1dc][wId]["state"]=this.grid.stateArray[_1dc][wId]["state"]||{};this.grid.stateArray[_1dc][wId]["stateInit"]=func;});}eval("var getBTTParamsStr = this._getBTTParamsStrForFmt;"+"var addEvent = this._addEventForFmt;"+"var setState = this._setStateForFmt;"+"var addStateInit = this._addStateInitForFmt;"+"var f = "+this.widgetProps.formatterStr);var v;try{v=f(_1d1,idx,this.grid);}catch(e){console.error("Exception caught when running formatter, please check your formatter content of column \""+this.id+"\" in table \""+this.grid.id+"\"."+" Detail message:\n"+e);v="";}delete getBTTParamsStr;delete addEvent;delete setState;delete addStateInit;delete f;return v;}else{if(this.widgetProps.content){if(typeof this.widgetProps.content=="object"){var _1dd="";for(var j=0;j<this.widgetProps.content.length;j++){var _1de=this.widgetProps.content[j];var _1df="<div ";for(var p in _1de){_1df+=p+"=\""+_1de[p]+"\" ";}_1df+="></div>";_1dd+=_1df;}return _1dd;}else{if(_1d1){return this.widgetProps.content.replace("{value}",I18nUtil.getI18nString(_1d1));}else{return this.widgetProps.content;}}}}}return "";},_getBTTParams:function(_1e0){if(_1e0.type=="submit"||_1e0.type=="save"||_1e0.type=="cancel"||_1e0.type=="linkin"){var _1e1=dojo.fromJson(this.grid.bttParam4Link);if(_1e0.flowId){_1e1["dse_nextEventName"]=_1e0.flowEvent?_1e0.flowEvent:"start";_1e1["dse_operationName"]=_1e0.flowId;_1e1["dse_processorState"]="initial";delete _1e1["dse_processorId"];}else{if(_1e0.flowEvent){_1e1["dse_nextEventName"]=_1e0.flowEvent;}else{if(_1e0.operationId){_1e1["dse_operationName"]=_1e0.operationId;_1e1["dse_processorState"]="initial";delete _1e1["dse_processorId"];delete _1e1["dse_nextEventName"];}}}return _1e1;}},_getBTTParamsStr:function(_1e2){var _1e3=this._getBTTParams(_1e2);var pStr=dojo.toJson(_1e3);return pStr.replace(/\"/g,"&#039;");},_onClick:function(e){},_getBTTParamsStrForFmt:null,_addEventForFmt:null,_setStateForFmt:null,_addStateInitForFmt:null});dojo.declare("dojox.btt.grid.cells.MultiCellWidget",null,{widgetClass:null,constructor:function(){if(!dojox.btt.grid.cells.MultiCellWidget.classMap){dojox.btt.grid.cells.MultiCellWidget.classMap={};}if(this.widgetClass){dojox.btt.grid.cells.MultiCellWidget.classMap[this.widgetClass.prototype.declaredClass]=dojo.hitch(this,this.init);}},init:function(){}});new dojox.btt.grid.cells.MultiCellWidget();dojo.declare("dojox.btt.grid.cells.MultiCellLabel",dojox.btt.grid.cells.MultiCellWidget,{widgetClass:com.ibm.btt.dijit.Label,init:function(_1e4,_1e5,item){if(item&&_1e4["cellWidgetDataName"]){var _1e6=_1e5.getValue(item,_1e4["cellWidgetDataName"]);if(_1e6){_1e4.set("text",_1e6);}}}});new dojox.btt.grid.cells.MultiCellLabel();dojo.declare("dojox.btt.grid.cells.MultiCellImage",dojox.btt.grid.cells.MultiCellWidget,{widgetClass:com.ibm.btt.dijit.Image,init:function(_1e7,_1e8,item){if(item&&_1e7["cellWidgetDataName"]){var _1e9=_1e8.getValue(item,_1e7["cellWidgetDataName"]);if(_1e9){_1e7.set("location",_1e9);}}}});new dojox.btt.grid.cells.MultiCellImage();}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_1ea,_1eb,_1ec){var _1ed=_1ea.serverQuery||_1ea.query||{};if(!this.doClientPaging){_1ed.start=(_1ea.start||0).toString();if(_1ea.count){_1ed.count=_1ea.count.toString();}}if(!this.doClientSorting&&_1ea.sort){var _1ee=[];dojo.forEach(_1ea.sort,function(sort){if(sort&&sort.attribute){_1ee.push((sort.descending?"-":"")+sort.attribute);}});_1ed.sort=_1ee.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_1ed)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_1eb(this._items,_1ea,this._numRows);}else{var _1ef=dojo.xhrPost;dojo.safeMixin(_1ed,this.bttParams);var _1f0=_1ef({url:this.url,handleAs:"text",postData:dojo.toJson(_1ed),failOk:true});_1ea.abort=function(){_1f0.cancel();};_1f0.addCallback(dojo.hitch(this,function(_1f1){try{data=dojo.fromJson(_1f1||null);this._xhrFetchHandler(data,_1ea,_1eb,_1ec);}catch(err){console.error(err);}}));_1f0.addErrback(function(_1f2){_1ec(_1f2,_1ea);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_1ed);}}});}if(!dojo._hasResource["com.ibm.btt.util.BTTTooltip"]){dojo._hasResource["com.ibm.btt.util.BTTTooltip"]=true;dojo.provide("com.ibm.btt.util.BTTTooltip");dojo.getObject("com.ibm.btt.util.BTTTooltip",true);dojo.declare("com.ibm.btt.util.BTTTooltip",[dijit._MasterTooltip],{show:function(_1f3,_1f4,_1f5,rtl,e){if(this.aroundNode&&this.aroundNode===_1f4){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_1f3;var _1f6=dojo.position(_1f4,true);if(dojo.isIE<9&&("mousePoint"==_1f5||"textEnd"==_1f5)){_1f5=dijit.Tooltip.defaultPosition;}if("mousePoint"==_1f5){dijit._placeOnScreenAroundRect(this.domNode,e.clientX,_1f6.y,0,_1f6.h,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}else{if("textEnd"==_1f5){var _1f7=_1f6.x+_1f6.w/2;var _1f8=_1f4.childNodes[0].offsetWidth;if(dojo.query(".dojoxEllipsis",_1f4)[0]){_1f8=dojo.query(".dojoxEllipsis",_1f4)[0].childNodes[0].offsetWidth;}if(_1f8<_1f6.w&&_1f8!=0){if(_1f8<_1f6.w){_1f7=_1f6.x+_1f8;}}dijit._placeOnScreenAroundRect(this.domNode,_1f7,_1f6.y,0,_1f6.h,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}else{dijit.placeOnScreenAroundElement(this.domNode,_1f4,dijit.getPopupAroundAlignment((_1f5&&_1f5.length)?_1f5:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}}dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_1f4;}});dijit.showBTTTooltip=function(_1f9,_1fa,_1fb,rtl,e){if(!dijit._masterTT_BTT){dijit._masterTT_BTT=new com.ibm.btt.util.BTTTooltip();}return dijit._masterTT_BTT.show(_1f9,_1fa,_1fb,rtl,e);};dijit.hiddenBTTTooltip=function(_1fc){if(dijit._masterTT_BTT){return dijit._masterTT_BTT.hide(_1fc);}};}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.CloseMenuItem",dijit.MenuItem,{templateString:dojo.cache("com.ibm.btt.dijit","templates/CloseMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\r\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" waiRole=\"presentation\">\r\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\r\n\t\t<div dojoAttachPoint=\"closeButton\" dojoAttachEvent=\"onclick:_onCloseButtonClick\" >X</div>\r\n\t</td>\r\n</tr>\r\n"),_onCloseButtonClick:function(evt){this.getParent()._onBlur();dojo.stopEvent(evt);}});dojo.declare("com.ibm.btt.dijit.Menu",dijit.Menu,{position:"",grid:null,_scheduleOpen:function(_1fd,_1fe,_1ff){if(_1ff!=null&&(_1ff.x==0||_1ff.y==0)){this.inherited(arguments,[_1fd,_1fe]);}else{this.inherited(arguments);}},_openMyself:function(args){var _200=args.target,_201=args.iframe,_202=args.coords;var _203=_200;while(!(_203.tagName&&_203.tagName.toLowerCase()=="div")||!dojo.hasClass(_203,"dojoxGridRow")){_203=_203.parentNode;}var temp=_200;if(!_201){while(!dojo.attr(temp,"cellWidgetId")&&!dojo.attr(temp,"widgetId")){temp=temp.parentNode;}}_200=temp;var _204=dojo.position(_203,true).h;if(this.position=="below"){_202=null;_202=dojo.position(_200,true);var _205=dijit.popup._createWrapper(this);dojo.style(_205,"display","block");menuCoords=dojo.position(_205,true);dojo.style(_205,"display","none");_202.y+=_202.h+5;_202.x=_202.x-(menuCoords.w-_202.w)/2;}else{if(_202){if(_201){var od=_200.ownerDocument,ifc=dojo.position(_201,true),win=this._iframeContentWindow(_201),_206=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_201),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_201,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_201,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_201,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_201,cs.borderTopWidth):0);_202.x+=ifc.x+left-_206.x;_202.y+=ifc.y+top-_206.y;}}else{_202=dojo.position(_200,true);_202.x+=10;_202.y+=10;}}if(this.grid&&this.grid.edit){this.grid.edit.apply();}var _207=dojo.position(_203,true).h;if(this.position=="below"){_202.y+=(_207-_204)/2;}var self=this;var _208=dijit.getFocus(this);function _209(){if(self.refocus){dijit.focus(_208);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_202.x,y:_202.y,onExecute:_209,onCancel:_209,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};}});dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,rows_append:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,launchNew:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,isActionable:false,bttParams:"",bttParam4Link:"",columnIndex:-1,rowIndex:-1,noDataMessage:"",clickedMenuItemId:"",clickedWidgetId:"",contextMenus:{},_bindingMenuMap:{},_submitButtonForContextMenu:null,_saveCancelButtonForContextMenu:null,summary:"",cellOverflow:"ellipsis",eventArray:{},stateArray:{},headerRows:1,create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.aew!=undefined){for(var i=0;i<this.aew.length;i++){if(this.aew[i]){var _20a=dojo.filter(this.aew[i],function(cell){return cell.get("isChecked")==false;});if(_20a.length==0){if(this.aewh!=undefined&&this.aewh[i]){this.aewh[i].set("isChecked",true);}}}}}if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){if(e.cell){if(e.rowIndex<0){if(e.cell.alwaysEditing){if(e.keyCode==dojo.keys.SPACE){this.focus.currentArea("header",true);if(this.aewh&&this.aewh[e.cellIndex]){var w=this.aewh[e.cellIndex];if(w.get("checked")==true){w.set("checked",false);}else{w.set("checked",true);}w["preserve"]=false;}setTimeout(dojo.hitch(this,function(){this.focus.currentArea("header",true);this.focus._delayedHeaderFocus();e.cellNode.focus();}),500);dojo.stopEvent(e);}}}else{if(e.cell.alwaysEditing){if(e.keyCode==dojo.keys.SPACE){var fake={};fake.target={};fake.target.tagName="INPUT";fake.dispatch="doclick";fake.cell=e.cell;fake.rowIndex=e.rowIndex;this.edit.dispatchEvent(fake);this.edit.apply();this.focus.currentArea("content",true);dojo.stopEvent(e);}}else{if(e.shiftKey&&e.keyCode==dojo.keys.F9){var node=e.cell.getNode(e.rowIndex);var _20b=dojo.query("[widgetId]",node);if(this.focusWidgetId){var _20c=-1;for(var j=0;j<_20b.length;j++){if(dojo.attr(_20b[j],"widgetId")==this.focusWidgetId){_20c=j;break;}}if(_20c>=0){var _20d=_20c==_20b.length-1?0:_20c+1;dijit.byNode(_20b[_20d]).focus();this.focusWidgetId=dojo.attr(_20b[_20d],"widgetId");}}}}}}this._set("state",this._getState());}));this._eventHandlers.push(dojo.connect(this,"onCellFocus",this,function(_20e,_20f){var node=_20e.getNode(_20f);var _210=dojo.query("[cellWidgetId]",node);if(_210.length>0){_210[0].focus();}else{var _210=dojo.query("[widgetId]",node);if(_210.length>0){dijit.byNode(_210[0]).focus();this.focusWidgetId=dojo.attr(_210[0],"widgetId");}}}));this._eventHandlers.push(dojo.connect(this.domNode,"onkeyup",this,function(e){if(e.keyCode==dojo.keys.ESCAPE){this.selection.deselectAll();}}));if(this.selectionMode=="single"){this.selection.select=dojo.hitch(this.selection,function(_211){if(this.isSelected(_211)){this.deselect(_211);}else{this.deselectAll(_211);this.addToSelection(_211);}});this.selection.clickSelectEvent=dojo.hitch(this.selection,function(e){if(e.type=="keydown"){return;}this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);});}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();this._eventHandlers.push(dojo.connect(this,"onRowDblClick",this,this._onRowDblClick));this._eventHandlers.push(dojo.connect(this,"onRowClick",this,this._onRowClick));this._eventHandlers.push(dojo.connect(this.domNode,"onkeydown",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(this.domNode,"onkeyup",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(this.edit,"setEditCell",this,this._onCellEdit));var _212=this;dojo.forEach(this.views.views,function(view){_212._eventHandlers.push(dojo.connect(view,"onAfterRow",function(idx,_213,_214){if(idx<0){var cols=_213[0];for(var i=0;i<cols.length;i++){if(cols[i]&&cols[i].alwaysEditing&&cols[i].titleStyle){switch(cols[i].titleStyle){case "text":break;case "checkbox":var w=null;if(!_212.aewh){_212.aewh=[];}try{if(_212.aewh[i]){if(_212.aewh[i].destroy){_212.aewh[i].destroy();}}_212.aewh[i]=w=new com.ibm.btt.dijit.CheckBox({});w.placeAt(_214.firstChild.rows[0].cells[i].firstChild,"only");}catch(e){}w.set("text"," ");w["col"]=i;_212._eventHandlers.push(dojo.connect(w,"onChange",w,function(_215){if(this.preserve!=undefined&&this.preserve==true){return;}dojo.forEach(_212.aew[w.col],function(_216){_216.set("isChecked",_215);_212.setCellValueByName(_216.field,_216.row,_215);});}));_212._eventHandlers.push(dojo.connect(w,"onClick",w,function(_217){this["preserve"]=false;}));break;case "both":var w=null;if(!_212.aewh){_212.aewh=[];}try{if(_212.aewh[i]){if(_212.aewh[i].destroy){_212.aewh[i].destroy();}}_212.aewh[i]=w=new com.ibm.btt.dijit.CheckBox({});w.placeAt(_214.firstChild.rows[0].cells[i].firstChild,"only");}catch(e){}w.set("text",cols[i].name);dojo.place(w.labelNode,w.domNode,"after");w["col"]=i;_212._eventHandlers.push(dojo.connect(w,"onChange",w,function(_218){if(this.preserve!=undefined&&this.preserve==true){return;}dojo.forEach(_212.aew[w.col],function(_219){_219.set("isChecked",_218);_212.setCellValueByName(_219.field,_219.row,_218);});}));_212._eventHandlers.push(dojo.connect(w,"onClick",w,function(_21a){this["preserve"]=false;}));break;}}}}}));});this._eventHandlers.push(dojo.connect(this,"_onSet",this,function(item,_21b,_21c,_21d){var cols=dojo.filter(this.layout.cells,function(col){return col.field==_21b;});var col=cols.length>0?cols[0]:undefined;if(col&&col.alwaysEditing){if(col&&col.widget&&col.widget instanceof com.ibm.btt.dijit.RadioButton){if(String(_21d)==col.widget.checkedValue){var idx=this.getItemIndex(item);if(idx>-1){var _21e=this.get("rowCount");for(var i=0;i<_21e;i++){if(i!=idx){var item=this.getItem(i);if(item){this.store.setValue(item,_21b,col.widget.unCheckedValue);}}}}}if(String(_21c)!=String(_21d)){if(this.colWidget&&this.colWidget[col.index]){this.colWidget[col.index].onChange(_21d);}}if(this.invalidated!=undefined){this.invalidated.all=true;}}else{if(col&&col.widget&&col.widget instanceof com.ibm.btt.dijit.CheckBox){if(String(_21c)!=String(_21d)){if(this.colWidget&&this.colWidget[col.index]){this.colWidget[col.index].onChange(_21d);}}if(this.invalidated!=undefined){this.invalidated.all=true;}}}}}));this._eventHandlers.push(dojo.connect(this,"onCellMouseOver",this,this._onCellMouseOver));this._eventHandlers.push(dojo.connect(this,"onCellMouseOut",this,this._onCellMouseOut));if(dojo.isIE<8||(dojo.isIE&&this.headerRows>1)){var ps=this.plugin("nestedSorting");if(ps){ps._doSort_IE7=ps._doSort;ps._doSort=dojo.hitch(ps,function(_21f){this._doSort_IE7(_21f);this.grid._render();});}}var _220=dojo.connect(this,"render",this,function(){var v=this.views.views[0];if(v){var _221=v.getRowNode(0);if(_221){var _222=this;dojo.query("img:first-of-type",_221).forEach(function(node){var _223=dojo.attr(node,"src");if(_223){var _224={};if(_223&&_223!="/"){if(_223.indexOf("?")<0){_224.url=_223+"?"+"randomId="+Math.random();}else{_224.url=_223+"&"+"randomId="+Math.random();}_224.load=function(){_222.resize();};dojo.xhrGet(_224);}}});}}dojo.disconnect(_220);});this._eventHandlers.push(_220);var _225=this;function _226(menu,_227,_228){for(var j=0;j<_227.length;j++){if(_227[j].menuItems){var _229=new dijit.Menu({parentMenu:menu});menu.addChild(new dijit.PopupMenuItem({label:StringUtil.escapeEnterWrap(_225.getI18NString(_227[j].text)),popup:_229}));_226(_229,_227[j].menuItems,false);}else{if(_228&&j==0){var _22a=new com.ibm.btt.dijit.CloseMenuItem({label:StringUtil.escapeEnterWrap(_225.getI18NString(_227[j].text))});}else{var _22a=new dijit.MenuItem({label:StringUtil.escapeEnterWrap(_225.getI18NString(_227[j].text))});}menu.addChild(_22a);if(_227[j].id){_22a.itemId=_227[j].id;}if(_227[j].type){_22a.type=_227[j].type;}if(_227[j].flowEvent){_22a.flowEvent=_227[j].flowEvent;}if(_227[j].flowId){_22a.flowId=_227[j].flowId;}if(_227[j].operationId){_22a.operationId=_227[j].operationId;}if(_227[j].newWindow=="true"||_227[j].newWindow===true){_22a.newWindow=true;}else{_22a.newWindow=false;}if(_227[j].url){_22a.url=_227[j].url;}dojo.connect(_22a,"onClick",dojo.hitch(_225,_225._onMenuItemClick,_22a));}}};for(var i=0;i<this.contextMenus.length;i++){var mn=new com.ibm.btt.dijit.Menu({contextMenuForWindow:false,leftClickToOpen:this.contextMenus[i].leftClickToOpen=="true",position:this.contextMenus[i].position,grid:this});_226(mn,this.contextMenus[i].menuItems,this.contextMenus[i].hasCloseButton=="true");var _22b=this.contextMenus[i].bindingCellWidgetId;if(_22b){if(!this._bindingMenuMap[_22b]){this._bindingMenuMap[_22b]=[];}this._bindingMenuMap[_22b].push(mn);}}if(this.contextMenus.length){this._submitButtonForContextMenu=new com.ibm.btt.dijit.Button({type:"submit",bttParams:{},visibility:"gone"});this._submitButtonForContextMenu.placeAt(this.domNode);this._saveCancelButtonForContextMenu=new com.ibm.btt.dijit.Button({type:"save",bttParams:{},visibility:"gone"});this._saveCancelButtonForContextMenu.placeAt(this.domNode);}var gcu=com.ibm.btt.util.GlobalConfigurationUtil;if(gcu&&(gcu.getValue("kwcag.grid.role.presentation")===false||gcu.getValue("kwcag.grid.th.scope"))){this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(gcu&&gcu.getValue("kwcag.grid.role.presentation")===false){console.warn("kwcag.grid.role.presentation===false");console.warn("remove the role=presentation in data grid for KWCAG");dojo.query("[role=presentation]",this.domNode).forEach(function(node,_22c,arr){dojo.removeAttr(node,"role");});}if(gcu&&gcu.getValue("kwcag.grid.th.scope")){console.warn("kwcag.grid.th.scope===col");console.warn("add the scope=col in the <th> of data grid for KWCAG");dojo.query("th[role=columnheader]",this.headerNodeContainer).forEach(function(node,_22d,arr){dojo.attr(node,"scope","col");});}}));}},sizeChange:function(){this.inherited(arguments);if(this.isVisible()==false){dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_22e,_22f){dojo.style(node,"visibility","hidden");});}},_onMenuItemClick:function(_230,ev){this.clickedMenuItemId=_230.itemId;this.onMenuItemClick();if(_230.type=="submit"||_230.type=="save"||_230.type=="cancel"){var _231;if(_230.type=="submit"){_231=this._submitButtonForContextMenu;}else{_231=this._saveCancelButtonForContextMenu;}_231.set("type",_230.type);var _232=dojo.fromJson(this.bttParam4Link);if(_230.flowId){_232["dse_nextEventName"]=_230.flowEvent?_230.flowEvent:"start";_232["dse_operationName"]=_230.flowId;_232["dse_processorState"]="initial";delete _232["dse_processorId"];}else{if(_230.flowEvent){_232["dse_nextEventName"]=_230.flowEvent;}else{if(_230.operationId){_232["dse_operationName"]=_230.operationId;_232["dse_processorState"]="initial";delete _232["dse_processorId"];delete _232["dse_nextEventName"];}}}_231.bttParams=_232;_231._onButtonClick(ev);}else{if(_230.type=="link"){var _233=this.getItem(this.rowIndex);var _234=this.store.getAttributes(_233);var _235=[];for(var i=0;i<_234.length;i++){var _236=this.store.getValue(_233,_234[i]);if(_236){if(_235.length>0){_235.push("&");}_235.push(_234[i]);_235.push("=");_235.push(_236);}}var url=_230.url;if(url.toString().indexOf("?")>0){url+="&"+_235.join("");}else{url+="?"+_235.join("");}var _237="_self";if(_230.newWindow){_237="_blank";}window.open(url,_237);}}},_onOneCellWidgetClick:function(_238){this.onCellWidgetClick();},onMenuItemClick:function(){},onCellWidgetClick:function(){},updateRow:function(_239){_239=Number(_239);if(this.updating){this.invalidated[_239]=true;}else{this.views.updateRow(_239);var _23a=[];for(var i=0,v;v=this.views.views[i];i++){var _23b=v.getRowNode(_239);if(_23b){_23a.push(_23b);}}this.bindWidgetAndContextMenu(_239,_23a);this.scroller.rowHeightChanged(_239);}},bindWidgetAndContextMenu:function(_23c,_23d){if(!(this.edit&&this.edit.info&&this.edit.info.rowIndex&&this.edit.info.rowIndex==_23c&&this.edit.info.cell&&this.edit.info.cell.editable==true)){if(this.cellOverflow=="ellipsis"){for(var i=0,n;n=_23d[i];i++){dojo.query(".dojoxGridCell",n).forEach(function(node,_23e,arr){if(node.innerHTML.indexOf("<input")<0&&node.innerHTML.indexOf("cellwidgetid")<0&&dojo.query("> div.dijitCheckBox",node)==0&&dojo.query("> div.dijitRadio",node)==0){if("TD"===node.tagName){var _23f=dojo.query(".dojoxEllipsis",node);if(!_23f||_23f.length==0){var _240=node.innerHTML;node.innerHTML="";var _241=dojo.create("div",{innerHTML:"<span>"+_240+"</span>"},node);dojo.addClass(_241,"dojoxEllipsis");}}}});}}else{for(var i=0,n;n=_23d[i];i++){dojo.query(".dojoxGridCell",n).forEach(function(node,_242,arr){if(node.innerHTML.indexOf("<input")<0&&node.innerHTML.indexOf("cellwidgetid")<0&&dojo.query("> div.dijitCheckBox",node)==0&&dojo.query("> div.dijitRadio",node)==0){if(!(node.innerHTML.indexOf("<span>")>=0)){if("TD"===node.tagName){node.innerHTML="<span>"+node.innerHTML+"</span>";}}}});}}}for(var i=0,n;n=_23d[i];i++){dojo.parser.parse(n);}for(var k=0;k<_23d.length;k++){var _243=dojo.query("[cellWidgetId]",_23d[k]);for(var j=0;j<_243.length;j++){var cwId=dojo.attr(_243[j],"cellWidgetId");if(cwId){if(!this._eventHandlers){this._eventHandlers=[];}var _244=dojo.hitch(this,function(_245,_246){this.rowIndex=_245;this.clickedWidgetId=_246;},_23c,cwId);this._eventHandlers.push(dojo.connect(_243[j],"click",_244));this._eventHandlers.push(dojo.connect(_243[j],"contextmenu",_244));if(this._bindingMenuMap[cwId]){for(var m=0;m<this._bindingMenuMap[cwId].length;m++){this._bindingMenuMap[cwId][m].bindDomNode(_243[j]);}}}}var _247=dojo.query("[widgetId]",_23d[k]).map(dijit.byNode);for(var j=0;j<_247.length;j++){var cwId=_247[j].get("cellWidgetId");var _248=_247[j];if(cwId){if(dojox.btt.grid.cells.MultiCellWidget.classMap[_248.declaredClass]){dojox.btt.grid.cells.MultiCellWidget.classMap[_248.declaredClass](_248,this.store,this.getItem(_23c));}var _249=this.getItem(_23c);var _24a=null;if(_249){_24a=this.store.getIdentity(_249);}_24a=_24a!=null?_24a:_23c;if(this.stateArray[_24a]&&this.stateArray[_24a][cwId]&&this.stateArray[_24a][cwId]["stateInit"]){this.stateArray[_24a][cwId]["stateInit"](_23c,cwId,_248,_247,this.stateArray[_24a][cwId]["state"]);}if(!this._eventHandlers){this._eventHandlers=[];}if(Engine.getInstance() instanceof com.ibm.btt.event.NavigationEngine){if(_248.type!="undefined"&&(_248.type=="save"||_248.type=="cancel")){var _24b=_248._onButtonClick;_248._onButtonClick=dojo.hitch(Engine.getInstance(),Engine.getInstance()._onButtonClick,_248,_24b);_248.hasEventBundle=true;}if(_248.domNode.nodeName==="A"){_248.hasEventBundle=true;var _24c=_248.onClick;_248.onClick=dojo.hitch(this,function(_24d,_24e,e){this.rowIndex=_24d;this.launchNew=true;var _24f=!_24e.bttParams?null:(typeof _24e.bttParams=="string"?dojo.fromJson(_24e.bttParams):_24e.bttParams);this.launchNew=_24f&&_24f["dse_processorId"]?false:true;var _250=this._getSelectedValue(false,true);var _251=_24e.bttParams;_24e.domNode.href=_24e.targetURL?_24e.targetURL:_24e.domNode.href;if(_24e.domNode.href&&dojo.trim(_24e.domNode.href)&&(!_24f||this.name)&&_250){var _252=dojo.isArray(_250);tempObj=_252?_250[0]:_250;href=_24e.domNode.href;var _253=0;for(var p in tempObj){if(p){var _254=(_24f&&this.name?(_252?this.name+".0."+p:(this.launchNew?this.name:"dse_tableSelectedRows")+"."+p):p)+"="+tempObj[p];href+=(_253==0&&href.indexOf("?")<0?"?":"&")+_254;_253++;}}_24e.targetURL=_24e.domNode.href;_24e.domNode.href=href;}if(_24f&&this.name&&_250){var obj={};var _255=function(vobj){if(vobj===null){return null;}if(typeof vobj==="string"){return vobj;}else{if(typeof vobj==="number"||typeof vobj==="boolean"){return String(vobj);}else{if(typeof vobj==="object"){if(dojo.isArray(vobj)){for(var i=0;i<vobj.length;i++){vobj[i]=arguments.callee(vobj[i]);}}else{for(var p in vobj){if(p.indexOf("_")!=0){vobj[p]=arguments.callee(vobj[p]);}}}return vobj;}else{return null;}}}};if(this.launchNew){obj[this.name]=_255(_250);}else{obj["dse_tableSelectedRows"]=_255(_250);}dojo.mixin(obj,_24f);_24e.bttParams=obj;}Engine.getInstance()._onLinkClick(_24e,_24c,e);_24e.bttParams=_251;},_23c,_248);}}this._eventHandlers.push(dojo.connect(_248,"onClick",dojo.hitch(this,function(_256,_257,_258,_259){var _25a=this.store.getIdentity(this.getItem(_256));_25a=_25a!=null?_25a:_256;if(this.eventArray[_25a]&&this.eventArray[_25a][_257]&&this.eventArray[_25a][_257]["onClick"]){this.eventArray[_25a][_257]["onClick"](_256,_257,_248,_259);}this.rowIndex=_256;this.clickedWidgetId=_257;this._onOneCellWidgetClick(_258);},_23c,cwId,_248,_247)));this._eventHandlers.push(dojo.connect(_248.domNode,"contextmenu",dojo.hitch(this,function(_25b,_25c,_25d){this.rowIndex=_25b;this.clickedWidgetId=_25c;},_23c,cwId)));if(this._bindingMenuMap[cwId]){for(var m=0;m<this._bindingMenuMap[cwId].length;m++){this._bindingMenuMap[cwId][m].bindDomNode(_248.domNode);}}}}}},renderRow:function(_25e,_25f){this.inherited(arguments);var _260=[];var _261=[];for(var i=0,n;n=_25f[i];i++){if(dojo.query("[cellWidgetId]",n.lastChild).length!=0){_260.push(n.lastChild);}else{_261.push(n.lastChild);}}if(_260.length>0){this.bindWidgetAndContextMenu(_25e,_260);}if(_261.length>0){setTimeout(dojo.hitch(this,this.bindWidgetAndContextMenu,_25e,_261),10);}},_setStructureAttr:function(_262){var s=_262;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(this.structure){for(var i=0;i<_262.length;i++){for(var j=0;j<_262[i].length;j++){if(_262[i][j].formatter){_262[i][j].formatter=function(data){if(!dojo.isString(data)){return data;}data=data.split("\n").join("<br/>");data=data.split("\r").join("<br/>");return data;};}}}}this.inherited(arguments);},_onCellWidgetClick:function(e){if(e.cell.isRowSelector){return;}if(e.cell._onClick){e.cell._onClick(e);}},_onKeyEvent:function(e){this._isCtrlPressed=e.ctrlKey;if(e.cell&&e.cell._props&&e.cell._props.isShowTooltip){if(e.keyCode==dojo.keys.CTRL&&e.type=="keydown"){var _263=e.cell._props.tooltip;var _264=e.cell._props.position;var _265=this.getCellValueByName(_263,e.rowIndex);var _266=_264.split(";");dijit.showBTTTooltip(_265,e.cellNode,_266,false,e);}else{if(e.keyCode==dojo.keys.CTRL&&e.type=="keyup"){dijit.hiddenBTTTooltip(e.cellNode);if(dijit._masterTT_BTT){dijit._masterTT_BTT._onDeck=null;}}}}},_onCellEdit:function(_267,_268){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==_267){this.columnIndex=i;break;}}this.rowIndex=_268;this.onCellEdit(this.columnIndex,this.rowIndex);},onCellEdit:function(){},_onCellMouseOver:function(e){var _269=e.cell._props.isShowTooltip;if(_269){var _26a=e.cell._props.tooltip;var _26b=e.cell._props.position;var _26c=this.getCellValueByName(_26a,e.rowIndex);var _26d=_26b.split(";");dijit.showBTTTooltip(_26c,e.cellNode,_26d,false,e);}},_onCellMouseOut:function(e){var _26e=dojo.position(e.cellNode,true);if(e.clientX>_26e.x&&e.clientX<_26e.x+_26e.w&&e.clientY>_26e.y&&e.clientY<_26e.y+_26e.h){return;}var _26f=e.cell._props.isShowTooltip;if(_26f){dijit.hiddenBTTTooltip(e.cellNode);if(dijit._masterTT_BTT){dijit._masterTT_BTT._onDeck=null;}}},_onRowDblClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;if(this.selectionMode==="single"){if(!this.selection.isSelected(e.rowIndex)){this.selection.setSelected(e.rowIndex,true);}}else{if(this.selectionMode==="extended"){if(dojo.isIE<=8&&this._isCtrlPressed){this.selection.toggleSelect(e.rowIndex);}}else{}}if(this.isActionable){if(this.readOnly===true||e.cell.editable===false){var form=this._getParentForm();if(this.bttParams!=""&&form){form.bttParams=this.bttParams;form.submit();}}}},_onRowClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;if((e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE)&&e.cell._onClick){if(dojo.attr(e.target,"cellWidgetId")!=null){e.target.click();return;}else{dojo.query("[cellWidgetId]",e.target).forEach(function(node,_270,arr){node.click();return;});var node=e.target;while(node&&!dojo.hasClass(node,"dojoxGridCell")){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){e.target.click();return;}node=node.parentNode;}}}},setCellValueByIndex:function(_271,_272,_273){console.warn("setCellValueByIndex() has been deprecated, please use setCellValueByName() instead!");var cell=this.layout.cells[_271];var _274;if(cell&&cell.field){_274=cell.field;}else{return;}if(this.edit&&this.edit.apply){this.edit.apply();}this.store.fetchItemByIdentity({identity:this._by_idx[_272].idty,onItem:dojo.hitch(this,function(item){var _275=this.store.getValue(item,_274);if(typeof _275=="number"){_273=isNaN(_273)?_273:parseFloat(_273);}else{if(typeof _275=="boolean"){_273=_273=="true"?true:_273=="false"?false:_273;}else{if(_275 instanceof Date){var _276=new Date(_273);_273=isNaN(_276.getTime())?_273:_276;}}}this.store.setValue(item,_274,_273);var _277=this;setTimeout(function(){_277.focus.findAndFocusGridCell();},50);})});},getCellValueByIndex:function(_278,_279){console.warn("getCellValueByIndex() has been deprecated, please use getCellValueByName() instead!");var cell=this.layout.cells[_278];var _27a;if(cell&&cell.field){_27a=cell.field;}else{return undefined;}var _27b;this.store.fetchItemByIdentity({identity:this._by_idx[_279].idty,onItem:dojo.hitch(this,function(item){_27b=this.store.getValue(item,_27a);})});return _27b;},setCellValueByName:function(name,_27c,_27d){if(this.edit&&this.edit.apply){this.edit.apply();}var item=this.getItem(_27c);if(!item){return;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(name==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell&&!cell.widget){_27d=this._toString_CellValue(name,_27d);}this.store.setValue(item,name,_27d);var _27e=this;setTimeout(function(){_27e.focus.findAndFocusGridCell();},50);},getCellValueByName:function(name,_27f){var _280=this.store.getValue(this.getItem(_27f),name);return this._toString_CellValue(name,_280);},getCellObjectByName:function(name,_281){var _282=this.store.getValue(this.getItem(_281),name);return this._parseObject_CellValue(name,_282);},_getParentForm:function(){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _283=dijit.byNode(node);if(_283&&typeof _283._onSubmit=="function"){return _283;}}},_setIsActionableAttr:function(_284){if(_284=="true"){this.isActionable=true;}else{if(_284=="false"){this.isActionable=false;}else{this.isActionable=_284;}}},_getState:function(){var _285=[];var _286=this.layout.cells;for(var i=0;i<_286.length;i++){if(_286[i].editable&&_286[i].widget&&(dojo.isIE?_286[i].widget.domNode.parentElement:_286[i].widget.domNode.parentNode)){_285.push(_286[i].widget);}}var _287=dojo.map(_285,function(w){return w.get("state")||"";});return dojo.indexOf(_287,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_287,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _288=this;var _289=false;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.type&&obj.type==dojox.btt.grid.cells.Content){_289=true;}if(obj.name){obj.name=_288.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);console.log(_289);if(this.params&&!this.params.rowsPerPage&&_289){if(this.params.storeData.length>5000){this.rowsPerPage=2*this.params.storeData.length;}else{this.rowsPerPage=10000;}}},setStoreData:function(_28a){var _28b=this.store;if(this.rows_append==true){var _28c=this.store._getItemsArray();var len=_28c.length;for(var i=0;i<_28a.length;i++){_28c[len+i]=_28a[i];}_28a=_28c;this.rows_append=false;}this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_28a},hierarchical:false}));if(dojo.isIE&&dojo.isIE<9){setTimeout(dojo.hitch(this,function(){try{this._refresh(true);}catch(e){try{this._refresh();}catch(e){}}}),400);}if(_28b){this._setComparatorForColunm();_28b.close();_28b=null;}},_setStoreDataAttr:function(_28d){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_28d)},hierarchical:false});}},_setComparatorForColunm:function(){var _28e;if(this.comparatorMap!=""){_28e=dojo.fromJson(this.comparatorMap);}else{_28e={};}var _28f=null;if(this.structure[0]){_28f=this.structure[0];}else{if(this.structure.cells[0]){_28f=this.structure.cells[0];}}for(var i=0;_28f&&i<_28f.length;i++){if(_28f[i].type){var cell=this.getCellByField(_28f[i].field);if(cell.comparator){_28e[_28f[i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_28e;},getEditableStroeData:function(){if(this.storeDataName){var _290=this.layout.cells;var _291=this.store;var _292=this.selectable;var _293=[];this.store.fetch({onComplete:function(_294,_295){for(var m=0;m<_294.length;m++){var _296={};var flag=false;for(var i=0;i<_290.length;i++){if(_290[i].editable){var name=_290[i].field;var _297=_291.getValue(_294[m],_290[i].field);if(_297&&_297!==""&&typeof _297!="string"){if(_290[i].editable&&_290[i].widget&&_290[i].widget.serialize){_297=_290[i].widget.serialize(_297,_290[i].widget.constraints);}}_296[name]=(_297===null||_297==="null"?"":_297);flag=true;}}if(flag){_293.push(_296);}}}});if(_293.length>0){return _293;}else{return;}}else{return;}},_createInputNodesForObj:function(_298,obj,_299){for(var p in obj){if(obj[p]!=null&&typeof obj[p]=="object"){this._createInputNodesForObj(_298,obj[p],_299+"."+p);}else{var _29a=_299+"."+p;var _29b=obj[p]===null||typeof obj[p]=="undefined"?"":obj[p];var _29c=dojo.query("input[type='hidden',name='"+_29a+"']",_298);if(_29c.length>0){_29c.attr("value",_29b);}else{var _29d={};_29d.type="hidden";_29d.name=_29a;_29d.value=_29b;dojo.create("input",_29d,_298,"last");}}}},onFormSubmit:function(){if(this.disabled){return;}if(this.edit&&this.edit.apply){this.edit.apply();}if(this.storeDataName){var _29e=this.layout.cells;var _29f=this.store;var _2a0=this.storeDataName;var node=this.domNode;var _2a1=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_2a2,_2a3){dojo.destroy(node);});var _2a4=this;if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_2a5,_2a6){for(var m=0;m<_2a5.length;m++){for(var i=0;i<_29e.length;i++){if(_29f.getValue(_2a5[m],_29e[i].field)!=null){break;}}if(i==_29e.length){continue;}for(var i=0;i<_29e.length;i++){if(_29e[i].editable){var _2a7={};_2a7.type="hidden";_2a7.name=_2a0+"."+m+"."+_29e[i].field;_2a7.value=_29f.getValue(_2a5[m],_29e[i].field);if(_2a7.value&&_2a7.value!==""&&typeof _2a7.value!="string"){if(_29e[i].editable&&_29e[i].widget&&_29e[i].widget.serialize){_2a7.value=_29e[i].widget.serialize(_2a7.value,_29e[i].widget.constraints);}}if(_2a7.value!==null&&typeof _2a7.value=="object"){_2a4._createInputNodesForObj(node,_2a7.value,_2a7.name);}else{_2a7.value=_2a7.value===null?"":_2a7.value;dojo.create("input",_2a7,node,"last");}}}}}});}var _2a8=this._submitButtonForContextMenu&&(this._getParentForm()._clickedButton==this._submitButtonForContextMenu||this._getParentForm()._clickedButton==this._saveCancelButtonForContextMenu);var _2a9=!!(this._getParentForm()._clickedButton&&this._getParentForm()._clickedButton.get("cellWidgetId"));if(this.name&&(this.selectable||_2a8||_2a9)){var _29e=this.layout.cells;var name=this.name;var _29f=this.store;var node=this.domNode;if(_2a8||_2a9){var _2aa=[];_2aa.push(this.getItem(this.rowIndex));}else{var _2aa=this.selection.getSelected();}var _2ab=[];var _2ac=this.selectionMode=="single"||(!this.selectable&&this.selectionMode=="none"&&(_2a8||_2a9));for(var m=0;m<_2aa.length;m++){if((_2ac||_2a8||_2a9)&&m==1){break;}var _2ad=_2aa[m];if(this.launchNew){dojo.forEach(_29f.getAttributes(_2ad),function(_2ae){var _2af={};_2af.type="hidden";if(_2ac){_2af.name=name+"."+_2ae;}else{_2af.name=name+"."+m+"."+_2ae;}_2af.value=_29f.getValue(_2ad,_2ae);for(var i=0;i<_29e.length;i++){if(_29e[i].field==_2ae){if(_2af.value&&_2af.value!==""&&typeof _2af.value!="string"){if(_29e[i].editable&&_29e[i].widget&&_29e[i].widget.serialize){_2af.value=_29e[i].widget.serialize(_2af.value,_29e[i].widget.constraints);}}if(_2af.value!==null&typeof _2af.value=="object"){_2a4._createInputNodesForObj(node,_2af.value,_2af.name);}else{_2af.value=_2af.value===null?"":_2af.value;dojo.create("input",_2af,node,"last");}break;}}console.debug("tempObj",_2af);});}_2ab[m]=_29f.getIdentity(_2ad);if(_2ac){break;}}var _2b0={};_2b0.type="hidden";_2b0.name="dse_tableSelectedRows.isSingleSelect";_2b0.value=_2ac;dojo.create("input",_2b0,node,"last");var _2b1={};_2b1.type="hidden";_2b1.name="dse_tableSelectedRows.table_dataName";_2b1.value=this.name;dojo.create("input",_2b1,node,"last");var _2b2={};_2b2.type="hidden";_2b2.name="dse_tableSelectedRows.table_dataNameForList";_2b2.value=this.storeDataName;dojo.create("input",_2b2,node,"last");var _2b3={};_2b3.type="hidden";_2b3.name="dse_tableSelectedRows.tableId";_2b3.value=this.id;dojo.create("input",_2b3,node,"last");for(var i=0;i<_2ab.length;i++){var _2b4={};_2b4.type="hidden";_2b4.name="dse_tableSelectedRows.rowsIndexes."+i;_2b4.value=_2ab[i];dojo.create("input",_2b4,node,"last");}}}},_getValueAttr:function(){var _2b5=this._submitButtonForContextMenu&&(this._getParentForm()._clickedButton==this._submitButtonForContextMenu||this._getParentForm()._clickedButton==this._saveCancelButtonForContextMenu);var _2b6=!!this._getParentForm()._clickedButton&&!!this._getParentForm()._clickedButton.get("cellWidgetId");return this._getSelectedValue(_2b5,_2b6);},_getSelectedValue:function(_2b7,_2b8){if(this.selectable||_2b7||_2b8){if(_2b7||_2b8){var _2b9=[];_2b9.push(this.getItem(this.rowIndex));}else{var _2b9=this.selection.getSelected();}var _2ba=this.layout.cells;var _2bb=this.store;var _2bc=[];var _2bd=[];if(_2b9.length>0){var _2be=this.selectionMode=="single"||(!this.selectable&&this.selectionMode=="none"&&(_2b7||_2b8));for(var m=0;m<_2b9.length;m++){var _2bf=_2b9[m];if(this.launchNew){var _2c0={};dojo.forEach(_2bb.getAttributes(_2bf),function(_2c1){for(var i=0;i<_2ba.length;i++){if(_2ba[i].field==_2c1){_2c0[_2c1]=_2bb.getValue(_2bf,_2c1);if(_2c0[_2c1]&&_2c0[_2c1]!==""&&typeof _2c0[_2c1]!="string"){if(_2ba[i].editable&&_2ba[i].widget&&(_2ba[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_2ba[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_2ba[i].formatter){_2c0[_2c1]=_2ba[i].widget.serialize(_2c0[_2c1],_2ba[i].widget.constraints);}}_2c0[_2c1]=_2c0[_2c1]===null?"":_2c0[_2c1];break;}}});console.debug("tempObj",_2c0);if(_2be){return _2c0;}if(_2c0&&_2c0!==""){_2bc.push(_2c0);}if(_2b7||_2b8){return _2bc;}}_2bd[m]=_2bb.getIdentity(_2bf);if(_2be){break;}}if(this.launchNew){return _2bc;}var _2c2={};_2c2.table_dataName=this.name;_2c2.table_dataNameForList=this.storeDataName;_2c2.rowsIndexes=_2bd;_2c2.isSingleSelect=_2be;_2c2.tableId=this.id;console.debug("###########  dse_tableSelectedRows info :"+_2c2.toString());return _2c2;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_2c3){if(_2c3=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"display","none");dojo.style(this.domNode,"visibility","inherit");})));}else{dojo.style(this.domNode,"display","none");dojo.style(this.domNode,"visibility","inherit");}}else{if(_2c3=="hidden"){dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_2c4,_2c5){dojo.style(node,"visibility","hidden");});dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","inherit");dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_2c6,_2c7){dojo.style(node,"visibility","");});this.update();}}this.visibility=_2c3;this._firstTimeLoaded=false;},getValueInSelectedItem:function(_2c8){console.warn("getValueInSelectedItem() has been deprecated, please use getValueInFirstSelectedItem() instead!");return this.getValueInFirstSelectedItem(_2c8);},getValueInFirstSelectedItem:function(_2c9){var _2ca=this.selection.getFirstSelected();if(!_2ca){return null;}var _2cb=this.store.getValue(_2ca,_2c9);return this._toString_CellValue(_2c9,_2cb);},_toString_CellValue:function(_2cc,_2cd){if((typeof (_2cd)=="string")||(_2cd instanceof String)){return _2cd;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(_2cc==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell==null){return _2cd;}if(cell.widget){return cell.widget.format(_2cd,cell.widget.constraints);}try{switch(cell.widgetProps.dataType){case "Date":_2cd=dojo.date.locale.format(_2cd,{selector:"date",datePattern:cell.widgetProps.pattern});break;case "Number":case "Currency":var cons={};if(cell.widgetProps.pattern){cons["pattern"]=cell.widgetProps.pattern;}var _2ce=parseInt(cell.widgetProps.decimalPlaces);if(!isNaN(_2ce)){cons["places"]=_2ce;}_2cd=dojo.number.format(_2cd,cons);break;}}catch(e){console.warn("Can't convert ["+_2cd+"] to String.");}return _2cd;},_parseObject_CellValue:function(_2cf,_2d0){if((typeof (_2d0)!="string")&&!(_2d0 instanceof String)){return _2d0;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(_2cf==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell==null){return _2d0;}try{switch(cell.widgetProps.dataType){case "Date":_2d0=dojo.date.locale.parse(_2d0,{selector:"date",datePattern:cell.widgetProps.pattern});break;case "Number":case "Currency":var cons={};if(cell.widgetProps.pattern){cons["pattern"]=cell.widgetProps.pattern;}_2d0=dojo.number.parse(_2d0,cons);break;}}catch(e){console.warn("Can't convert ["+_2d0+"] to "+cell.widgetProps.dataType);}return _2d0;},getObjectInFirstSelectedItem:function(_2d1){var _2d2=this.selection.getFirstSelected();if(!_2d2){return undefined;}if(this.edit&&this.edit.apply){this.edit.apply();}var _2d3=this.store.getValue(_2d2,_2d1);return this._parseObject_CellValue(_2d1,_2d3);},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_2d4){if(_2d4!=""){this.width=this.handleLenUint(_2d4);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_2d5){if(_2d5!=""){this.height=this.handleLenUint(_2d5);}},_forceSort:false,canSort:function(_2d6,_2d7){var cell=this.layout.cells[_2d6];var _2d8=(this.disabled==false)&&cell&&((this.sortEnabled&&!(cell.canSort==false||cell.canSort=="false"))||(cell.canSort===true));if(this._forceSort||_2d8){return this.inherited(arguments);}else{return false;}},setSortableColumn:function(id,_2d9){var _2da=this._findColumn(id);var cell=this.layout.cells[_2da];if(cell.canSort!=_2d9&&this.plugins.nestedSorting){cell.canSort=_2d9;this.render();}},sortColumn:function(_2db,_2dc){if(_2db==undefined){return;}var _2dd=[];for(var i=0;i<arguments.length;i++){if(typeof (arguments[i])=="boolean"){continue;}var cs={attribute:arguments[i],descending:arguments[i+1]==false};_2dd.push(cs);}if(_2dd.length<1){return;}this._forceSort=true;this.setSortIndex(_2dd);this._forceSort=false;this.render();},validate:function(_2de,_2df,_2e0){},checkSelectionNum:function(){this.showErrorIcon("");var _2e1=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_2e1);if(this.selectionRequired&&_2e1<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}else{this.SELECTION_VALID_STATE=true;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_2e2){if(this.errorMessageIcon){if(_2e2){this.errorMessageIcon.title=_2e2;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_2e2);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}}},isValid:function(){var _2e3=this._getState()=="";console.debug("isValid",_2e3);return _2e3;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_2e4){console.debug("_setReadOnlyAttr",_2e4);this.readOnly=_2e4;},_setDisabledAttr:function(_2e5){console.debug("_setDisabledAttr",_2e5);this.disabled=_2e5;if(this.disabled){if(this.selectionMode!="none"){if(!this._disableCache){this._disableCache={};}this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){if(!this._disableCache){this._disableCache={};}this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);mask.onclick=dojo.stopEvents;mask.onDblClick=dojo.stopEvents;mask.onmouseover=dojo.stopEvents;mask.onmousemove=dojo.stopEvents;mask.onmouseout=dojo.stopEvents;mask.onmouseleave=dojo.stopEvents;mask.onmouseenter=dojo.stopEvents;mask.onmouseup=dojo.stopEvents;mask.onmousedown=dojo.stopEvents;mask.onfocus=dojo.stopEvents;mask.onkeydown=dojo.stopEvents;mask.onkeyup=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;mask.onblur=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;if(dojo.isIE&&dojo.isIE<9){var _2e6=this;setTimeout(function(){try{_2e6._refresh(true);_2e6._refresh(true);}catch(e){_2e6._refresh(true);}},10);}else{this._refresh(true);}}dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}this.checkSelectionNum();},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _2e7=(this.rowCount===0);if(!_2e7){var _2e8=0;var cell=this.getCell(_2e8);if(cell.hidden){_2e8=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_2e8);}else{this.focus.focusHeader();}},canEdit:function(_2e9,_2ea){if((this.readOnly===true)||(this.disabled===true)){return false;}else{return this.inherited(arguments);}},rowCSS:null,computeCCSS:function(_2eb,cell,_2ec){var grid=cell.grid;var ccss=[];if(typeof (grid.rowCSS)=="string"){grid.rowCSS=dojo.fromJson(grid.rowCSS);}for(var ci in grid.rowCSS){var c=grid.rowCSS[ci];for(var ri in c.forr){if(c.forr[ri]==_2eb||c.forr[ri]==_2ec){ccss.push(c.name);break;}}}if(typeof (cell.rowCSS)=="string"){cell.rowCSS=dojo.fromJson(cell.rowCSS);}for(var ci in cell.rowCSS){var c=cell.rowCSS[ci];for(var ri in c.forr){if(c.forr[ri]==_2eb||c.forr[ri]==_2ec){ccss.push(c.name);break;}}}return ccss;},buildViews:function(){var _2ed=this.layout.cells;for(var i=0;i<_2ed.length;i++){_2ed[i].headerClasses=(_2ed[i].headerClasses||"")+" "+this.computeCCSS("H",_2ed[i]).join(" ");_2ed[i].cellClasses=(_2ed[i].cellClasses||"")+" "+this.computeCCSS("R",_2ed[i]).join(" ");_2ed[i].classes=(_2ed[i].classes||"")+" "+this.computeCCSS("A",_2ed[i]).join(" ");if(this.cellOverflow=="ellipsis"&&_2ed[i].styles.indexOf("white-space")<0){_2ed[i].styles+="white-space:nowrap;";}}var grid=this;for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.raw_onBeforeRow=vs.onBeforeRow;vs.onBeforeRow=dojo.hitch(vs,function(_2ee,_2ef){if(this.raw_onBeforeRow){this.raw_onBeforeRow(_2ee,_2ef);}if(_2ee<0){_2ef[0].hidden=false;return;}var item=grid.getItem(_2ee);if(!item){return;}var _2f0=grid.layout.cells;for(var i=0;i<_2f0.length;i++){if(_2f0[i].field&&grid.store.getValue(item,_2f0[i].field)!==null){_2ef[0].hidden=false;return;}}_2ef[0].hidden=true;});}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _2f1=this.layout.cells;for(var i=0;i<_2f1.length;i++){if(_2f1[i].id==arg&&_2f1[i].getWidget){return _2f1[i].getWidget();}}return undefined;},_findColumn:function(_2f2){var _2f3=-1;var _2f4=this.layout.cells;for(var i=0;i<_2f4.length;i++){if(_2f4[i].id==_2f2){_2f3=i;break;}}if(_2f3<0&&/^\d+$/.test(""+_2f2)){console.warn("Can't find any column by ID["+_2f2+"], try to use the ID as the column index");_2f3=parseInt(_2f2);}return _2f3;},showColumn:function(_2f5){var _2f6=this._findColumn(_2f5);if(_2f6>-1&&_2f6<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2f6,true);if(dojo.isIE){var _2f7=this;setTimeout(function(){try{_2f7._refresh();_2f7._refresh();}catch(e){_2f7._refresh();}},0);}window.setTimeout(dojo.hitch(this,function(){this.focusOn();}),100);}else{console.error("showColumn(id) can't find any column by ID: '"+id+"'");}},hideColumn:function(_2f8){var _2f9=this._findColumn(_2f8);if(_2f9>-1&&_2f9<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2f9,false);if(dojo.isIE){var _2fa=this;setTimeout(function(){try{_2fa._refresh();_2fa._refresh();}catch(e){_2fa._refresh();}},0);}window.setTimeout(dojo.hitch(this,function(){this.focusOn();}),100);}else{console.error("hideColumn(id) can't find any column by ID: '"+id+"'");}},isColumnVisible:function(_2fb){var _2fc=this._findColumn(_2fb);if(_2fc>-1&&_2fc<this.layout.cells.length){return !this.layout.cells[_2fc].hidden;}else{console.error("isColumnVisible(id) can't find any column by ID: '"+id+"'");return undefined;}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventHandlers&&this._eventHandlers.length>0){try{dojo.disconnect(this._eventHandlers.pop());}catch(e){}}this._eventHandlers=undefined;this.inherited(arguments);while(this.cwsl&&this.cwsl.length>0){try{this.cwsl.pop().destroy();}catch(e){}}this.cwsl=undefined;if(this.aew){for(var i=0;i<this.aew.length;i++){if(this.aew[i]){for(var j=0;j<this.aew[i].length;j++){try{this.aew[i][j].destroy();}catch(e){}}}}this.aew=undefined;}if(this.aewh){for(var i=0;i<this.aewh.length;i++){try{this.cwsl[i].destroy();}catch(e){}}this.aewh=undefined;}if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);this.textSizeChanged();}},_setSummaryAttr:function(_2fd){this.summary=_2fd;dojo.attr(this.domNode,"summary",_2fd);},_setNoDataMessageAttr:function(msg){if(msg){this.noDataMessage="<span class=\"dojoxGridNoData\">"+msg+"</span>";}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},dodblclick:function(e){if(e.cell&&e.cell.alwaysEditing!=undefined&&e.cell.alwaysEditing==true){return;}else{this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase' role='alert'></span><span role='button' dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer' tabIndex='0'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _2fe=dojo.fromJson(this.messageArray);this.displayMessageArray(_2fe);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};this.connect(this.closeHandler,"ondijitclick","closeMessage");},display:function(text,_2ff){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _300=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_300;if(_2ff===undefined){_2ff=this.level;}this._switchModeAndStyles("STATIC",_2ff);this._showHideCloseHandler(true);this.set("visibility","inherit");},displayMessageArray:function(_301){if(_301.length>0){var _302=[];for(var i=0;i<_301.length;i++){_302.push((i+1)+" ");_302.push(this._getMessageValue(_301[i]));if(i!=_301.length-1){_302.push("<br>");}}var _303=_302.join("");if(this.displayMode==="STATIC"){this.display(_303);}else{this.displayPopup(_303);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_304){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _305=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_305;if(_304===undefined){_304=this.level;}this._switchModeAndStyles("POPUP",_304);if(this._popupDialog===null){var _306=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_306,style:"min-width:300px;",title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this.set("visibility","inherit");},closeMessage:function(){this.set("visibility","gone");},_setVisibilityAttr:function(_307){this.inherited(arguments);if(this.displayMode!=="STATIC"&&this._popupDialog){if(_307=="gone"||_307=="hidden"){if(this._popupDialog.open){this._popupDialog.hide();}}else{if(!this._popupDialog.open){this._popupDialog.show();}}}},_setTextWrapAttr:function(_308){this.textWrap=_308;this._setTextLabelStyle();},_setWidthAttr:function(_309){if(_309!=""&&_309!=null){this.width=_309;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_30a){if(_30a!=""&&_30a!=null){this.height=_30a;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_30b){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_30b]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_30b]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_30c){var _30d="";if(arguments.length===1){_30d=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length===2){_30d=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length>2){var _30e=[];for(var i=2;i<arguments.length;i++){_30e.push(arguments[i]);}console.debug("display,dynamic attributes values",_30e);_30d=StringUtil.escapeEnterWrap(this.getI18NString(text,_30e,true));}}}return _30d;},_setValueAttr:function(_30f){this.text=_30f;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),_mods:[],_eventHandlers:[],postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(true);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _310=this._buildParameter();var _311;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_310,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_311),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _312="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_312+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_312+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _312;},_calculateWidth:function(){var _313=dojo.style(this.inputText.domNode,"width");var _314=dojo.style(this.uploadButton.domNode,"width");var _315=dojo.style(this.f0.domNode,"width");var _316=dojo.style(this.cancelButton.domNode,"width");var _317=35;var _318=_314+_315+_316+_317;var _319=_313+_318;if(this.width){var _31a=this.width.substr(0,this.width.lastIndexOf("px"));if(_31a&&_31a>_319){if(this.width&&_31a>_319){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_31a-_318)+"px");}else{dojo.style(this.fileuploader,"width",_319+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_31b){if(_31b){this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0.domNode.setAttribute("tabIndex","0");this.f0._fileInput.setAttribute("tabIndex","-1");this._eventHandlers.push(dojo.connect(this.f0.domNode,"onkeyup",dojo.hitch(this,function(e){if(e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE){this.f0._fileInput.click(e);dojo.stopEvent(e);}})));this._eventHandlers.push(dojo.connect(this.f0.insideNode,"onclick",dojo.hitch(this,function(e){if(!this.disabled){this.f0._fileInput.click(e);}dojo.stopEvent(e);})));}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","inherit");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"inherit"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"inherit"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){this._eventHandlers.push(dojo.connect(this.f0,"onChange",this,this._handleSelect));this._eventHandlers.push(dojo.connect(this.uploadButton,"onClick",this,this._handleUpload));this._eventHandlers.push(dojo.connect(this.f0,"onComplete",this,function(_31c){var _31d=_31c[0];console.debug("response",_31d);var _31e=_31d.name;var _31f=_31d.errorCode;if(_31e=="TypeError"||_31f){this.handleError(_31f);}else{this.handleSuccess(_31d);}}));this._eventHandlers.push(dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}}));this._eventHandlers.push(dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}}));this._eventHandlers.push(dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();}));},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _320=data[0];this.inputText.set("value",_320.name);var mask=_320.name.substr(_320.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _321=document.createElement("img");this._mods.push(_321);var _322=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_321.setAttribute("src",_322.path);this.statusMessage.appendChild(_321);var _323=document.createElement("span");this._mods.push(_323);_323.innerHTML=" "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_323);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _324={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_325){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_324);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _326={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_327){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_326);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _328=function(_329,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _32a=function(_32b,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_328,_32a);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _32c=function(_32d,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _32e=function(_32f,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_32c,_32e);},handleError:function(_330){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_330=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_331){this._state="done";this._set("state","");this.statusMessage.innerHTML=_331.name;this.value=_331.name;this.currentFileInfo=_331;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_332){if(_332){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_333,_334){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _335=this._buildParameter();_335+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_335,preventCache:true,error:dojo.hitch(this,function(_336,args){dojo.hitch(this,_334)(_336,args);}),load:dojo.hitch(this,function(_337,args){console.debug("response",_337);console.debug("args",args);console.debug("File is successfully deleted");if(_337.errorCode){dojo.hitch(this,_334)(_337,args);}else{this.currentFileInfo=null;dojo.hitch(this,_333)(_337,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_338){if(_338=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_338=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","inherit");_338="inherit";}}this.visibility=_338;},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_339){this._visibilityHolder.push({dijit:_339,visibility:"inherit"});},_allDisappear:function(){if(this.inputText){if(this._isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this._isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this._isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this._isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_33a){dojo.style(this.errorMessage,"display","");if(_33a){this.errorMessage.innerHTML=_33a;}},setVisibility:function(_33b,_33c,_33d){if(_33c){dojo.style(_33b,"visibility","inherit");dojo.style(_33b,"display","");}else{dojo.style(_33b,"visibility","hidden");if(_33d){dojo.style(_33b,"display","none");}}},_isVisible:function(node){var isV=false;if(node.offsetWidth<1||node.offsetHeight<1||dojo.style(node,"display")=="none"){isV=false;}else{isV=dojo.style(node,"visibility")!="hidden";}return isV;},setDisabled:function(_33e,_33f){if(_33e){_33e.set("disabled",_33f);}},setReadOnly:function(_340,_341){if(_340){_340.set("readOnly",_341);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_342){this.disabled=_342;this.inherited(arguments);this.setDisabled(this.f0,_342);if(!_342){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_342);}this.setDisabled(this.cancelButton,_342);},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventHandlers.length>0){try{dojo.disconnect(this._eventHandlers.pop());}catch(e){}}this._eventHandlers=undefined;if(this._mods){while(this._mods.length>0){try{dojo.destroy(this._mods.pop());}catch(e){}}this._mods=undefined;}if(this.inputText&&this.inputText.destroy){this.inputText.destroy();}if(this.uploadButton&&this.uploadButton.destroy){this.uploadButton.destroy();}if(this.cancelButton&&this.cancelButton.destroy){this.cancelButton.destroy();}if(this.browseBtn&&this.browseBtn.destroy){this.browseBtn.destroy();}if(this.f0&&this.f0.destroy){this.f0.destroy();}this.inherited(arguments);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",_cons:[],cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_343,_344){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _345=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_345+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}if(this._cons){while(this._cons.length>0){try{dojo.disconnect(this._cons.pop());}catch(e){}}this._cons=undefined;}this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{}),postCreate:function(){this.inherited(arguments);dojo.style(this.containerNode,"overflow","auto");},startup:function(){try{if(new RegExp("\\s*\\d+\\s*px\\s*","i").test(this.height)){var th=dojo.contentBox(this.textNode).h;var fh=parseInt(this.height);var ch=Math.ceil(fh-th/2);dojo.style(this.containerNode,"height",ch+"px");dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}catch(e){console.error("error @ Group.startup : "+e);}this.inherited(arguments);},_setTextAttr:function(_346){this.text=_346;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_346));},_setWidthAttr:function(_347){if(_347!=""){this.width=_347;dojo.style(this.domNode,"width",this.handleLenUint(this.width));dojo.style(this.containerNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_348){if(_348!=""){this.height=_348;dojo.style(this.containerNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _349=this.getChildren();dojo.forEach(_349,function(_34a){this._disableWatch[_34a.id]=_34a.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_34a));},this);this._setInitialTabSelection();this.resize();},_setVisibilityAttr:function(_34b){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_34b=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","inherit");}}},closeChildByIndex:function(i){var _34c=this.getChildren();this.closeChild(_34c[i]);},closeChildById:function(id){var _34d=this.getChildren();for(var i=0;i<_34d.length;i++){if(id===_34d[i].id){this.closeChild(_34d[i]);}}},selectChildByIndex:function(i){var _34e=this.getChildren();this.selectChild(_34e[i]);},selectChildById:function(id){var _34f=this.getChildren();for(var i=0;i<_34f.length;i++){if(id===_34f[i].id){this.selectChild(_34f[i]);break;}}},closeChild:function(_350){if(_350.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_351){if(_351.get("disabled")!=true){this.inherited(arguments);dijit.registry.forEach(function(w){if(w._hideXHint){w._hideXHint();}});}},hideTabByIndex:function(_352){var _353=this.getChildren();if(_352>-1&&_352<_353.length){var _354=this._getCurrentVisibleTabs();if(_354.length>1){var _355=_353[_352];var _356=this.tablist.pane2button[_355.id];dojo.style(_356.domNode,"display","none");_356._displayMark="hidden";if(_355.selected){var i;for(i=0;i<_354.length;i++){if(_354[i].id==_355.id){break;}}if(i+1<_354.length){this.selectChildById(_354[i+1].id);}else{this.selectChildById(_354[i-1].id);}}}}},showTabByIndex:function(_357){var _358=this.getChildren();if(_357>-1&&_357<_358.length){var _359=this.getChildren()[_357];this.showTabById(_359.id);}},hideTabById:function(id){var _35a=this.getChildren();for(var i=0;i<_35a.length;i++){if(id===_35a[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _35b=this.tablist.pane2button[id];dojo.style(_35b.domNode,"display","");_35b._displayMark="visible";},removeChild:function(_35c){this.inherited(arguments);this._disableWatch[_35c.id].unwatch();delete this._disableWatch[_35c.id];},addChild:function(_35d,_35e){this.inherited(arguments);this._disableWatch[_35d.id]=_35d.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_35d));},_checkDisabedPane:function(_35f,name,_360,_361){if(_361==true){var _362=this.tablist.pane2button[_35f.id];_362.set("disabled",true);}else{var _362=this.tablist.pane2button[_35f.id];_362.set("disabled",false);if(dojo.isIE){dojo.removeAttr(_35f.domNode,"disabled");}}this._setTabSelection();},_setInitialTabSelection:function(){var _363=this._getCurrentVisibleTabs();var _364=0;for(var i=0;i<_363.length;i++){if(_363[i].get("disbaled")==true){_364++;}}if(_363.length>0&&_364==_363.length){_363[0].disable=false;this.selectChildByIndex(0);_363[0].disable=true;}else{this._setTabSelection();}var _365=this.getChildren();for(var i=0;i<_365.length;i++){this._checkDisabedPane(_365[i],_365[i].title,null,_365[i].disabled);}},_setTabSelection:function(){var _366=this._getCurrentVisibleTabs();var _367=-1;for(var i=0;i<_366.length;i++){if(_366[i].selected){_367=i;break;}}if(_367>-1&&_366[_367].get("disabled")==true){for(var m=_367+1;m<_366.length;m++){if(_366[m].get("disabled")==false){this.selectChildById(_366[m].id);return;}}for(var m=_367-1;m>=0;m--){if(_366[m].get("disabled")==false){this.selectChildById(_366[m].id);return;}}}if(_367>-1&&_366[_367].get("disabled")==false){var _368=this.tablist.pane2button[_366[_367].id];dojo.attr(_368.focusNode,"tabIndex","0");}},_getCurrentVisibleTabs:function(){var _369=this.getChildren();var _36a=[];for(var i=0;i<_369.length;i++){var _36b=this.tablist.pane2button[_369[i].id];if(!_36b._displayMark||_36b._displayMark=="visible"){_36a.push(_369[i]);}}return _36a;},_setWidthAttr:function(_36c){if(_36c!=""){this.width=_36c;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_36d){if(_36d!=""){this.height=_36d;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,isFlowContainer:false,postCreate:function(){this.inherited(arguments);if(dojo.isIE&&dojo.hasAttr(this.domNode,"disabled")){dojo.removeAttr(this.domNode,"disabled");}},_setDisabledAttr:function(_36e){this._set("disabled",_36e);},_setTitleAttr:function(_36f){this.titleKey=_36f;var _370=this.getI18NString(_36f);this._set("title",_370);},_getTitleAttr:function(){return this.titleKey;},_setIsFlowContainer:function(_371){this.isFlowContainer=_371;if(_371===true||_371==="true"){dojo.addClass(this.containerNode,"divFlowContainer");}else{dojo.removeClass(this.containerNode,"divFlowContainer");}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",isNumeric:false,templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),postMixInProperties:function(){if(this.isNumeric==true){this.value=Number(this.value);}this.inherited(arguments);},_setValueAttr:function(_372){this.value=_372;this.domNode.value=_372;},serialize:function(val){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_373){var cons={};if(_373["pattern"]){cons["pattern"]=_373["pattern"];}return function(str1,str2){var num1;if(typeof str1=="string"){num1=dojo.number.parse(str1,cons);}else{num1=str1;}if(isNaN(num1)){num1=Number(str1);}var num2;if(typeof str2=="string"){num2=dojo.number.parse(str2,cons);}else{num2=str2;}if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_374){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_375){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_376){return function(str1,str2){var _377="yyyy-MM-dd";if(_376){var _378=_376["pattern"];if(_378){_377=_378;}}var _379={selector:"date",datePattern:_377,fullYear:true};var _37a;var _37b;if(typeof str1=="string"){_37a=dojo.date.locale.parse(str1,_379);}else{_37a=str1;}if(typeof str2=="string"){_37b=dojo.date.locale.parse(str2,_379);}else{_37b=str2;}if(!_37a&&!_37b){return 0;}if(!_37a){return -1;}if(!_37b){return 1;}return dojo.date.compare(_37a,_37b);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_37c){if(_37c!=""){this.width=_37c;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_37d){if(_37d!=""){this.height=_37d;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_37e){var _37f=function(src,_380){var reg=new RegExp(_380+"$");return reg.test(src);};if(_37f(_37e,"px")||_37f(_37e,"%")||_37f(_37e,"em")){return _37e;}else{return _37e+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _381=this;var _382=function(_383,_384){return _381.option[_383]!=undefined?_381.option[_383]:(_381.grid[_383]!=undefined?_381.grid[_383]:_384);};var _385=function(arg,_386){var tmp=Number(arg);if(isNaN(tmp)){return _386;}else{return tmp;}};this.mode=_382("mode",this.mode);this.timeout=_385(_382("timeout",this.timeout),this.timeout);this.initialMode=_382("initialMode","server");this.totalRowNumber=_382("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_382("rowsPerPage",this.rowsPerPage);this.bttParams=_382("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_382("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _387=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_382("enablePrevious",false);this.prevBtnEnabled=_387(this.prevBtnEnabled);this.nextBtnEnabled=_382("enableNext",true);this.nextBtnEnabled=_387(this.nextBtnEnabled);}},_setPageSize:function(_388){if(typeof (_388)!="defined"&&_388!=null&&_388!="null"){this.totalRowNumber=_388;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_389){this.paginators=[];if(this.mode=="simple"){if(_389.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_389,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_389,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_389,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_389.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_389,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_389,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_389,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_38a){try{dojo.stopEvent(_38a);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this.grid.edit){this.grid.edit.apply();}this.grid.selection.deselectAll();if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);var data=this.bttParams;if(!data[AjaxUtil.constants.BTT_TIMEZONE]){data[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(data,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){if(!dojo.isIE){for(var i=0;i<this.grid.layout.cells.length;i++){var cell=this.grid.layout.cells[i];if(cell.type&&cell.type.prototype&&cell.type.prototype.declaredClass=="dojox.btt.grid.cells.Image"){var _38b=dojo.connect(this.grid,"_onFetchComplete",this.grid,function(){setTimeout(dojo.hitch(this,function(){this._refresh();}),500);dojo.disconnect(_38b);});break;}}}this.grid.setStoreData(data.items);if(this.mode=="simple"){this._setPageSize(data.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}dijit.focus(this.grid.domNode);if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){this.grid.onAsyncError(arguments);this.handleResponseError(arg);}this._paginateable=true;if(dojo.isIE==9&&this.grid.autoHeight==true&&this.initialMode=="client"){setTimeout(dojo.hitch(this.grid,function(){this._refresh();}),500);}},handleResponseError:function(arg){(new dijit.Dialog({title:"",content:arg})).show();},_setBtnState:function(_38c){if(typeof (_38c)!="undefined"&&_38c!="null"&&_38c!=null){if(_38c==true||_38c=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},_onKeyDown:function(_38d,_38e){if(_38d.ctrlKey||_38d.altKey||_38d.metaKey){return;}return this.inherited(arguments);},_onFocusPaginator:function(_38f,step){if(this._currentFocusNode){dijit.focus(this._currentFocusNode);this.focusArea="pageStep";this.plugin._stopEvent(_38f);return true;}else{return this._onFocusPageStepNode(_38f);}},disableBtns:function(){var _390=null,_391=this._getCurrentPageNo(),_392=this._getPageCount(),_393=0;var _394=function(node,_395,_396){var _397=node.value,_398=_395?"dojoxGrid"+_397+"Btn":"dojoxGridNumBtnDisabled",_399=_395?"dojoxGrid"+_397+"BtnDisable":"dojoxGridNumBtnDisabled";if(_396){dojo.addClass(node,_399);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_398);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _39a=node.value=="prevPage"||node.value=="firstPage"?1:_392;_394(node,true,true);}else{_390=parseInt(node.value,10);_394(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_39b){dojo.mixin(this,_39b);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_39c,_39d){self._changeSize=g._pendingChangeSize=_39c;self._resultSize=g._pendingResultSize=_39d;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _39e=function(node,_39f,_3a0){var _3a1=node.value,_3a2=_39f?"dojoxGrid"+_3a1+"Btn":"dojoxGridInactived",_3a3=_39f?"dojoxGrid"+_3a1+"BtnDisable":"dojoxGridActived";if(_3a0){dojo.addClass(node,_3a3);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_3a2);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_39e(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_39e(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _3a4=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _3a5,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_3a5=_3a4(flag,"px")||_3a4(flag,"%")||_3a4(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_3a5=flag+"px";}}this[t]=_3a5?true:false;this[t+"Width"]=_3a5;},this);},_regFocusMgr:function(_3a6){this.grid.focus.addArea({name:"pagination"+_3a6,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_3a6){case "top":this.grid.focus.placeArea("pagination"+_3a6,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_3a6,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _3a7=dojo.trim(this.position.toLowerCase());switch(_3a7){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_3a8,_3a9){var g=this.grid;_3a8=_3a8||this._changeSize;_3a9=_3a9||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _3aa=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=(g.domNode.clientHeight||dojo.style(g.domNode,"height"))+2*_3aa;}if(_3a9){_3a8=_3a9;}if(_3a8){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_3aa;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_3aa;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_3aa;dojo.style(g.viewsNode,"height",h+"px");var _3ab=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_3ab){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_3ac,_3ad){var _3ae=this.grid.messagesNode;dojo.style(_3ae,{"position":"absolute","top":top+"px","width":_3ac+"px","height":_3ad+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _3af={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _3b0=function(_3b1,_3b2,_3b3){_3b2=I18nUtil.getI18nString(_3b2);var node=dojo.create("div",{value:_3b1,title:_3b2,tabindex:1},self.pageStepperDiv,_3b3);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_3b2);var _3b4=dojo.create("span",{value:_3b1,title:_3b2,innerHTML:_3af[_3b1]},node,_3b3);dojo.addClass(_3b4,"dojoxGridWardButtonInner");};_3b0("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_3b0("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _3b5=function(node,_3b6,_3b7){var _3b8=node.value,_3b9=_3b6?"dojoxGrid"+_3b8+"Btn":"dojoxGridInactived",_3ba=_3b6?"dojoxGrid"+_3b8+"BtnDisable":"dojoxGridActived";if(_3b7){dojo.addClass(node,_3ba);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_3b9);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_3b5(node,true,false);}else{_3b5(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_3b5(node,true,false);}else{_3b5(node,true,true);}}},this);},_onFocusPaginator:function(_3bb,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_3bb);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_3bc){var _3bd=this._getPageStepActivableNodes();if(_3bc&&_3bc.type!=="click"){if(_3bd[0]){dijit.focus(_3bd[0]);this._currentFocusNode=_3bd[0];this.focusArea="pageStep";this.plugin._stopEvent(_3bc);return true;}else{return false;}}if(_3bc&&_3bc.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_3bc.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_3bc);return true;}}return false;},_onBlurPaginator:function(_3be,step){var _3bf=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_3bf.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_3c0,_3c1){if(_3c1){return;}if(_3c0.altKey||_3c0.metaKey){return;}var dk=dojo.keys;if(_3c0.keyCode===dk.ENTER||_3c0.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_3c0);}}this.plugin._stopEvent(_3c0);},_moveFocus:function(_3c2,_3c3,evt){var _3c4;if(this.focusArea=="pageStep"){_3c4=this._getPageStepActivableNodes();if(this.gotoPageDiv){_3c4.push(this.gotoPageDiv);}}if(_3c4.length<1){return;}var _3c5=dojo.indexOf(_3c4,this._currentFocusNode);var _3c6=_3c5+_3c3;if(_3c6>=0&&_3c6<_3c4.length){dijit.focus(_3c4[_3c6]);this._currentFocusNode=_3c4[_3c6];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _3c7=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_3c7.push(this.pageStepperDiv.childNodes[i]);}return _3c7;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_3c8){this.closable=_3c8;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _3c9=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_3c9){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_3c9){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){var pos=dojo.position(e.node);if(pos.y<0){pos.y=0;dojo.style(this.domNode,{top:pos.y+"px"});}this._relativePosition=pos;}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;' tabIndex='1'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));this._events.push(dojo.connect(document,"onkeydown",this,this.onKey));},onKey:function(evt){if(evt.keyCode&&this.domNode.style.display==="block"){dojo.stopEvent(evt);return false;}},layout:function(){var _3ca=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_3ca.l+(_3ca.w-bb.w)/2);var t=Math.floor(_3ca.t+(_3ca.h-bb.h)/2);dojo.style(this.domNode,{top:_3ca.t+"px",left:_3ca.l+"px",width:_3ca.w+"px",height:_3ca.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_3cb){this.text=_3cb;this.textNode.innerHTML=this.getI18NString(_3cb);},show:function(){if(this.domNode.style.display=="block"){return;}this.domNode.style.display="block";this.layout();try{this.domNode.focus();}catch(e){console.error("ScreenCover.show: "+e);console.error("ScreenCover.show.domNode1: "+this.domNode);console.error("ScreenCover.show.domNode2: "+this.domNode.outerHTML);}},hide:function(){this.domNode.style.display="none";},destroy:function(){while(this._events&&this._events.length>0){dojo.disconnect(this._events.pop());}this._events=undefined;this.inherited(arguments);}});var ScreenCover={};ScreenCover.getInstance=function(){if(!ScreenCover._instance){ScreenCover._instance=new com.ibm.btt.dijit.ScreenCover();}return ScreenCover._instance;};}if(!dojo._hasResource["com.ibm.btt.dijit.Script"]){dojo._hasResource["com.ibm.btt.dijit.Script"]=true;dojo.provide("com.ibm.btt.dijit.Script");dojo.declare("com.ibm.btt.dijit.Script",[dijit._Widget,com.ibm.btt.dijit.AbstractWidgetMixin],{location:"",executeOnLoad:true,content:"",postCreate:function(){this.inherited(arguments);if(this.executeOnLoad==true){this.execute();}else{}},_handleLoadingResponse:function(_3cc){this.content=_3cc;},_handleLoadingError:function(_3cd){console.error("Failed to load script from url, "+_3cd);},_setContentAttr:function(_3ce){this.content=_3ce;},_setLocationAttr:function(_3cf){this.location=_3cf;if(this.content==""){var _3d0={url:this.location,handleAs:"text",sync:true,load:dojo.hitch(this,"_handleLoadingResponse"),error:dojo.hitch(this,"_handleLoadingError")};dojo.xhrGet(_3d0);}},execute:function(){var _3d1=this;var x="";if(arguments.length>0){x+="if(typeof paramTemp != 'undefined') {paramTemp = {'paramTemp':paramTemp};} else {var paramTemp={};}";}for(var i=0;i<arguments.length;i++){x+="if(typeof param"+i+" != 'undefined' ) {paramTemp['param"+i+"'] = param"+i+"; param"+i+" = null; } else {var param"+i+" = null;}";if(typeof arguments[i]=="string"){x+="param"+i+"='"+arguments[i].replace(/\'/g,"\\'").replace(/\"/g,"\\\"")+"';";}else{x+="param"+i+"="+arguments[i]+";";}}x=x+_3d1.content;for(var i=0;i<arguments.length;i++){x+="if(typeof paramTemp['param"+i+"'] != 'undefined'){param"+i+" = paramTemp['param"+i+"'];} else {delete param"+i+";}";}if(arguments.length>0){x+="if(typeof paramTemp != 'undefined' && typeof paramTemp['paramTemp'] != 'undefined') { paramTemp =  paramTemp['paramTemp']} else {delete paramTemp;}";}try{dojo.eval(x);}catch(e){console.error("An error occured while executing the script, "+e);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.MultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.MultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.MultiSelect");dojo.declare("com.ibm.btt.dijit.MultiSelect",[com.ibm.btt.dijit.AbstractWidgetMixin,dijit.form.MultiSelect],{labelFieldForSubmit:"label",valueFieldForSubmit:"value",width:"",baseClass:"bttMultiSelect",buildRendering:function(){this.inherited(arguments);dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_disabled",node["disabled"]);}});},postCreate:function(){this.inherited(arguments);if(this.width!=""){dojo.style(this.domNode,"width",this.width);}},_getValueAttr:function(){return this.getSelected().map(dojo.hitch(this,function(n){var _3d2={};_3d2[this.labelFieldForSubmit]=n.label||n.innerText;_3d2[this.valueFieldForSubmit]=n.value;return _3d2;}));},_setDisabledAttr:function(_3d3){var r=this.readOnly;dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_disabled",_3d3);node["disabled"]=_3d3||r;}});this.inherited(arguments);dojo.toggleClass(this.domNode,"bttMultiSelectDisabled dijitDisabled",_3d3);this.domNode.disabled=_3d3||this.readOnly;},_setReadOnlyAttr:function(_3d4){var d=this.disabled;dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_readOnly",_3d4);node["disabled"]=_3d4||d||dojo.attr(node,"_disabled");}});this.inherited(arguments);dojo.toggleClass(this.domNode,"bttMultiSelectReadOnly dijitReadOnly",_3d4);this.domNode.disabled=_3d4||this.disabled;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckedMultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.CheckedMultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.CheckedMultiSelect");dojo.declare("com.ibm.btt.dijit.CheckedMultiSelect",[com.ibm.btt.dijit.AbstractWidgetMixin,dojox.form.CheckedMultiSelect],{labelFieldForSubmit:"label",valueFieldForSubmit:"value",width:"",_lastFocusedOption:null,postCreate:function(){this.inherited(arguments);if(this.width!=""){dojo.style(this.domNode,"width",this.width);}},_setDisabledAttr:function(_3d5){dojo.forEach(this.getOptions(),function(node){if(node){node["disabled"]=_3d5;}});this.inherited(arguments);},_setReadOnlyAttr:function(_3d6){this.inherited(arguments);dojo.toggleClass(this.domNode,"dojoxMultiSelectReadOnly dijitReadOnly",_3d6);},onAfterAddOptionItem:function(item,_3d7){item.set("readOnly",this.readOnly);item.set("disabled",this.disabled);dojo.attr(item.checkBox.focusNode,"tabIndex",this.tabIndex);item.connect(item,"onFocus",dojo.hitch(this,function(){if(this._lastFocusedOption){dojo.style(this._lastFocusedOption,"border","dotted 0px gray");}this._lastFocusedOption=item.labelNode;if(!(this.disabled||this.readOnly)){dojo.style(this._lastFocusedOption,"border","dotted 1px gray");}}));},onBlur:function(){this.inherited(arguments);if(this._lastFocusedOption){dojo.style(this._lastFocusedOption,"border","dotted 0px gray");}},_getValueAttr:function(){var opts=this.getOptions();var _3d8=dojo.filter(opts,function(n){return n.selected;});return dojo.map(_3d8,dojo.hitch(this,function(i){var _3d9={};_3d9[this.labelFieldForSubmit]=i.label||i.innerText;_3d9[this.valueFieldForSubmit]=i.value;return _3d9;}));},_setHintAttr:function(_3da){this.hint=_3da;var node=this.domNode;node.title=StringUtil.removeWarp(this.getI18NString(_3da));}});}if(!dojo._hasResource["com.ibm.btt.dijit.EnhancedMultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.EnhancedMultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.EnhancedMultiSelect");dojo.declare("com.ibm.btt.dijit.EnhancedMultiSelect",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/Ems.html","<div class=\"enhancedMultiSelect\">\r\n\t\t<div><span dojoAttachPoint=\"labelNode\" class=\"enhancedMultiSelectLabel\">1 of 10 selected</span></div>\r\n\t\t<div dojoAttachPoint=\"buttonNode\" class=\"enhancedMultiSelectButton\"><span class=\"enhancedMultiSelectSelAll\" data-dojo-attach-event=\"ondijitclick:_selectAll\" tabindex=\"${tabIndex}\">Select All</span>\r\n\t\t\t <span class=\"enhancedMultiSelectUnSel\" data-dojo-attach-event=\"ondijitclick:_unselectAll\" tabindex=\"${tabIndex}\">UnSelect All</span>\r\n\t\t\t <span class=\"enhancedMultiSelectInvert\" data-dojo-attach-event=\"ondijitclick:_invertSelection\" tabindex=\"${tabIndex}\">Invert Selection</span></div>\r\n\t\t<div><div multiple=\"true\" name=\"${dataName}\" tabindex=\"${tabIndex}\" labelFieldForSubmit=\"${labelFieldForSubmit}\"  valueFieldForSubmit=\"${valueFieldForSubmit}\" dojoType=\"com.ibm.btt.dijit.CheckedMultiSelect\"  dojoAttachPoint=\"wrapperDiv\"></div></div>\r\n</div>\r\n"),widgetsInTemplate:true,width:"",dataName:"",value:null,labelFieldForSubmit:"label",valueFieldForSubmit:"value",disabled:false,readOnly:false,tabIndex:0,buildRendering:function(){this.inherited(arguments);this.wrapperDiv.set("disabled",this.disabled);this.wrapperDiv.set("readOnly",this.readOnly);},postCreate:function(){this.inherited(arguments);this.wrapperDiv.addOption(dojo.map(this.srcNodeRef.options,function(o){return {label:o.text,value:o.value,selected:o.selected,disabled:o.disabled};}));this.value=this.wrapperDiv.get("value");if(this.width!=""){dojo.style(this.domNode,"width",this.width);dojo.style(this.wrapperDiv.domNode,"width",this.width);}this.connect(this.wrapperDiv,"onChange",dojo.hitch(this,function(){this.onChange();}));this.connect(this.wrapperDiv,"_updateSelection",dojo.hitch(this,function(i){var fil=dojo.filter(this.wrapperDiv.getOptions(),function(item){return item.selected===true;});this.labelNode.innerHTML=fil.length+" of "+this.wrapperDiv.getOptions().length+" selected";}));},_setDisabledAttr:function(_3db){this.disabled=_3db;this.wrapperDiv.set("disabled",_3db);dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButton",!(this.disabled||this.readOnly));dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButtonDisabled",this.disabled||this.readOnly);},_setReadOnlyAttr:function(_3dc){this.readOnly=_3dc;this.wrapperDiv.set("readOnly",_3dc);dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButton",!(this.disabled||this.readOnly));dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButtonDisabled",this.disabled||this.readOnly);},_selectAll:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3dd){if(!_3dd.disabled){_3dd.selected=true;}});this.wrapperDiv._updateSelection();}},_unselectAll:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3de){if(!_3de.disabled){_3de.selected=false;}});this.wrapperDiv._updateSelection();}},_invertSelection:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3df){if(!_3df.disabled){_3df.selected=!_3df.selected;}});this.wrapperDiv._updateSelection();}},_getValueAttr:function(){this.value=this.wrapperDiv.get("value");return this.value;},getValueByIndex:function(_3e0){var _3e1=this.get("value");if(_3e1&&_3e0<_3e1.length){return _3e1[_3e0][this.valueFieldForSubmit];}},getValueLength:function(){var _3e2=this.get("value");if(_3e2){return _3e2.length;}},onChange:function(){}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalConfigurationUtil"]){dojo._hasResource["com.ibm.btt.util.GlobalConfigurationUtil"]=true;dojo.provide("com.ibm.btt.util.GlobalConfigurationUtil");dojo.getObject("com.ibm.btt.util.GlobalConfigurationUtil",true);(function(){com.ibm.btt.util.GlobalConfigurationUtil={getValue:function(key,_3e3){var v=this.values[key];v=(v!==undefined?v:_3e3);return v;},setValue:function(key,_3e4){this.values[key]=_3e4;},values:{}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.WebMessage"]){dojo._hasResource["com.ibm.btt.dijit.WebMessage"]=true;dojo.provide("com.ibm.btt.dijit.WebMessage");if(dojo.getObject("com.ibm.btt.WebMessageEngine")==undefined){dojo.setObject("com.ibm.btt.WebMessageEngine",{defered:false,initWebMsg:function(){if(this.defered){return this.defered;}var gcfg=com.ibm.btt.util.GlobalConfigurationUtil;this.privateTopic=gcfg.getValue("PrivateTopic","/btt/private/");this.broadcastTopic=gcfg.getValue("BroadcastTopic","/btt/broadcast");var _3e5=gcfg.getValue("WebMsgServlet","bttwebmsg");this.defered=dojox.cometd.init(_3e5);console.debug("initWebMsg @ "+_3e5);return this.defered;}});}dojo.declare("com.ibm.btt.dijit.WebMessage",dijit._Widget,{uid:"",isBroadcast:false,topics:[],_subscribedTopics:[],_wme:dojo.getObject("com.ibm.btt.WebMessageEngine"),constructor:function(){this.uid="";this.isBroadcast=false;this.topics=[];this._subscribedTopics=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,"display","none");var def=this._wme.initWebMsg();if(this.uid!=""){def=def.then(dojo.hitch(this,this.subscribe,this._wme.privateTopic+this.uid));}if(this.isBroadcast){def=def.then(dojo.hitch(this,this.subscribe,this._wme.broadcastTopic));}for(var i=0;i<this.topics.length;i++){def=def.then(dojo.hitch(this,this.subscribe,this.topics[i]));}},publishMsg:function(_3e6,msg){console.debug("WebMessage.publish message["+msg+"] @ topic : "+_3e6);return dojox.cometd.publish(_3e6,dojo.fromJson(msg));},sendPrivateMsg:function(uid,msg){this.publishMsg(this._wme.privateTopic+uid,msg);},broadcastMsg:function(msg){this.publishMsg(this._wme.broadcastTopic,msg);},subscribe:function(_3e7){console.debug("WebMessage.subscribe topic : "+_3e7);if(dojo.indexOf(this._subscribedTopics,_3e7)<0){this._subscribedTopics.push(_3e7);return dojox.cometd.subscribe(_3e7,this,this._onWebMessage);}return false;},unsubscribe:function(_3e8){console.debug("WebMessage.unsubscribe topic : "+_3e8);var i=dojo.indexOf(this._subscribedTopics,_3e8);if(i>-1){delete this._subscribedTopics[i];return dojox.cometd.unsubscribe(_3e8,this,this._onWebMessage);}return false;},_onWebMessage:function(_3e9){console.debug("WebMessage._onWebMessage topic : "+_3e9.channel);console.debug("WebMessage._onWebMessage message : "+dojo.toJson(_3e9.data));this.onWebMessage(_3e9);},onWebMessage:function(_3ea){},destroy:function(){while(this._subscribedTopics&&this._subscribedTopics.length>0){dojox.cometd.unsubscribe(this._subscribedTopics.pop(),this,this._onWebMessage);}this._subscribedTopics=undefined;console.debug("WebMessage.destroy : "+this.id);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]){dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]=true;dojo.provide("com.ibm.btt.event._AccessKeyMixin");dojo.declare("com.ibm.btt.event._AccessKeyMixin",null,{_registeredKeyMaps:{},_globalKeyHandler:null,constructor:function(){this._connectKeyEvents();},_debugKeyState:function(evt){if(dojo.config.isDebug){console.debug("keyCode : "+evt.keyCode);console.debug("altKey : "+evt.altKey);console.debug("ctrlKey : "+evt.ctrlKey);console.debug("shiftKey : "+evt.shiftKey);console.debug("metaKey : "+evt.metaKey);}},_connectKeyEvents:function(){_globalKeyHandler=dojo.connect(document,"onkeydown",this,this._onKeyDown);},_onKeyDown:function(evt){var _3eb=this._checkKeys(evt);if(_3eb&&_3eb.onKeyDown){if(_3eb.onKeyDown(evt)===false){dojo.stopEvent(evt);if(dojo.isIE<9){try{evt.keyCode=0;}catch(e){}}return 0;}}return evt.keyCode;},_checkKeys:function(evt){for(var _3ec in this._registeredKeyMaps){var _3ed=this._registeredKeyMaps[_3ec];if(_3ed.keys.keyCode==evt.keyCode&&((undefined==_3ed.keys.ctrlKeymetaKey)||(_3ed.keys.ctrlKeymetaKey==(evt.ctrlKey||evt.metaKey)))&&((undefined==_3ed.keys.altKey)||(_3ed.keys.altKey==evt.altKey))&&((undefined==_3ed.keys.shiftKey)||(_3ed.keys.shiftKey==evt.shiftKey))){return _3ed;}}return null;},registerKeys:function(url){if(url){var _3ee={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadKeys"),error:dojo.hitch(this,"_loadKeysError",url)};dojo.xhrGet(_3ee);}else{console.error("The argument can not be null.");}},_loadKeys:function(_3ef){if(_3ef){for(var i=0;i<_3ef.length;i++){var _3f0=_3ef[i];if(_3f0&&_3f0.name&&_3f0.onKeyDown){this._registeredKeyMaps[_3f0.name]=_3f0;}}}},_loadKeysError:function(url,_3f1){console.error("Fail to load the condition from : "+url);console.error("  Error : "+_3f1);},destroy:function(){this.inherited(arguments);if(_globalKeyHandler!=null){dojo.disconnect(_globalKeyHandler);}}});}if(!dojo._hasResource["com.ibm.btt.event._EventMixin"]){dojo._hasResource["com.ibm.btt.event._EventMixin"]=true;dojo.provide("com.ibm.btt.event._EventMixin");dojo.declare("com.ibm.btt.event._EventMixin",null,{_handlers:{},hashPos:0,constructor:function(){window.onhashchange=this.hashChangeHandler;},hashChangeHandler:function(){console.log(">>>>> Hash changed: ",location.hash);var _3f2=Engine.getInstance().parseHash(location.hash);if(Engine.getInstance().hashPos>_3f2){if(Engine.getInstance().backward(window.event)===false){console.log(">>>>> Reject Backward Hash change: ",location.hash);location.hash=Engine.getInstance().hashPos;}else{console.log(">>>>> Allow Backward Hash change: ",location.hash);return;}}else{if(window.engine.hashPos<_3f2){if(Engine.getInstance().forward(window.event)===false){console.log(">>>>> Reject Forward Hash change: ",location.hash);location.hash=Engine.getInstance().hashPos;}else{console.log(">>>>> Allow Forward Hash change: ",location.hash);return;}}}},updateHash:function(hash){console.log(">>>>> Update Hash ",location.hash);window.onhashchange=null;this.hashPos++;location.hash=this.hashPos;window.onhashchange=this.hashChangeHandler;},parseHash:function(hash){if(hash==null||hash==""){console.log(">>>>> Invalid Hash Found, return 0 instead: ",location.hash);return 0;}if(hash.charAt(0)!="#"){alert("Error: unexpected hash: "+hash);return 0;}var pos=parseInt(hash.substring(1),10);if(isNaN(pos)){alert("Error: unexpected hash: "+hash);return 0;}return pos;},registerHandler:function(url){if(url){var _3f3={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadHandler"),error:dojo.hitch(this,"_loadHandlerError",url)};dojo.xhrGet(_3f3);}else{console.error("The argument can not be null.");}},_loadHandler:function(_3f4){if(_3f4){for(var i=0;i<_3f4.length;i++){var h=_3f4[i];if(h&&h.name&&h.handler){if(h.name==="forward"){this.forward=dojo.hitch(this,h.handler);}else{if(h.name==="backward"){this.backward=dojo.hitch(this,h.handler);}else{if(h.name==="refresh"){this.refresh=dojo.hitch(this,h.handler);}else{if(h.name==="leave"){this.leave=h.handler;window.onbeforeunload=this.leave;}}}}}}}},_loadHandlerError:function(url,_3f5){console.error("Fail to load the navigation handler on "+url+", error : "+_3f5);},forward:function(evt){},backward:function(evt){},refresh:function(evt){},leave:function(evt){}});}if(!dojo._hasResource["com.ibm.btt.event.ECALoader"]){dojo._hasResource["com.ibm.btt.event.ECALoader"]=true;dojo.provide("com.ibm.btt.event.ECALoader");dojo.declare("com.ibm.btt.event.ECALoader",dijit._Widget,{prefix:"",url:"",_ruleEvents:[],postCreate:function(){this.inherited(arguments);this._ruleEvents=[];this.loadECA();},loadECA:function(){var THIS=this;dojo.xhrPost({url:this.url,handleAs:"json",load:function(_3f6){dojo.forEach(_3f6,function(rule){if(THIS.prefix!=""&&rule){rule.prefix=THIS.prefix;dojo.forEach(rule.evts,function(_3f7){if(_3f7){_3f7.id=THIS.prefix+"_"+_3f7.id;}if(_3f7.repeatAt){_3f7.repeatAt=THIS.prefix+"_"+_3f7.repeatAt;}});if(rule.repeatCondAt){rule.repeatCondAt=THIS.prefix+"_"+rule.repeatCondAt;}if(rule.repeatActionAt){rule.repeatActionAt=THIS.prefix+"_"+rule.repeatActionAt;}}});dojo.addOnLoad(function(){if(Engine.getInstance() instanceof com.ibm.btt.event.NavigationEngine){Engine.getInstance().registerECARules(_3f6,null,THIS._ruleEvents);}else{Engine.getInstance().registerRules(_3f6,null,THIS._ruleEvents);}});},error:function(_3f8,args){console.error("Can't load ECA from "+args.url);console.error(_3f8);}});},destroy:function(){while(this._ruleEvents&&this._ruleEvents.length>0){try{dojo.disconnect(this._ruleEvents.pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}this._ruleEvents=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _3f9={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_3f9);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_3fa){console.error("Fail to load the condition on "+url+", error : "+_3fa);},executeCond:function(){var name=arguments[0];var args=[];var _3fb=Number(arguments.length);var i=1;while(i<_3fb){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin,com.ibm.btt.event._AccessKeyMixin,com.ibm.btt.event._EventMixin],{monitor:null,_ruleEvents:{},_ruleMaps:{},setMonitor:function(_3fc){this.monitor=_3fc;},registerRules:function(_3fd,_3fe,_3ff){this._formOnLoaded=[];for(var i=0;i<_3fd.length;i++){if(_3fd[i].evts){for(var j=0;j<_3fd[i].evts.length;j++){this._registerEvent(_3fd[i],_3fd[i].evts[j],_3fe,_3ff);}}if(_3fd[i].type&&_3fd[i].type=="AG"){this._ruleMaps[_3fd[i].name]=_3fd[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}delete this._formOnLoaded;this._formOnLoaded=undefined;},_getWidget:function(id){if(id.lastIndexOf(".")==-1){return dijit.byId(id);}else{var _400=id.substring(0,id.indexOf("."));var _401=id.substring(id.indexOf(".")+1,id.length);obj=dijit.byId(_400);if(obj&&obj.getWidget){return obj.getWidget(_401);}else{return null;}}},_registerEvent:function(rule,_402,_403,_404){var size=_402.repeatAt?dijit.byId(_402.repeatAt).get("size"):1;for(var i=0;i<size;i++){if(_402.id.lastIndexOf(".")==-1){var _405=_402.id+(_402.repeatAt?"_"+i:"");}else{var _406=_402.id.substring(0,_402.id.indexOf("."));var _407=_402.id.substring(_402.id.indexOf("."),_402.id.length);var _405=_406+(_402.repeatAt?"_"+i:"")+_407;}var obj=this._getWidget(_405);if(!obj){obj=dojo.byId(_405);}if(!obj){console.error("Failed to register event[name="+rule.name+"] because cannot find widget[id="+_405+"]");console.warn("  parent widget must provide getWidget(id) to support subwidget function.");continue;}var _408=dojo.connect(obj,_402.e,this,(function(_409){return function(evt){this.idxPostfix=_402.repeatAt?"_"+_409:null;if(_402.repeatAt){dijit.byId(_402.repeatAt).setCurrentPanelIndex(_409);}if(this.monitor!=null){this.monitor.monitorStartRule(_402,rule);}var _40a=!_402.repeatAt&&rule.repeatCondAt?dijit.byId(rule.repeatCondAt).get("size"):1;for(var j=0;j<_40a;j++){if(!_402.repeatAt&&rule.repeatCondAt){this.idxPostfix="_"+j;dijit.byId(rule.repeatCondAt).setCurrentPanelIndex(j);}var _40b=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_402,rule,_40b);}var _40c=!_402.repeatAt&&!rule.repeatCondAt&&rule.repeatActionAt?dijit.byId(rule.repeatActionAt).get("size"):1;for(var m=0;m<_40c;m++){if(!_402.repeatAt&&!rule.repeatCondAt&&rule.repeatActionAt){this.idxPostfix="_"+m;dijit.byId(rule.repeatActionAt).setCurrentPanelIndex(m);}this._executeAction(_40b,rule,evt);}}if(this.monitor!=null){this.monitor.monitorEndRule(_402,rule);}};})(i));if(_402.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}}if(!_403){_403="pageDefaultDivId";}if(!this._ruleEvents[_403]){this._ruleEvents[_403]=[];}if(_404){_404.push(_408);}else{this._ruleEvents[_403].push(_408);}},_executeCondition:function(rule,evt){var _40d=true;if(rule&&rule.cond){try{_40d=rule.cond.call(this,evt,rule);if(_40d){_40d=true;}else{_40d=false;}}catch(e){_40d=undefined;console.error("An error occured while testing the ECA condition. Terminate this ECA."+e.toString());}}return _40d;},_executeAction:function(_40e,rule,evt){if(_40e===true){if(rule.onTrue){try{rule.onTrue.call(this,evt,rule);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(_40e===false){if(rule.onFalse){try{rule.onFalse.call(this,evt,rule);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}}},executeAG:function(name,evt){if(name){var rule=this._ruleMaps[name];if(rule){var _40f=!!this.idxPostfix;if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _410=!_40f&&rule.repeatCondAt?dijit.byId(rule.repeatCondAt).get("size"):1;for(var j=0;j<_410;j++){if(!_40f&&rule.repeatCondAt){this.idxPostfix="_"+j;dijit.byId(rule.repeatCondAt).setCurrentPanelIndex(j);}var _411=this._executeCondition(rule,evt);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_411);}var _412=!_40f&&!rule.repeatCondAt&&rule.repeatActionAt?dijit.byId(rule.repeatActionAt).get("size"):1;for(var m=0;m<_412;m++){if(!_40f&&!rule.repeatCondAt&&rule.repeatActionAt){this.idxPostfix="_"+m;dijit.byId(rule.repeatActionAt).setCurrentPanelIndex(m);}this._executeAction(_411,rule,evt);}}if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(_413){if(!(_413&&this._ruleEvents&&this._ruleEvents[_413])){return;}var _414=this._ruleEvents[_413];while(_414.length>0){try{dojo.disconnect(_414.pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}},clearAllRules:function(){for(var name in this._ruleEvents){if(name&&this._ruleEvents[name]){while(this._ruleEvents[name].length>0){try{dojo.disconnect(this._ruleEvents[name].pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}this._ruleEvents[name]=undefined;}}this._ruleEvents={};this._ruleMaps={};},setPW:function(id,_415,_416){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_415,_416);}var obj=this._getWidget(id);if("xValidations"==_415&&obj&&typeof obj.idxPostfix!="undefined"){var _417=[];for(var m=0;m<_416.length;m++){if(_416[m].repeatCondAt&&this.idxPostfix==null){var _418=dijit.byId(_416[m].repeatCondAt);for(var j=0;j<_418.get("size");j++){var _419={};_419.name=_416[m].name+"_"+j;_419.cond=(function(_41a,_41b){return function(){this.idxPostfix=_41a;return _41b.call(this);};})("_"+j,_416[m].cond);_419.widgets=[];for(var i=0;i<_416[m].widgets.length;i++){if(dojo.isArray(_416[m].widgets[i])){var _41c=_416[m].widgets[i][0];if(_41c.lastIndexOf(".")==-1){var _41d=_41c+"_"+j;}else{var _41e=_41c.substring(0,_41c.indexOf("."));var _41f=_41c.substring(_41c.indexOf("."),_41c.length);var _41d=_41e+"_"+j+_41f;}_419.widgets.push(_41d);}else{_419.widgets.push(_416[m].widgets[i]);}}_419.hint=_416[m].hint;_419.repeatCondAt=_416[m].repeatCondAt;_417.push(_419);}}else{if(_416[m].repeatCondAt&&this.idxPostfix){obj.idxPostfix=this.idxPostfix;_417.push(_416[m]);}else{_417.push(_416[m]);}}}for(var z=0;z<_417.length;z++){_416[z]=_417[z];}}var dn=undefined;if(!obj){dn=dojo.byId(id);}if(!obj&&!dn){console.error("Failed to set property["+_415+"] because cannot find the widget[id="+id+"]");return undefined;}if(obj){return obj.set(_415,_416);}else{if(dn){return dojo.attr(dn,_415,_416);}}},getPW:function(id,_420){var obj=this._getWidget(id);var dn=undefined;if(!obj){dn=dojo.byId(id);}if(!obj&&!dn){if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_420,"ERROR[widget=null]");}console.error("Failed to get property["+_420+"] because cannot find the widget[id="+id+"]");return undefined;}var _421=undefined;if(obj){_421=obj.get(_420);}else{if(dn){_421=dojo.attr(dn,_420);}}if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_420,_421);}return _421;},getW:function(id){var obj=this._getWidget(id);if(!obj){console.error("Failed to find widget[id="+id+"]");return undefined;}return obj;},runWF:function(id,_422,_423){var _424=this._getWidget(id);if(!_424){if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_422,args,"ERROR[widget=null]");}console.error("Failed to run function["+_422+"] because cannot find the widget[id="+id+"]");return undefined;}var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _425=undefined;var er=null;try{_425=_424[_422].apply(_424,args);}catch(e){er="An error occured while running function["+_422+"]. "+e.toString();}if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_422,args,er?"ERROR[exception]":_425);}if(er){console.error(er);}return _425;},runFunction:function(obj,func,args){return func.apply(obj,args);},runInlineScript:function(obj,func){var _426;try{_426=this.runFunction(obj,func,[]);}catch(e){_426=undefined;console.error("exception @ Engine.runInlineScript:"+e);}return _426;},stopEvent:function(evt){dojo.stopEvent(evt);return false;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});(function(){function _427(node){var nl=node.children;for(var i=0;i<nl.length;i++){_427(nl.item(i));}if(node.tagName!="DIV"){return;}if(dojo.hasClass(node,"BTTCellStyle")){return _428(node);}if(dojo.hasClass(node,"BTTRowStyle")){return _429(node);}if(dojo.hasClass(node,"BTTTableStyle")){return _42a(node);}};function _42a(node){var _42b=node.attributes;var nat=[];for(var i=0;i<_42b.length;i++){var ar=_42b[i];if(ar.specified){nat[ar.nodeName]=ar.nodeValue;}}var _42c=dojo.create("table",nat);_42c.style.cssText=node.style.cssText;var _42d=dojo.doc.createElement("tbody");while(node.firstChild){_42d.appendChild(node.firstChild);}_42c.appendChild(_42d);node.replaceNode(_42c);};function _429(node){_42e(node,"tr");};function _428(node){_42e(node,"td");};function _42e(node,_42f){var _430=node.attributes;var nat=[];for(var i=0;i<_430.length;i++){var ar=_430[i];if(ar.specified){nat[ar.nodeName]=ar.nodeValue;}}var nn=dojo.create(_42f,nat);nn.style.cssText=node.style.cssText;while(node.firstChild){nn.appendChild(node.firstChild);}node.replaceNode(nn);};if(dojo.isIE&&dojo.isIE<8){dojo.parser.fp_dojo_parser_parse=dojo.parser.parse;dojo.parser.parse=function(_431,args){var root=(_431&&_431.rootNode)?_431.rootNode:_431;if(root==undefined){root=dojo.body();}_427(root);return this.fp_dojo_parser_parse(_431,args);};}})();}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_containerNode:null,_sessionId:"",_dialog:null,constructor:function(){var _432=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_432.postCreate();_432.onLoad();dojo.query("script",dojo.body()).forEach(dojo.hitch(this,function(_433){if(_433.src&&dojo.attr(_433,"data-btt-eca")==="true"){var urls=_433.src.split("/");urls=urls[urls.length-1];urls=urls.substring(0,urls.indexOf("."));_432._registerECAEvent(urls,_433.src);}}));});}},postCreate:function(){var head=document.getElementsByTagName("head")[0].innerHTML;var _434=head.match(/<title>(.*)<\/title>/i);if(_434){var _435=StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_434[1]));document.title=_435;}this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("print",dojo.hitch(this,this.printHandler));this.registerCommand("render_sub_page",dojo.hitch(this,this.renderSubPageHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});dojo.addOnLoad(dojo.hitch(this,function(){this.onLoad();}));},setRootContainer:function(_436){var _437=this._getNodeByContainerId(_436);if(_437){this._containerNode=_437;}},launchNewFlow:function(_438,_439){if(!_438){return;}if(!this._sessionId){this.sessionId=this._findSessionId();if(!this._sessionId){return;}}var _43a={"dse_sessionId":this._sessionId};if(_438){_43a["dse_operationName"]=_438;}_43a["dse_nextEventName"]="start";if(this._requestData&&this._requestData.data["dse_pageId"]){_43a["dse_pageId"]=this._requestData.data["dse_pageId"];}else{_43a["dse_pageId"]="-1";}_43a["dse_applicationId"]="-1";this._submitData(_43a,this._getNodeByContainerId(_439));},registerRules:function(_43b,_43c){},registerECARules:function(_43d,_43e,_43f){return com.ibm.btt.event.Engine.prototype.registerRules.call(this,_43d,_43e,_43f);},_findSessionId:function(){var form=dojo.query("form[widgetId]",dojo.body()).map(dijit.byNode)[0];if(!form){return undefined;}var _440=dojo.fromJson(form.bttParams);return _440["dse_sessionId"];},changeFlowEvent:function(_441,_442){if(!_441){return;}var node=this._getNodeByContainerId(_442);if(!node){node=this._containerNode;}var form=dojo.query("form[widgetId]",node).map(dijit.byNode)[0];if(!form){return;}dojo.forEach(form.getDescendants(),function(_443){if(_443.onFormSubmit){_443.onFormSubmit();}});if(form.onFormSubmit){form.onFormSubmit();}var _444=dojo.fromJson(form.bttParams);_444["dse_nextEventName"]=_441;var data=form.get("value");this._submitData(dojo.mixin(data,_444),node);},_getNodeByContainerId:function(_445){var node=null;if(_445){var _446=dijit.byId(_445);if(_446&&_446.containerNode){node=_446.containerNode;}else{_446=dojo.byId(_445);if(_446){node=_446;}}}return node;},onLoad:function(e,node){this._delegateAllFormSubmit(node);dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_447){this.url=_447;},registerCommand:function(type,_448){this._commandMap[type]=_448;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(_449){var node;var _44a=this._getNodeByContainerId(_449);if(_44a){node=_44a;}else{node=this._containerNode;}if(node){this._destroyDialog();dojo.forEach(this._queryAllWidgets(node),function(_44b){if(window[_44b.id]){window[_44b.id]=undefined;}try{_44b.destroy();}catch(e){console.debug("An error occured while destroying the widget[id="+_44b.id+"]. Error:"+e);}});dojo.empty(node);}else{this._destroyDialog();this._destroyCover();dojo.forEach(this._queryAllWidgets(),function(_44c){if(window[_44c.id]){window[_44c.id]=undefined;}try{_44c.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;this._containerNode=dojo.create("div",{style:"width:100%;height:100%"},dojo.body(),"last");}if(com.ibm.btt.dijit.keyboards.instances){var _44d=com.ibm.btt.dijit.keyboards.instances;for(var i=0;i<_44d.length;i++){if(_44d[i]&&_44d[i].destroy){_44d[i].destroy();}}}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(node){var _44e=this;dojo.forEach(this._queryAllWidgets(node),function(_44f){if(_44f.type!="undefined"&&(_44f.type=="save"||_44f.type=="cancel")){if(!_44f.hasEventBundle){var _450=_44f._onButtonClick;_44f._onButtonClick=dojo.hitch(_44e,_44e._onButtonClick,_44f,_450);}}if(_44f.domNode.nodeName==="A"){if(!_44f.hasEventBundle){var _451=_44f.onClick;_44f.onClick=dojo.hitch(_44e,_44e._onLinkClick,_44f,_451);}}if(_44f.domNode.nodeName==="FORM"){_44f._rawOnSubmit=_44f.onSubmit;_44f.onSubmit=dojo.hitch(_44f,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_44f.validateOnSubmit){if(!_44f.isValid()||!_44f.xValid){return false;}}var _452=_44f._querySubmitButton(e);dojo.forEach(_44f.getDescendants(),function(_453){if(_453.onFormSubmit){try{_453.launchNew=false;if(_453 instanceof com.ibm.btt.dijit.Grid){var _454=dojo.fromJson(_453.bttParam4Link);var _455;if(_452!=undefined){if(_452.bttParams["dse_operationName"]!=undefined){_455=_452.bttParams;}else{_455=dojo.fromJson(_452.bttParams);}if(_454["dse_operationName"]!=_455["dse_operationName"]){_453.launchNew=true;}}}_453.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});if(_44f.onFormSubmit){_44f.onFormSubmit();}_44e._submitFormData(_44f,_452);return false;});}});},_checkNewLaunch:function(form,_456){dojo.forEach(form.getDescendants(),function(_457){if(_457.onFormSubmit){if(_457 instanceof com.ibm.btt.dijit.Grid){_457.launchNew=false;var _458=typeof _457.bttParam4Link=="string"?dojo.fromJson(_457.bttParam4Link):_457.bttParam4Link;var _459=typeof _456.bttParams=="string"?dojo.fromJson(_456.bttParams):_456.bttParams;if(_458["dse_operationName"]!=_459["dse_operationName"]){_457.launchNew=true;}}}});},_onLinkClick:function(link,_45a,e){if(link.bttParams){dojo.stopEvent(e);if(link.get("target")!=="_blank"){var node=this._checkParentContainer(link.domNode);this._submitData(typeof link.bttParams=="string"?dojo.fromJson(link.bttParams):link.bttParams,node);}else{window.open(link.domNode.href);}return false;}else{if(link.action=="#"||!link.action){_45a.apply(link,[e]);}}},_onButtonClick:function(_45b,_45c,e){if(_45b.get("disabled")==false&&(_45b.type=="submit"||_45b.type=="cancel"||_45b.type=="save")){var form=_45b._getParentForm();if(form){form._clickedButton=_45b;}}else{var form=_45b._getParentForm();if(form){form._clickedButton=null;}}if(_45b.type=="save"&&_45b.get("disabled")==false){_45b._onClick(e);e.preventDefault();var form=_45b._getParentForm();this._checkNewLaunch(form,_45b);if(form&&_45b.bttParams){dojo.forEach(form.getDescendants(),function(_45d){if(_45d.onFormSubmit){_45d.onFormSubmit();}});if(form.onFormSubmit){form.onFormSubmit();}var node=this._checkParentContainer(_45b.domNode);this._submitData(dojo.mixin(form.get("validValue"),typeof _45b.bttParams=="string"?dojo.fromJson(_45b.bttParams):_45b.bttParams),node);}}else{if(_45b.type=="cancel"&&_45b.get("disabled")==false){_45b._onClick(e);e.preventDefault();if(_45b.bttParams){var node=this._checkParentContainer(_45b.domNode);this._submitData(typeof _45b.bttParams=="string"?dojo.fromJson(_45b.bttParams):_45b.bttParams,node);}}else{_45c.apply(_45b,[e]);}}},_checkParentContainer:function(node){var _45e=node;var _45f=null;while(_45e){if(dojo.hasClass(_45e,"divFlowContainer")){_45f=_45e;break;}_45e=_45e.parentNode;}if(_45f&&_45f.id){_45f=this._getNodeByContainerId(_45f.id);}return _45f;},_submitFormData:function(form,_460){if(_460&&_460.bttParams){var x=dojo.mixin(form.get("value"),typeof _460.bttParams=="string"?dojo.fromJson(_460.bttParams):_460.bttParams);x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;if(x["dse_nextEventName"]){x[AjaxUtil.constants.BTT_SUBMITFORMID]=form.get("id");}var node=this._checkParentContainer(_460.domNode);this._submitData(x,node);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),typeof form.bttParams=="string"?dojo.fromJson(form.bttParams):form.bttParams);x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;if(x["dse_nextEventName"]){x[AjaxUtil.constants.BTT_SUBMITFORMID]=form.get("id");}var node;if(_460){node=this._checkParentContainer(_460.domNode);}else{node=this._checkParentContainer(form.domNode);}this._submitData(x,node);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data,node){if(!data[AjaxUtil.constants.BTT_TIMEZONE]){data[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse,node),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _461;if(xhr){var _462=xhr.xhr.responseText;if(_462&&_462!=""){try{_462=dojo.fromJson(_462);if(_462["page"]){_461=_462["page"];}}catch(e){_461=_462;}}}if(!_461){if(e.message){_461=e.message;}else{_461="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_461;this._getCover().hide();},_handleFormResponse:function(node,e){var _463;if(this._commandMap[e["command"]]){try{_463=this._commandMap[e["command"]](e,node);}catch(ee){this._handleError("An error occured while excuting the handler:"+e["command"]+" error:"+ee);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["command"]+"'");}if(_463!==false){this._getCover().hide();}},createDialog:function(_464){var _465=new com.ibm.btt.dijit.Dialog(dojo.mixin({"title":"","closable":false},_464));return _465;},_adjustDialogPosition:function(data){var _466=dojo.window.getBox();var top=0;var left=0;var bb=dojo._getBorderBox(this._dialog.domNode);if(data.prop==undefined||data.prop.top==undefined){top=Math.floor(_466.t+(_466.h-bb.h)/2);}else{top=data.prop.top;}if(top<0){top=0;}if(data.prop==undefined||data.prop.left==undefined){left=Math.floor(_466.l+(_466.w-bb.w)/2);}else{left=data.prop.left;}if(left<0){left=0;}dojo.style(this._dialog.domNode,{left:left+"px",top:top+"px"});},_getDialog:function(data){if(!this._dialog){this._dialog=this.createDialog();this._dialog._position=function(){};this._dialog.eng=this;this._dialog.connect(this._dialog,"onCancel",function(){if(this.bttParams){this.eng._submitData(this.bttParams);}});this._dialog.startup();}var _467="auto";var _468="auto";var _469="";var _46a=false;var _46b=undefined;if(typeof (data.prop)!="undefined"){if(data.prop.height&&data.prop.height>50){_467=data.prop.height+"px";}if(data.prop.width&&data.prop.width>100){_468=data.prop.width+"px";}if(data.prop.title!=undefined){_469=data.prop.title;}_46a=data.prop.closable?true:false;if(_46a&&data.prop.bttParams!=undefined){_46b=data.prop.bttParams;}}data=undefined;dojo.style(this._dialog.containerNode,{"overflow":"auto","height":_467,"width":_468});if((_468+_467).indexOf("px")>0){this._dialog._size=function(){};}this._dialog.set("title",StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_469)));this._dialog.set("closable",_46a);this._dialog.bttParams=_46b;return this._dialog;},_destroyDialog:function(){if(this._dialog){delete this._dialog.eng;this._dialog.eng=undefined;delete this._dialog.bttParams;this._dialog.bttParams=undefined;try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){console.debug("exception @ _destroyDialog: "+e);}this._dialog=undefined;}},_getCover:function(){return ScreenCover.getInstance();},_destroyCover:function(){if(ScreenCover._instance){ScreenCover._instance.destroy();ScreenCover._instance=undefined;}},isECARuleFile:function(src,_46c){var _46d=function(src,_46e){var reg=new RegExp(_46e+"$");return reg.test(src);};return _46d(src,_46c+".js");},_afterPageLoaded:function(data,_46f){if(data["page_name"]){dojo.query("script",_46f.domNode).forEach(dojo.hitch(this,function(_470){this._initWidgetsLite(_470,_46f.domNode);if(_470.src&&this.isECARuleFile(_470.src,data["page_name"])){this._registerECAEvent(data["page_name"],_470.src);}}));}this.onLoad(data,_46f.domNode);},_WCONFIGP:/^\s*window\["dse_widgetsConfig"\]/,_initWidgetsLite:function(_471,_472){if(this._WCONFIGP.test(_471.innerHTML)){dojo.eval(_471.innerHTML);if(window.dse_widgetsConfig){for(var idx=window.dse_widgetsConfig.length-1;idx>=0;idx--){var _473=window.dse_widgetsConfig[idx];if(_473.id){try{var node=dojo.byId(_473.id);if(node){for(var p in _473){if(p&&p!="id"){node.setAttribute(p,_473[p]);}}}}catch(e){console.error(e);}}}window.dse_widgetsConfig=undefined;dojo.parser.parse(_472?_472:dojo.body());}}},_registerECAEvent:function(name,url,_474){var _475={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){this.registerECARules(window[name],_474);try{delete window[name];}catch(e){}}})};dojo.xhrGet(_475);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();this.clearRules();this._destroyDialog();if(dojo.isOpera){dojo.query("*").attr("tabIndex",-1);}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];var test=page.match(/locale:'(.*)'/);if(test){var _476=test[1];if(_476.length>=2){if(djConfig.locale!=_476||dojo.locale!=_476){var old1=djConfig.locale;var old2=dojo.locale;if(!this._loadedLocales){this._loadedLocales=[];}if(old1!=old2){this._loadedLocales.push(old1);this._loadedLocales.push(old2);}else{this._loadedLocales.push(old1);}djConfig.locale=_476;dojo.locale=_476;console.debug("djConfig.locale : "+old1);console.debug("dojo.locale : "+old2);console.debug("new locale : "+_476);for(var _477 in dojo._loadedModules){var _478=""+_477;var ms=_478.split(".nls.");if(ms&&ms.length>=2){if(!this._containsLocale(ms[1])&&_476!="ROOT"){try{dojo.requireLocalization(ms[0],ms[1],_476,"","", "");}catch(e){console.debug("Fail to load : "+_478+" "+_476);}}}}}}}var _479=this._getDialog(data);_479.set("content",page).then(dojo.hitch(this,this._afterPageLoaded,data,_479)).then(dojo.hitch(this,function(){_479.show();this._adjustDialogPosition(data);}));return _479;},renderPageHandler:function(data,node){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();var _47a;if(node){this.clearRules(node.id);this._disposeAllWidgets(node);_47a=node;}else{this.clearAllRules();this._disposeAllWidgets();_47a=this._containerNode;}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];var test=page.match(/locale:'(.*)'/);if(test){var _47b=test[1];if(_47b&&_47b.length>1){if(djConfig.locale!=_47b||dojo.locale!=_47b){var old1=djConfig.locale;var old2=dojo.locale;if(!this._loadedLocales){this._loadedLocales=[];}if(old1!=old2){this._loadedLocales.push(old1);this._loadedLocales.push(old2);}else{this._loadedLocales.push(old1);}djConfig.locale=_47b;dojo.locale=_47b;console.debug("djConfig.locale : "+old1);console.debug("dojo.locale : "+old2);console.debug("new locale : "+_47b);for(var _47c in dojo._loadedModules){var _47d=""+_47c;var ms=_47d.split(".nls.");if(ms&&ms.length>=2){if(!this._containsLocale(ms[1])&&_47b!="ROOT"){try{dojo.requireLocalization(ms[0],ms[1],_47b,"","", "");}catch(e){console.debug("Fail to load : "+_47d+" "+_47b);}}}}}var _47e=_47b.split("-");if(_47e&&_47e[0]){var _47f=_47e[0];var _480=document.getElementsByTagName("html")[0];if(_480.getAttribute("lang")){_480.setAttribute("lang",_47f);}if(_480.getAttribute("xml:lang")){_480.setAttribute("xml:lang",_47f);}}}}var _481=page.match(/<title>(.*)<\/title>/i);if(_481){var _482=StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_481[1]));console.debug("New page title is "+_482);document.title=_482;}_47a.innerHTML=page;if(!node){dojo.parser.parse(_47a);}else{dojo.parser.parse(_47a,{noStart:true});dojo.query("[widgetid]",_47a).forEach(function(node){var _483=node.getAttribute&&dijit.byId(node.getAttribute("widgetid"));if(_483&&dojo.isFunction(_483.startup)&&!_483._started){_483.startup();}});}this.updateHash();if(data["page_name"]){dojo.query("script",_47a).forEach(dojo.hitch(this,function(_484){this._initWidgetsLite(_484,this._containerNode);if(_484.src&&this.isECARuleFile(_484.src,data["page_name"])){this._registerECAEvent(data["page_name"],_484.src);}}));}this.onLoad(data,_47a);},_containsLocale:function(_485){if(this._loadedLocales){for(var i=0;i<this._loadedLocales.length;i++){var p1=dojo.i18n.normalizeLocale(this._loadedLocales[i]);var p2=p1.replace(/\-/g,"_");var p3=p2.substring(0,2);var p4="ROOT";if(_485.indexOf(p1)!==-1||_485.indexOf(p2)!==-1||_485.indexOf(p3)!==-1||_485.indexOf(p4)!==-1){return true;}}return false;}return false;},remoteFlowHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();var _486=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_486);if(_486.dse_remoteFlowID){this.url=_486.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_486.dse_RemoteAjaxOp_URL;}else{this.url=_486.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_486.dse_remote_parent_AjaxURL;}if(!_486[AjaxUtil.constants.BTT_TIMEZONE]){_486[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_486.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse,undefined),error:dojo.hitch(this,this._handleError)},_486);return false;},renderSubPageHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();for(var i=0;i<data.data.length;i++){var _487=data.data[i].divId;var node=this._getNodeByContainerId(data.data[i].divId);if(!node){return;}this.clearRules(data.data[i].divId);this._disposeAllWidgets(node);node.innerHTML=data.data[i].page;dojo.parser.parse(node,{noStart:true});dojo.query("[widgetid]",node).forEach(function(node){var _488=node.getAttribute&&dijit.byId(node.getAttribute("widgetid"));if(_488&&dojo.isFunction(_488.startup)&&!_488._started){_488.startup();}});if(data.data[i]["page_name"]){dojo.query("script",node).forEach(dojo.hitch(this,function(_489){if(_489.src&&this.isECARuleFile(_489.src,data.data[i]["page_name"])){this._registerECAEvent(data.data[i]["page_name"],_489.src,data.data[i].divId);}}));}this.onLoad(data,node);}},printHandler:function(data){var _48a=dojo.fromJson(data.page);var _48b=dojo.fromJson(_48a.bttParams);delete _48a.bttParams;var _48c=document.printApplet.printToDevice(dojo.toJson(_48a));if(_48c===true||_48c==="true"){_48b["dse_nextEventName"]="success";}else{_48b["dse_nextEventName"]="error";}this._submitData(_48b);},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._disposeAllWidgets();this._destroyCover();}});var Engine={};Engine.getInstance=function(){if(!Engine._instance){Engine._instance=new com.ibm.btt.event.NavigationEngine();}return Engine._instance;};Engine.setInstance=function(_48d){Engine._instance=_48d;};}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_48e,rule){},monitorStartRule:function(_48f,rule){},monitorEndRule:function(_490,rule){},monitorCondition:function(_491,rule,_492){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_493){},monitorCallFunctionAction:function(id,_494,_495){},monitorGetPropertyAction:function(id,_496,_497){},monitorSetPropertyAction:function(id,_498,_499){}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_49a,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_49a.id+"."+_49a.e);},monitorEndRule:function(_49b,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_49b.id+"."+_49b.e);},monitorCondition:function(_49c,rule,_49d){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_49d);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_49e){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_49e);},monitorCallFunctionAction:function(id,_49f,args,_4a0){if(typeof (_4a0)!="undefined"&&_4a0!=null){console.debug("    CallFunction Action : ",id+"."+_49f," , args=",args,", result=",_4a0);}else{console.debug("    CallFunction Action : ",id+"."+_49f," , args=",args);}},monitorGetPropertyAction:function(id,_4a1,_4a2){console.debug("    GetProperty Action : ",id+"."+_4a1+"=="+_4a2);},monitorSetPropertyAction:function(id,_4a3,_4a4){console.debug("    SetProperty Action : ",id+"."+_4a3+"="+_4a4);}});}if(!dojo._hasResource["com.ibm.btt.store.DataSource"]){dojo._hasResource["com.ibm.btt.store.DataSource"]=true;dojo.provide("com.ibm.btt.store.DataSource");if(dojo.getObject("com.ibm.btt.store.BTTDataStore")==undefined){dojo.setObject("com.ibm.btt.store.BTTDataStore",{url:"http://btt.cn.ibm.com",bttState:{dse_timezone:(-(new Date().getTimezoneOffset()/60)).toString(),dse_applicationId:"",dse_pageId:"-1",dse_sessionId:""},state:{},data:{},setData:function(data,id){this.data[id]=data;},setState:function(_4a5,id){this.updateBTTState(_4a5);this.state[id]=_4a5;},updateData:function(data,id){if(this.data[id]){dojo.mixin(this.data[id],data);}else{this.setData(data,id);}},_extractBTTState:function(data){var _4a6={};for(var f in data){if(f.substr(0,4)=="dse_"){_4a6[f]=data[f];delete data[f];}}return _4a6;},requestData:function(_4a7,id){var _4a8=_4a7.url||_4a7.action||(!_4a7.bttParams)?this.url:(_4a7.bttParams.dse_nextEventName?"Request":"Ajax");var _4a9={url:_4a8,sync:_4a7.sync||true,handleAs:"json",load:dojo.hitch(this,_4a7.loader||function(data,args){var _4aa=this._extractBTTState(data);this.updateState(_4aa,id);this.updateData(data,id);}),error:dojo.hitch(this,_4a7.error||function(e){console.error("@BTTDataStore.requestData.error(): "+e);}),timeout:_4a7.timeout||30000};if(_4a7.url){return dojo.dojo.xhrGet(_4a9);}var _4ab=_4a7.postData||{};dojo.mixin(_4ab,this.getState(id),this.bttState,_4a7.bttParams);if(_4a7.bttParams&&!_4a7.bttParams.dse_nextEventName){delete _4ab.dse_nextEventName;}dojo.mixin(_4a9,{headers:{requesttype:"ajax",rawdata:"true"},postData:dojo.toJson(_4ab)});return dojo.xhrPost(_4a9);},updateState:function(_4ac,id){this.updateBTTState(_4ac);if(this.state[id]){dojo.mixin(this.state[id],_4ac);}else{this.state[id]=_4ac;}},updateBTTState:function(_4ad){for(var sn in this.bttState){if(_4ad[sn]){this.bttState[sn]=_4ad[sn];delete _4ad[sn];}}},updateDataField:function(_4ae,_4af,id){if(this.data[id]){dojo.setObject(_4ae,_4af,this.data[id]);}else{this.data[id]={};dojo.setObject(_4ae,_4af,this.data[id]);}},updateStateAttr:function(_4b0,_4b1,id){if(this.state[id]){dojo.setObject(_4b0,_4b1,this.state[id]);}else{this.state[id]={};dojo.setObject(_4b0,_4b1,this.state[id]);}},getData:function(id){return this.data[id];},getState:function(id){return this.state[id];},getDataField:function(_4b2,id){return dojo.getObject(_4b2,false,this.data[id]);},getStateAttr:function(_4b3,id){return dojo.getObject(_4b3,false,this.state[id]);},_mapJSON:function(_4b4,dst,src,_4b5){for(var _4b6 in _4b4){var _4b7=_4b4[_4b6];if(dojo.isString(_4b7)&&_4b7.charAt(0)=="@"){var dv=dojo.getObject(_4b7.substr(1),false,src);dst[_4b6]=(dv!==undefined?dv:_4b7);}else{if(dojo.isFunction(_4b7)){dst[_4b6]=_4b7.call(src,src,_4b5);}else{if(dojo.isArray(_4b7)){var dv=[];dst[_4b6]=dv;this._mapJSON(_4b7,dv,src,_4b5);}else{if(dojo.isObject(_4b7)){var dv={};dst[_4b6]=dv;this._mapJSON(_4b7,dv,src,_4b5);}else{dst[_4b6]=_4b7;}}}}}},_mapJSONArray:function(_4b8,_4b9){var _4ba=[];for(var i=0;_4b8&&i<_4b8.length;i++){var item={};this._mapJSON(_4b9,item,_4b8[i],i);_4ba.push(item);}return _4ba;},_getDynamicDojoStore:function(_4bb,opts,id){return new dojo.store.Memory(dojo.mixin({data:[]},opts,{put:function(_4bc,_4bd){throw "no implementation";},add:function(_4be,_4bf){throw "no implementation";},remove:function(id){throw "no implementation";},query:function(_4c0,_4c1){if(_4c0.local){return dojo.store.util.QueryResults(this.queryEngine(_4c0,_4c1)(this.data));}var pd=dojo.mixin({},_4c0);var bsp=pd["BTT_STORE_PAG"]={fieldName:_4bb};var t=parseInt(_4c1.start);if(!isNaN(t)){bsp.start=t;}t=parseInt(_4c1.count);if(!isNaN(t)){bsp.count=t;}if(_4c1.sort!==null&&_4c1.sort!=undefined){bsp.sort=_4c1.sort.toString();}var _4c2=[];var _4c3=undefined;var _4c4={bttParams:dojo.mixin({},opts.bttParams,_4c1.bttParams),postData:pd,loader:function(data,args){this._extractBTTState(data);if(data[_4bb]){_4c2=data[_4bb];}else{_4c2=dojo.getObject(_4bb,false,data);}if(data&&data.BTT_STORE_PAG){_4c3=data.BTT_STORE_PAG.total;}}};this.requestData(_4c4,id);var _4c5=[];if(opts&&opts.mapOpt){_4c5=this._mapJSONArray(_4c2,opts.mapOpt);}_4c5.total=_4c3||_4c2.length;return dojo.store.util.QueryResults(_4c5);}}));},getDojoStore:function(_4c6,opts,id){if(opts&&opts.bttParams){return this._getDynamicDojoStore(_4c6,opts,id);}var _4c7=this.getDataField(_4c6,id)||[];var _4c8=_4c7;if(opts&&opts.mapOpt){_4c8=this._mapJSONArray(_4c7,opts.mapOpt);}return new dojo.store.Memory(dojo.mixin({data:_4c8},opts));},getDojoObjectStore:function(_4c9,opts,id){return new dojo.data.ObjectStore({objectStore:this.getDojoStore(_4c9,opts,id)});},getDojoItems:function(_4ca,opts,id){return new dojo.data.ItemFileReadStore(dojo.mixin({data:{items:this.getDataField(_4ca,id)}},opts));},deleteContext:function(id){delete this.data[id];delete this.state[id];}});window.$BTT_ST=dojo.getObject("com.ibm.btt.store.BTTDataStore");window.$BTT_DF=dojo.hitch(window.$BTT_ST,window.$BTT_ST.getDataField);window.$BTT_DS=dojo.hitch(window.$BTT_ST,window.$BTT_ST.getDojoStore);window.$BTT_DOS=dojo.hitch(window.$BTT_ST,window.$BTT_ST.getDojoObjectStore);window.$BTT_DI=dojo.hitch(window.$BTT_ST,window.$BTT_ST.getDojoItems);window.$BTT_NUMBER=function(_4cb,_4cc){if(typeof _4cb!="number"){_4cb=new Number(_4cb);}return isNaN(_4cb)?_4cc:_4cb;};}dojo.declare("com.ibm.btt.store.DataSource",dijit._Widget,{_ds:dojo.getObject("com.ibm.btt.store.BTTDataStore"),state:{},data:{},operation:"",url:"",constructor:function(){this.state={};this.data={};this.operation="";this.url="";this.inherited(arguments);},postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,"display","none");if(this.url){this.requestDataURL(this.url);}this._ds.updateState(this.state,this.id);this._ds.updateData(this.data,this.id);if(this.operation){this.requestDataOP(this.operation);}},updateState:function(_4cd){this._ds.updateState(this.state,this.id);},requestDataURL:function(url){return this._ds.requestData({"url":url},this.id);},requestDataOP:function(_4ce,_4cf){return this._ds.requestData({bttParams:{dse_operationName:_4ce},"postData":_4cf||{}},this.id);},destroy:function(){console.debug("DataSource.destroy : "+this.id);this._ds.deleteContext(this.id);this.data=undefined;this.state=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _4d0(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _4d1(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _4d2(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _4d3(obj){if(obj.constructor===Date){return true;}else{return false;}};var _4d4={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _4d0(str)?undefined:str.toString().length;},subString:function(str,_4d5,end){if(!_4d0(str)&&_4d1(_4d5)&&_4d1(end)){_4d5=_4d2(_4d5);end=_4d2(end);if(_4d5>end||_4d5<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_4d5,end);}}else{return undefined;}},indexOf:function(str,_4d6){return _4d0(str)||_4d0(_4d6)?undefined:str.toString().indexOf(_4d6.toString());},lastIndexOf:function(str,_4d7){return _4d0(str)||_4d0(_4d7)?undefined:str.toString().lastIndexOf(_4d7.toString());},contains:function(str,str2){if(_4d0(str)||_4d0(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_4d8,str1,str2){return !_4d0(_4d8)&&!_4d0(str1)&&!_4d0(str1)?_4d8.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_4d8;},trim:function(str){return _4d0(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_4d0(str1)&&_4d0(str2)){return undefined;}else{if(_4d0(str1)){return str2.toString();}else{if(_4d0(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _4d0(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _4d0(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_4d0(str1)||_4d0(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _4d0(str1)||_4d0(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _4d9={today:function(){return new Date();},after:function(date,days,_4da,_4db){if(_4d0(date)||!_4d3(date)){return undefined;}if(!_4d0(days)&&_4d1(days)){date.setDate(date.getDate()+_4d2(days));}if(!_4d0(_4da)&&_4d1(_4da)){date.setMonth(date.getMonth()+_4d2(_4da));}if(!_4d0(_4db)&&_4d1(_4db)){date.setFullYear(date.getFullYear()+_4d2(_4db));}return date;},before:function(date,days,_4dc,_4dd){if(_4d0(date)||!_4d3(date)){return undefined;}if(!_4d0(days)&&_4d1(days)){date.setDate(date.getDate()-_4d2(days));}if(!_4d0(_4dc)&&_4d1(_4dc)){date.setMonth(date.getMonth()-_4d2(_4dc));}if(!_4d0(_4dd)&&_4d1(_4dd)){date.setFullYear(date.getFullYear()-_4d2(_4dd));}return date;},daysBetween:function(_4de,_4df){if(_4d0(_4de)||_4d0(_4df)||!_4d3(_4de)||!_4d3(_4df)){return undefined;}var _4e0=Date.UTC(_4de.getFullYear(),_4de.getMonth(),_4de.getDate(),_4de.getHours(),_4de.getMinutes(),_4de.getSeconds(),_4de.getMilliseconds())-Date.UTC(_4df.getFullYear(),_4df.getMonth(),_4df.getDate(),_4df.getHours(),_4df.getMinutes(),_4df.getSeconds(),_4df.getMilliseconds());return _4e0/(1000*60*60*24);},naturalDaysBetween:function(_4e1,_4e2){if(_4d0(_4e1)||_4d0(_4e2)||!_4d3(_4e1)||!_4d3(_4e2)){return undefined;}var _4e3=Date.UTC(_4e1.getFullYear(),_4e1.getMonth(),_4e1.getDate(),0,0,0,0)-Date.UTC(_4e2.getFullYear(),_4e2.getMonth(),_4e2.getDate(),0,0,0,0);return _4e3/(1000*60*60*24);},dayOfWeek:function(date){if(_4d0(date)||!_4d3(date)){return undefined;}return date.getDay();},year:function(date){if(_4d0(date)||!_4d3(date)){return undefined;}return date.getFullYear();},month:function(date){if(_4d0(date)||!_4d3(date)){return undefined;}return date.getMonth();},day:function(date){if(_4d0(date)||!_4d3(date)){return undefined;}return date.getDate();},parseDate:function(obj,_4e4){if(_4e4){var _4e5={};_4e5.formatLength="long";_4e5.datePattern=_4e4;_4e5.selector="date";try{var _4e6=dojo.date.locale.parse(obj,_4e5);if(_4e6!=null){return _4e6;}else{return undefined;}}catch(ee){return undefined;}}else{if(_4d0(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_4d0(obj)||!_4d3(obj)){return undefined;}var _4e7=obj.getMonth()+1;if(_4e7<10){_4e7="0"+_4e7;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_4e7+"-"+day;}};var _4e8={round:function(num){if(_4d0(num)||!_4d1(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_4d0(num)||!_4d1(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_4d0(num)||!_4d1(num)){return undefined;}return Math.abs(num);}};var _4e9={addClass:function(id,_4ea){var node=id;var wt=dijit.byId(id);if(wt){node=wt.domNode;}dojo.addClass(node,_4ea);},removeClass:function(id,_4eb){var node=id;var wt=dijit.byId(id);if(wt){node=wt.domNode;}dojo.removeClass(node,_4eb);},setVisibility:function(id,_4ec){var node=id;var wt=dijit.byId(id);if(wt){if(wt._setVisibilityAttr){return wt._setVisibilityAttr(_4ec);}node=wt.domNode;}var d="";var v="inherit";switch(_4ec){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}dojo.style(node,"display",d);dojo.style(node,"visibility",v);}};var _4ed={equals:function(arg1,arg2){if(arg1&&arg2&&arg1 instanceof Date&&arg2 instanceof Date){return dojo.date.compare(arg1,arg2,"date")==0;}else{return arg1==arg2;}}};window.BTTStringFunctions=_4d4;window.BTTDateFunctions=_4d9;window.BTTNumberFunctions=_4e8;window.BTTDomFunctions=_4e9;window.BTTUtil=_4ed;})();}if(!dojo._hasResource["com.ibm.btt.dijit.RepetitivePanel"]){dojo._hasResource["com.ibm.btt.dijit.RepetitivePanel"]=true;dojo.provide("com.ibm.btt.dijit.RepetitivePanel");dojo.declare("com.ibm.btt.dijit.RepetitivePanel",[dijit._Widget,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractWidgetSizeMixin],{_panelDomList:null,_visibilityList:null,_currentPanelIndex:-1,dataNameForRow:"",selectionMode:"none",selectionRowIndex:-1,_events:[],postCreate:function(){this._panelDomList=[];this._visibilityList=[];this._events=[];var _4ee=this;dojo.query("> div.innerPane",this.domNode).forEach(function(node){_4ee._events.push(dojo.connect(node,"onclick",dojo.hitch(_4ee,_4ee._onRowClick,node)));_4ee._events.push(dojo.connect(node,"onkeydown",dojo.hitch(_4ee,_4ee._onRowKeyDown,node)));_4ee._visibilityList.push("inherit");var _4ef=dojo.query("> table",node);if(_4ef.length>0){_4ee._panelDomList.push(_4ef[0]);}else{var _4f0=dojo.query("> div.BTTTableStyle",node);if(_4f0.length>0){_4ee._panelDomList.push(_4f0[0]);}}});this.containerNode=this.domNode;},_getSizeAttr:function(){return this._panelDomList.length;},setVisibility:function(idx,vis){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}var d="";var v="inherit";switch(vis){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:vis="inherit";d="";v="inherit";}this._visibilityList[idx]=vis;dojo.style(this._panelDomList[idx],"display",d);dojo.style(this._panelDomList[idx],"visibility",v);},getVisibility:function(idx){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}var v=this._visibilityList[idx];if(v=="inherit"){var node=this._panelDomList[idx];if(node.offsetWidth<1||node.offsetHeight<1){v="gone";}else{v=dojo.style(node,"visibility")=="hidden"?"hidden":"visible";}}return v;},setStyleClass:function(idx,cls){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}dojo.removeClass(this._panelDomList[idx]);dojo.addClass(this._panelDomList[idx],cls);},hasStyleClass:function(idx,cls){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}return dojo.hasClass(this._panelDomList[idx],cls);},getCurrentPanelIndex:function(){return this._currentPanelIndex;},setCurrentPanelIndex:function(_4f1){this._currentPanelIndex=_4f1;},_onRowClick:function(node,e){if(this.selectionMode=="single"){this._updateSelection(node);}},_onRowKeyDown:function(node,e){if(this.selectionMode=="single"&&(e.keyCode==dojo.keys.SPACE||e.keyCode==dojo.keys.ENTER)){this._updateSelection(node);}},_updateSelection:function(node){var _4f2=this.selectionRowIndex;var _4f3=dojo.query("~ div.innerPane",node);this.selectionRowIndex=this._panelDomList.length-_4f3.length-1;if(_4f2!=-1&&this.selectionRowIndex!=_4f2){var _4f4=dojo.query("> div.innerPane",this.domNode);if(_4f2<=_4f4.length){dojo.removeClass(_4f4[_4f2],"BTTRepePanelSelectedRow");}}if(this.selectionRowIndex!=_4f2){dojo.addClass(node,"BTTRepePanelSelectedRow");}},_findInitiator:function(){var src=null;var _4f5=arguments.callee;for(var c=0;_4f5&&c++<50;_4f5=_4f5.caller){var evt=null;for(var i=0;i<_4f5.arguments.length&&i<8;i++){evt=_4f5.arguments[i];if(evt&&(evt.type=="submit"||evt.type=="click"||(evt.type=="keydown"&&(evt.keyCode==dojo.keys.SPACE||evt.keyCode==dojo.keys.ENTER)))){src=evt.target;break;}}}var _4f6=null;while(src){if(dojo.hasClass(src,"innerPane")){_4f6=src;break;}src=src.parentNode;}return _4f6;},onFormSubmit:function(){if(this.selectionMode=="single"){var node=this._findInitiator();if(node){this._updateSelection(node);}}if(this.dataNameForRow&&this.selectionMode=="single"){this._tmpInput=com.ibm.btt.dijit.Hidden({name:this.dataNameForRow,value:this.selectionRowIndex});dojo.place(this._tmpInput.domNode,this.domNode,"after");}},destroy:function(_4f7){this._beingDestroyed=true;while(this._events&&this._events.length>0){try{dojo.disconnect(this._events.pop());}catch(e){}}this._events=undefined;this.destroyDescendants(_4f7);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Keyboard"]){dojo._hasResource["com.ibm.btt.dijit.Keyboard"]=true;dojo.provide("com.ibm.btt.dijit.Keyboard");dojo.getObject("com.ibm.btt.dijit.keyboards",true);dojo.declare("com.ibm.btt.dijit.Keyboard",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/Keyboard.html","<table class=\"dijit keyboard\" style=\"display:none;\" cellspacing=\"5\" cellpadding=\"0\">\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key0\">7</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key1\">8</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key2\">9</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key3\">+</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key4\">4</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key5\">5</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key6\">6</div></td>\r\n\t\t<td><div class=\"cell \" dojoAttachPoint=\"key7\">-</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key8\">1</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key9\">2</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key10\">3</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key11\">Back</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key12\">*</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key13\">0</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key14\">.</div></td>\r\n\t\t<td><div class=\"cell enterKey\" dojoAttachPoint=\"key15\">Enter</div></td>\r\n\t</tr>\r\n</table>\r\n"),_keys:null,_evts:[],dynamicKeys:false,postCreate:function(){this._initKeys();if(!com.ibm.btt.dijit.keyboards.instances){com.ibm.btt.dijit.keyboards.instances=[];}com.ibm.btt.dijit.keyboards.instances.push(this);},refWidget:"",_getRefWidgetAttr:function(_4f8){this.refWidget=_4f8;},_initKeys:function(){this._keys=["7","8","9","+","4","5","6","-","1","2","3","*","0","."];for(var i=0;i<16;i++){this._evts.push(dojo.connect(this["key"+i],"onmousedown",this,dojo.hitch(this,this._onMouseDown,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseup",this,dojo.hitch(this,this._onMouseUp,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseover",this,dojo.hitch(this,this._onMouseOver,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseout",this,dojo.hitch(this,this._onMouseOut,this["key"+i])));}for(var i=0;i<15;i++){if(i==11){continue;}var num;if(this.dynamicKeys){num=parseInt(Math.random()*this._keys.length);}else{num=0;}this["key"+i].innerHTML=this._keys[num];this._evts.push(dojo.connect(this["key"+i],"onclick",this,dojo.hitch(this,this._onCellClick,this._keys[num],this["key"+i])));this._keys.splice(num,1);}this._evts.push(dojo.connect(this["key11"],"onclick",this,dojo.hitch(this,this._onBackClicked,this["key"+i])));this._evts.push(dojo.connect(this["key15"],"onclick",this,dojo.hitch(this,this._onEnterClicked,this["key"+i])));this._evts.push(dojo.connect(this.domNode,"onclick",this,this._onKeyboardClicked));},_onCellClick:function(key,node){if(this.refWidget){var _4f9=dijit.byId(this.refWidget);_4f9.set("value",_4f9.get("value")+key);}},_onBackClicked:function(node){if(this.refWidget){var _4fa=dijit.byId(this.refWidget);var _4fb=_4fa.get("value").toString();_4fa.set("value",_4fb.substr(0,_4fb.length-1));}},_onEnterClicked:function(node){this.hide();},show:function(){if(!this.refWidget){return;}var _4fc=dijit.byId(this.refWidget);var _4fd=_4fc.domNode;var pos=dijit.placeOnScreenAroundElement(this.domNode,_4fd,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition));dojo.style(this.domNode,"display","");this._focusRefWidget();},hide:function(){dojo.style(this.domNode,"display","none");this._focusRefWidget();},_onKeyboardClicked:function(){this._focusRefWidget();},_focusRefWidget:function(){if(this.refWidget){var _4fe=dijit.byId(this.refWidget);_4fe.focus();}},_onMouseDown:function(node){dojo.addClass(node,"active");},_onMouseUp:function(node){dojo.removeClass(node,"active");},_onMouseOver:function(node){if(!dojo.hasClass(node,"hovered")){dojo.addClass(node,"hovered");}},_onMouseOut:function(node){dojo.removeClass(node,"hovered");}});}if(!dojo._hasResource["com.ibm.btt.dijit.TitlePane"]){dojo._hasResource["com.ibm.btt.dijit.TitlePane"]=true;dojo.provide("com.ibm.btt.dijit.TitlePane");dojo.declare("com.ibm.btt.dijit.TitlePane",[dijit.TitlePane,com.ibm.btt.dijit.AbstractWidgetMixin],{_setTitleAttr:function(_4ff){this.titleKey=_4ff;var _500=this.getI18NString(_4ff);this._set("title",_500);this.titleNode.innerHTML=_500;},_getTitleAttr:function(){return this.titleKey;}});}
